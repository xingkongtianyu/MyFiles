function isWhite(a){for(var b=0,c=arr.length;b<c;b++)if(a.indexOf(arr[b])!=-1)return!0;return!1}function parseURL(a){var b=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,c=["url","scheme","slash","host","port","path","query","hash"],d=b.exec(a),e={};for(var f=0,g=c.length;f<g;f+=1)e[c[f]]=d[f]||"";return e}function getQuery(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),c=window.location.search.substr(1).match(b);return c!=null?c[2]:""}function share(){window.open("http://service.weibo.com/share/share.php?url="+getQuery("url")+"&appkey="+getQuery("appkey")+"&title="+getQuery("title")+"&pic="+getQuery("pic")+"&ralateUid="+getQuery("ralateUid")+"&language="+language,"_blank","width=615,height=505")}var language="",image;onload=function(){function k(){var a=document.cookie+";",b=["SUP","=([^;]*)?;"].join(""),c=["(\\?|&)","uid","=([^&]*)(&|$)"].join(""),d=a.match(new RegExp(b,"i"));d=d?d[1]||"":"";d=unescape(d);var e=d.match(new RegExp(c));e=e?e[2]||"":"";return{uid:e,isLogin:!!e}}function h(a){var b,c,d=+(new Date),f=/=\?(&|$)/g;a.data=a.data||"";a.data=(a.data?a.data+"&":"")+"callback"+"=?";c="jsonp"+e++;a.data=(a.data+"").replace(f,"="+c+"$1");window[c]=function(a){clearTimeout(g);b=a;l();window[c]=undefined;try{delete window[c]}catch(d){}j&&j.removeChild(k)};var h=a.url.replace(/(\?|&)_=.*?(&|$)/,"$1_="+d+"$2");a.url=h+(h==a.url?(a.url.match(/\?/)?"&":"?")+"_="+d:"");if(a.data){a.url+=(a.url.match(/\?/)?"&":"?")+a.data;a.data=null}clearTimeout(g);g=setTimeout(function(){},3e4);var i=!1,j=document.getElementsByTagName("head")[0],k=document.createElement("script");a.scriptCharset&&(k.charset=a.scriptCharset);k.src=a.url;var l=function(){a.success&&a.success(b)};j.appendChild(k)}function c(){var a=k().uid,b=document.referrer;b.indexOf("hits.sinajs.cn/A1/weiboshare.html")!=-1&&(b=getQuery("refer"));var c="http://rs.sinajs.cn/tmp.gif?id=sharebutton&action=pv&uid="+a+"&refer="+encodeURIComponent(b)+"&rnd="+(new Date).getTime();image=new Image;image.src=c}try{var a=document.getElementsByTagName("body")[0];a&&(a.style.backgroundColor="transparent")}catch(b){}c();if(getQuery("count")==1){language=getQuery("language")?getQuery("language"):"";var d=getQuery("appkey")||8003029170,e=+(new Date),f=getQuery("url"),g=null,i=function(a){var b="https://api.weibo.com/2/short_url/shorten.json",c="https://api.weibo.com/2/short_url/share/counts.json",e="source="+d+"&url_long="+a;h({url:b,data:e,scriptCharset:"utf-8",success:function(a){var b=a.data;if(!b||!b.urls[0])j();else{var e="source="+d+"&url_short="+encodeURIComponent(b.urls[0].url_short||"");h({url:c,data:e,scriptCharset:"utf-8",success:function(a){a?j(a):j()}})}}})},j=function(a){var b=0;try{b=a.data.urls[0].share_counts||0;var c=b/1e4>>0;if(c>0){var d=b%1e4/1e3>>0;d=d>0?"."+d:"";b=""+c+d+(language==="zh_tw"?"萬":"万")}}catch(e){}document.getElementById("count").innerHTML=b};i(f)}};var type=getQuery("type");/\W/.test(type)&&(type=type.replace(/([&"'<>]|\u00A0|\u0020|\u000B|\u2028|\u2029|\f)/g,function(a,b){switch(b){case"&":return"&amp;";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;";case" ":case"":case"\u2028":case"\u2029":case"\f":return"&#32;"}}));var whiteList=window.eventList||"",arr=whiteList.split(","),oUrl=parseURL(decodeURIComponent(getQuery("url")));isWhite(oUrl.host)&&(type="_event"+type);var cls=type+(getQuery("count")==1?" showNum":"");document.write('<div class="change_btn">\n\t\t\t<div class="type'+cls+'">\n\t\t\t\t<span id="count_p" class="number">\n\t\t\t\t\t<em id="count">...</em>\n\t\t\t\t\t<img src="http://simg.sinajs.cn/platformstyle/images/common/transparent.gif" class="arrow" alt="" />\n\t\t\t\t</span>\n\t\t\t\t<p><a title="分享到新浪微博" onclick="share();return false;" href="#" hidefocus="true"><img src="http://simg.sinajs.cn/platformstyle/images/common/transparent.gif" class="icon" alt="" /></a></p>\n\t\t\t</div>\n\t\t</div>');
;
