var _BdBrowser={},_Instance={},_BdElement={},_System={};_System.path="";_System.imagePath="http://img.baidu.com/hi/";function _Bd$(a){if(typeof a=="string"){return document.getElementById(a)}return a}_BdElement.addClassName=function(e,g){var b=e.className.split(" ");var h=false;for(var d=0,c=b.length;d<c;d++){if(b[d]==g){h=true;break}}if(!h){e.className=b.concat(g).join(" ")}};_BdElement.removeClassName=function(a,b){var c=new RegExp("(^| )"+b+"( |$)","g");a.className=a.className.replace(c,"$2")};_BdElement._realLeftTop=function(c){var b=parseInt(c.currentStyle.borderTopWidth);var a=parseInt(c.currentStyle.borderLeftWidth);return{left:isNaN(a)?0:a,top:isNaN(b)?0:b}};_BdElement.realOffset=function(h){if(!h){return null}var g=h,b=0,j=0,c=0,d=0,f=this.body();do{c+=g.offsetLeft||0;d+=g.offsetTop||0;if(_BdBrowser.ie&&"tdthdiv".indexOf(g.tagName.toLowerCase())>-1){var a=this._realLeftTop(g);c+=a.left;d+=a.top}if(_BdBrowser.safari&&"tabletdth".indexOf(g.tagName.toLowerCase())>-1){var a=this._realLeftTop(g);c+=a.left;d+=a.top}g=g.offsetParent}while(g);if(!_BdBrowser.opera){do{b+=h.scrollLeft||0;j+=h.scrollTop||0;h=h.offsetParent}while(h)}return{x:c-b+f.scrollLeft,y:d-j+f.scrollTop}};_BdElement.body=function(){var a=0,j=0,f=0,c=0,b=0,k=0;var g=window,e=document,h=e.documentElement;a=h.clientWidth||e.body.clientWidth;j=g.innerHeight||h.clientHeight||e.body.clientHeight;c=e.body.scrollTop||h.scrollTop;f=e.body.scrollLeft||h.scrollLeft;b=Math.max(e.body.scrollWidth,h.scrollWidth||0);k=Math.max(e.body.scrollHeight,h.scrollHeight||0,j);return{scrollTop:c,scrollLeft:f,scrollWidth:b,scrollHeight:k,clientWidth:a,clientHeight:j}};try{if(typeof(HTMLElement)!="undefined"&&!window.opera){HTMLElement.prototype.__defineGetter__("currentStyle",function(){return this.ownerDocument.defaultView.getComputedStyle(this,null)});HTMLElement.prototype.insertAdjacentHTML=function(a,b){var c=this.ownerDocument.createRange();c.setStartBefore(this);c=c.createContextualFragment(b);this.insertAdjacentElement(a,c)};HTMLElement.prototype.insertAdjacentElement=function(a,b){switch(a){case"beforeBegin":this.parentNode.insertBefore(b,this);break;case"afterBegin":this.insertBefore(b,this.firstChild);break;case"beforeEnd":this.appendChild(b);break;case"afterEnd":if(!this.nextSibling){this.parentNode.appendChild(b)}else{this.parentNode.insertBefore(b,this.nextSibling)}break}}}if(!window.attachEvent&&window.addEventListener){window.attachEvent=HTMLElement.prototype.attachEvent=document.attachEvent=function(b,d,c){var a=c?true:false;this.addEventListener(b.replace(/^on/i,"").toLowerCase(),d,a)};window.detachEvent=HTMLElement.prototype.detachEvent=document.detachEvent=function(b,d,c){var a=c?true:false;this.removeEventListener(b.replace(/^on/i,"").toLowerCase(),d,a)}}}catch(_er){}_System.extend=function(c,b){for(var a in b){c[a]=b[a]}return c};Function.prototype.Extends=function(a,c){var e=this.prototype,b,d=this.prototype=new a();if(c){d._className=c}for(b in e){d[b]=e[b]}this.prototype.constructor=e.constructor;e=null;if(d.hashCode){delete _Instance[d.hashCode]}return d};function uniqueID(){var b=function(){return Math.round(Math.random()*2147483648)};var a=function(){return b().toString(36)+(b()^(new Date()).getTime()).toString(36)};return a()+a()}function loadCssFile(d){var c=document;var a=c.body;var b=c.createElement("LINK");if(b&&a){b.href=d;b.type="text/css";b.rel="Stylesheet";a.insertBefore(b,a.firstChild)}}(function(){if(_BdBrowser.platform){return}var a=window.navigator.userAgent;_BdBrowser.platform=window.navigator.platform;_BdBrowser.firefox=a.indexOf("Firefox")>0;_BdBrowser.opera=typeof(window.opera)=="object";_BdBrowser.ie=!_BdBrowser.opera&&a.indexOf("MSIE")>0;_BdBrowser.mozilla=window.navigator.product=="Gecko";_BdBrowser.netscape=window.navigator.vendor=="Netscape";_BdBrowser.gecko=a.indexOf("Gecko")>-1&&a.indexOf("KHTML")==-1;_BdBrowser.safari=a.indexOf("Safari")>-1;if(_BdBrowser.firefox){var b=/Firefox(\s|\/)(\d+(\.\d+)?)/}else{if(_BdBrowser.ie){var b=/MSIE( )(\d+(\.\d+)?)/}else{if(_BdBrowser.opera){var b=/Opera(\s|\/)(\d+(\.\d+)?)/}else{if(_BdBrowser.netscape){var b=/Netscape(\s|\/)(\d+(\.\d+)?)/}else{if(_BdBrowser.safari){var b=/Version(\/)(\d+(\.\d+)?)/}else{if(_BdBrowser.mozilla){var b=/rv(\:)(\d+(\.\d+)?)/}}}}}}if("undefined"!=typeof(b)&&b.test(a)){_BdBrowser.version=parseFloat(RegExp.$2)}})();String.prototype.format=function(){if(arguments.length==0){return this}for(var b=this,a=0;a<arguments.length;a++){b=b.replace(new RegExp("\\{"+a+"\\}","g"),arguments[a])}return b};var _BdPopupLayer=function(){_Instance[this.hashCode=uniqueID()]=this;this.busy=false;this.exclusive=false;this.autoFit=true;this.isOpen=false;this.defaultContent="<nobr><div id='Content' nowrap='true' style='border:solid 1px #666666'></div></nobr>";this.hideTrigger={onblur:true,onscroll:true,onmousedown:true};this.initialize()};_BdPopupLayer._layers=[];_BdPopupLayer._focusOnLayer=false;_System.extend(_BdPopupLayer.prototype,{initialize:function(){_BdPopupLayer._layers[_BdPopupLayer._layers.length]=this;var c=this;c.id=c.name="_BdPopupLayer_"+c.hashCode;this.onBlurHandler=function(){setTimeout(function(){if(!_BdPopupLayer._focusOnLayer){c.hide()}},10)};this.onClickHandler=function(){c.hide()};this.onScrollHandler=function(){c.hide()};var d="<iframe frameborder='0' name='"+c.name+"' style='position:absolute; z-index:65001; display:none;' scrolling='no' id='"+c.id+"'></iframe>";if(!document.body){document.write(d)}else{document.body.insertAdjacentHTML("afterBegin",d)}var a=document.getElementsByTagName("IFRAME");for(var b=0;b<a.length;b++){if(a[b].id==this.id){this.layer=a[b]}}frames[this.name].document.write("            <html>                <head>                    <style type='text/css'>                        html *{-moz-user-select:none;}                        body,td,th{font:12px Geneva, Arial, sans-serif; cursor:default;}                        body{margin:0px; background-color:#FFF;}                        .tabPanel{height:253px;width:344px;}                        .tabContent{overflow-y:auto;float:left;width:280px;height:253px;}                        .tabContentHide{display:none;width:263px;height:253px}                        .tabContentShow{display:block;width:263px;height:253px}                        .tabMenu{float:right;width:64px;height:140px;text-align:center;line-height:24px;height:24px;font:'\u5b8b\u4f53';font-size:12px;}                        .tabMenuHover{background:#E8E8FD;}                        .tabMenuNoHover{cursor:pointer;}                        .tableCell{background:#d7d79f;}                        .tableCellOver{background:#ffffbe;}                        .reviewHide{display:block;position:absolute;width:50px;height:50px;left:5px;right:200px;top:3px;bottom:200px;background-color:#FFFFFF;text-align:conter;}                        .review{width:50px;height:50px;background-position:center;background-repeat:no-repeat;border:1px solid #000;}                        .tabStyle{position:absolute;left:356px;right:200px;top:12px;bottom:200px;z-index:65533;width:50px;height:50px;background:#FFFFFF;}                        .jd img{background:transparent url(http://img.baidu.com/hi/default/jxFace2.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:35px; height:35px; }                        .pp img{background:transparent url(http://img.baidu.com/hi/default/fFace.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:25px; height:25px; }                        .ldw img{background:transparent url(http://img.baidu.com/hi/default/wFace.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:35px; height:35px; }                        .tsj img{background:transparent url(http://img.baidu.com/hi/default/tFace.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:35px; height:35px; }                        .cat img{background:transparent url(http://img.baidu.com/hi/default/cFace.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:35px; height:35px; }                        .bb img{background:transparent url(http://img.baidu.com/hi/default/bFace.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:35px; height:35px; }                        .youa img{background:transparent url(http://img.baidu.com/hi/default/yFace.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:35px; height:35px; }                    </style>                </head>                <body onfocus='parent._BdPopupLayer._focusOnLayer=true;' onselectstart='return false'>"+this.defaultContent+"</body>            </html>");frames[this.name].document.close();window.attachEvent("onfocus",function(f){_BdPopupLayer._focusOnLayer=false})},write:function(a){this.content.innerHTML=a},showBy:function(b,c,a){this.show(0,0,c,a,b)},showByXYWH:function(c,b,e,d,a){this.show(b,e,d,a,c)},show:function(e,m,b,p,g){var r=e=e?(isNaN(e)?0:parseInt(e,10)):0;var q=m=m?(isNaN(m)?0:parseInt(m,10)):0;b=b?(isNaN(b)?"auto":parseInt(b,10)):"auto";p=p?(isNaN(p)?"auto":parseInt(p,10)):"auto";var h=_BdElement.body(),f=0;if(g&&(g=_Bd$(g))&&g.tagName){f=g.offsetHeight;var l=_BdElement.realOffset(g);e+=l.x;m+=l.y}this.layer.style.top=m+f+"px";this.layer.style.left=e+"px";this.layer.style.width="2px";this.layer.style.height="2px";if(_BdBrowser.netscape&&_BdBrowser.netscape.version<7.2){this.layer.style.visibility=""}else{this.layer.style.display=""}var c=this.layer.offsetWidth;var o=this.layer.offsetHeight;if(h.scrollLeft+h.clientWidth<e+c){if(e-c>=h.scrollLeft){e-=c}else{e=h.scrollLeft+h.clientWidth-c}}if(h.scrollTop+h.clientHeight<m+o+f){if(m-o>=h.scrollTop){m-=o}else{m=h.scrollTop+h.clientHeight-o}}else{m+=f}var k=this.document,j=dsh=0;var a=k.body.scrollWidth;var n=k.body.scrollHeight;if(k.documentElement){j=k.documentElement.scrollWidth;dsh=k.documentElement.scrollHeight}if(isNaN(b)){b=Math.max(j,a,this.content.offsetWidth)}if(isNaN(p)){p=Math.max(dsh,n,this.content.offsetHeight)}this.width=b||2;this.height=p||2;this.layer.style.top=(this.top=m)+"px";this.layer.style.left=(this.left=e)+"px";this.layer.style.width=this.width+"px";this.layer.style.height=this.height+"px";if(this.hideTrigger.onblur){window.attachEvent("onblur",this.onBlurHandler)}if(this.hideTrigger.onscroll){window.attachEvent("onscroll",this.onScrollHandler)}if(this.hideTrigger.onmousedown){document.attachEvent("onmousedown",this.onClickHandler)}this.isOpen=true;this.onshow()},hide:function(){this.isOpen=false;this.layer.style.zIndex=65001;if(_BdBrowser.netscape&&_BdBrowser.netscape.version<7.2){this.layer.style.visibility="hidden"}else{this.layer.style.display="none"}if(this.hideTrigger.onblur){window.detachEvent("onblur",this.onBlurHandler)}if(this.hideTrigger.onscroll){window.detachEvent("onscroll",this.onScrollHandler)}if(this.hideTrigger.onmousedown){document.detachEvent("onmousedown",this.onClickHandler)}if(!this.exclusive){this.document.body.innerHTML=this.defaultContent;this.width=this.height=0;this.style=this.busy=false}this.onhide()},getElementById:function(a){return this.document.getElementById(a)}});window.attachEvent("onload",function(){new _BdPopupLayer()});_BdPopupLayer.provider=function(c){var b,a=0;for(;a<this._layers.length;a++){if(!this._layers[a].busy){b=this._layers[a];break}}if(a==this._layers.length-1){new _BdPopupLayer()}if(a==this._layers.length){b=new _BdPopupLayer(c)}b.busy=true;b.window=b.layer.contentWindow;b.document=b.window.document;b.content=b.document.getElementById("Content");b.style=b.content.style;return b};function BdEditor(b,c,a){this.textarea=_Bd$(b);a=a||"";_System.path=a+"/static/cblog/";this.width=c.width||"100%";this.height=c.height||"300px";this.modules={};BdEditor.instance=_Instance[this.hashCode=uniqueID()]=this}BdEditor.prototype.render=function(){loadCssFile(_System.path+"css/ui/comment_editor/bdeditor.css");var a="        <div id='bdeditor_container_{2}'>            <table width='{0}' height='{1}' cellpadding='0' cellspacing='0' border='0'>                <tr>                    <td id='editor_toolbar_{2}' class='ToolbarContainer'></td>                </tr>                <tr>                    <td id='editor_area_{2}' class='EditorContainer'></td>                </tr>            </table>        </div>    ".format(this.width,this.height,this.hashCode);this.textarea.insertAdjacentHTML("beforeBegin",a);this.renderToolbar();this.renderEditorArea();this.makeEditable();this.attachEventListener();this.isLightFont=false};BdEditor.prototype.setCookie=function(a,b){document.cookie=a+"="+escape(b)+";expires=Wed, 28-Nov-02 01:45:46 GMT;path=/;domain=.baidu.com";document.cookie=a+"="+escape(b)+";expires=Wed, 28-Nov-37 01:45:46 GMT;path=/"};BdEditor.prototype.getCookie=function(c){var b,d=new RegExp("(^| )"+c+"=([^;]*)(;|$)");if(b=document.cookie.match(d)){return unescape(b[2])}};BdEditor.prototype.renderToolbar=function(){var k=["<div class='ToolbarStrip'><table border='0' cellspacing='0' cellpadding='0'><tr>"];var d=["_TiSmiley"];if(_BdBrowser.ie){d=["_TiSmiley","_LightFont"]}for(var h=0,g=d.length;h<g;h++){var b=this.modules[d[h]]=new window[d[h]]();if(h==1){var a='<input  type="checkbox" name="_LightFont" id="_LightFont'+this.hashCode+'" onclick="switchLightFont(this.checked)" />';k.push("<td width='100%'  align='right' valign='middle'><div class='ToolbarItem'>"+a+"</div></td>")}var c=(h==0)?"nowrap='nowrap'":"";k.push("<td nowrap='nowrap'>"+b.render()+"</td>")}"editor.lightFontModule.switchLightFont";k.push("</tr></table></div>");var f=_Bd$("editor_toolbar_"+this.hashCode);f.innerHTML=k.join("");if(_BdBrowser.ie){this.lightFontModule=_Bd$("_LightFont"+this.hashCode);this.lightFontModule.handler=this;this.lightFontColor="#0000FF";this.lightFontModule.switchLightFont=function(m){this.handler.isLightFont=m;var j=m?this.handler.lightFontColor:"0";if(j!="0"){j=j.replace("#","")}this.handler.setCookie("BDLFONT",j);if(!m){var l=this.handler.modules._LightFont.layer;if(l){l.hide()}}};var e=this.getCookie("BDLFONT");if(typeof e=="undefined"){e="0"}if(e!="0"){this.lightFontModule.checked=true;this.lightFontModule.switchLightFont(true);_Bd$("LightFont_Font_"+this.hashCode).style.color="#"+e;this.lightFontColor="#"+e;this.setCookie("BDLFONT",e)}else{this.lightFontModule.checked=false;this.lightFontModule.switchLightFont(false);_Bd$("LightFont_Font_"+this.hashCode).style.color="#0000FF";this.lightFontColor="#0000FF";this.setCookie("BDLFONT",e)}}};BdEditor.prototype.renderEditorArea=function(){var editor_area=_Bd$("editor_area_"+this.hashCode);editor_area.innerHTML="<iframe width='100%' height='"+this.height+"' frameborder='0' src='javascript:void(0)'></iframe>";this.iframe=editor_area.lastChild;var w=this.window=this.iframe.contentWindow;var d=this.document=this.window.document;d.open();d.write('<html><head><style type="text/css">    /*<![CDATA[*/    body{ background-color: #ffffff; padding: 5px 5px 5px 5px; margin: 0px; }     body, td { font-family: Arial, Verdana, sans-serif; font-size: 14px; }    p{ margin:0px; }    /*]]>*/    </style></head><body></body></html>');d.close();var code=";window.onerror=function(e){return true;}";if(window.execScript){w.execScript(code)}else{if(_BdBrowser.safari){var s=d.createElement("SCRIPT");s.type="text/javascript";s.appendChild(d.createTextNode(code));d.documentElement.appendChild(s)}else{eval.call(w,code)}}};BdEditor.prototype.makeEditable=function(){var f=this.document;if(_BdBrowser.ie){f.body.disabled=true;f.body.contentEditable=true;f.body.removeAttribute("disabled");try{f.execCommand("BackgroundImageCache",false,true)}catch(c){}}else{try{f.body.spellcheck=false;f.designMode="on";try{f.execCommand("styleWithCSS",false,false)}catch(b){f.execCommand("useCSS",false,true)}f.execCommand("enableObjectResizing",false,true);f.execCommand("enableInlineTableEditing",false,false)}catch(a){}}this.textarea.style.display="none"};BdEditor.prototype.attachEventListener=function(){var a=this,c=a.document;var d=function(){var e=a.modules._TiSmiley.layer;if(e){e.hide()}if(_BdBrowser.ie){e=a.modules._LightFont.layer;if(e){e.hide()}}};if(_BdBrowser.ie){c.body.attachEvent("onfocus",d)}else{c.addEventListener("focus",d,false)}if(!_BdBrowser.ie){return false}c.attachEvent("onbeforedeactivate",function(h){var g=c.selection;var f=g.createRange();a.ieSelectionType=g.type.toLowerCase();if("control"==a.ieSelectionType){a.ieSelectionControl=f(0)}else{a.ieSelectionBookmark=f.getBookmark()}});c.attachEvent("onactivate",function(g){var f;try{if("control"==a.ieSelectionType){f=c.body.createControlRange();f.add(a.ieSelectionControl)}else{f=c.body.createTextRange();f.moveToBookmark(a.ieSelectionBookmark)}f.select();a.ieSelectionControl=a.ieSelectionBookmark=null}catch(g){}});function b(){var h=c.selection;var g=h.type.toLowerCase();if("control"==g){var e=h.createRange();for(var f=e.length-1;f>=0;f--){e(f).parentNode.removeChild(e(f))}return false}return true}c.attachEvent("onkeydown",function(j){var j=a.window.event||j;var h=j.which||j.keyCode||j.charCode;var f=0;if(j.ctrlKey||j.metaKey){f+=1000}if(j.shiftKey){f+=2000}if(j.altKey){f+=4000}var g=h+f;if(g==8){return(j.returnValue=b())}return(j.returnValue=true)});return false};BdEditor.prototype.getHtml=function(){var b=this.document.body.innerHTML.replace(/<(p|div)[^>]*>/gi,"<br/>").replace(/<\/\s*(p|div)\s*>/gi,"");var a=b.replace(/^(<br([^>])*\/?>)+/gi,"");if(_BdBrowser.ie){if(this.lightFontModule.checked){a='<span style="filter:glow(color='+this.lightFontColor+',strength=2);height:0px;color:#FFFFFF">'+a+"</span>"}}return a};function _ToolbarItemBase(){this.tooltipname="";this.tooltip="";this.cssName="Lightfont";this.commandName="";this.disabled=false;this.editor=BdEditor.instance;_Instance[this.hashCode=uniqueID()]=this}_System.extend(_ToolbarItemBase.prototype,{execute:function(){},render:function(){var a="<div class='ToolbarItem' title='"+this.tooltip+"' id='ToolbarItem_{0}'  onclick=\"_Instance['{0}'].clickHandler(this)\" onmouseup=\"_Instance['{0}'].mouseUpHandler(this)\" onmousedown=\"_Instance['{0}'].mouseDownHandler(this)\" onmouseout=\"_Instance['{0}'].mouseOutHandler(this)\" onmouseover=\"_Instance['{0}'].mouseOverHandler(this)\" ><div class='img "+this.cssName+"' alt='"+this.tooltip+"' /><font style='font-size:12px'>"+this.tooltipname+"</font></div>";return a.format(this.hashCode)},getContainer:function(){return _Bd$("ToolbarItem_"+this.hashCode)},_ac:function(a){_BdElement.addClassName(this.getContainer(),a)},_rc:function(a){_BdElement.removeClassName(this.getContainer(),a)},mouseUpHandler:function(a){if(!this.disabled){this._rc("mousedown")}},mouseDownHandler:function(a){if(!this.disabled){this._ac("mousedown")}},mouseOutHandler:function(a){if(!this.disabled){this._rc("mouseover");this._rc("mousedown")}},mouseOverHandler:function(a){if(!this.disabled){this._ac("mouseover")}},clickHandler:function(){if(this.disabled){return}this.execute();if(!_BdBrowser.ie){this.editor.window.focus()}}});function _LightFont(){_ToolbarItemBase.call(this);this.tooltip="\u95ea\u5149\u5b57";this.tooltipname='<font id="LightFont_Font_'+parent.BdEditor.instance.hashCode+'" style="font-size:10px; color:#000000;">\u25bc</font>&nbsp;\u95ea\u5149\u5b57';this.layer=_BdPopupLayer.provider();this.layer.exclusive=true;this._isFirstExecute=true;this._isCreated=false;this.disabled=false;this.initialize()}_LightFont.Extends(_ToolbarItemBase);_LightFont.prototype.initialize=function(){var a=this;this.layer.onshow=function(){var b=a.getContainer();b.onmouseover=b.onmouseout=function(){return false};a._ac("mouseover")};this.layer.onhide=function(){var b=a.getContainer();b.onmouseover=function(){a.mouseOverHandler(this)};b.onmouseout=function(){a.mouseOutHandler(this)};a._rc("mouseover")}};_LightFont.prototype.clickHandler=function(){if(!this._isCreated){this._isCreated=true;var p=["00","33","66","99","cc","ff","00","33","66","99","cc","ff"];var b=[];var a,r,n;for(var g=0;g<12;g++){a=p[g];for(var f=0;f<3;f++){if(g>=6){n=p[f+3]}else{n=p[f]}for(var q=0;q<6;q++){r=p[q];b[b.length]="#"+n+r+a}}}var l=['<table width="199px" height="133px" cellspacing="1" cellpadding="0" bgcolor="#000000" >'];var o=0;var d=_BdBrowser.ie?10:8;for(var g=0;g<12;g++){l.push("<tr>");for(var f=0;f<18;f++){var e=b[o++];l.push('<td bgcolor="'+e+'" width="10px" height="10px" style="cursor:pointer;font-size:1px"><div style="width:'+d+"px; height:"+d+"px; border:#000 solid 0px\" onmouseover=\"parent.BdEditor.instance.modules['_LightFont'].over(this);\" onmouseout=\"parent.BdEditor.instance.modules['_LightFont'].out(this);\" onclick=\"parent.BdEditor.instance.modules['_LightFont'].execute('"+e+"',this);\"></div></td>")}l.push("</tr>")}l.push("</table>");b=p=n=r=a=d=o=null;var k=l.join("");var h=["<html><head><title>color panel</title></head><body>"];h.push('<div id="colorPanel" style="width:180px;height:120px">');h.push(k);h.push("</div></body></html>");h=h.join("");this.layer.write(h);this.layer.style.border="solid 1px #A9CCDD"}else{}this.layer.style.height="133px";this.layer.showByXYWH(this.getContainer(),-125,0,_BdBrowser.ie?"201":"201",_BdBrowser.ie?"135":"135")};_LightFont.prototype.execute=function(a,d){d.style.border="#000 solid 0px";var b=this;b.layer.hide();parent.BdEditor.instance.lightFontColor=a;_Bd$("LightFont_Font_"+parent.BdEditor.instance.hashCode).style.color=a;if(_Bd$("_LightFont"+parent.BdEditor.instance.hashCode).checked){parent.BdEditor.instance.setCookie("BDLFONT",a.replace("#",""))}};_LightFont.prototype.over=function(a){a.style.border="#000 solid 1px"};_LightFont.prototype.out=function(a){a.style.border="#000 solid 0px"};function _TiSmiley(){_ToolbarItemBase.call(this);this.tabFlags=[0,0,0,0,0];this.tooltip="\u63d2\u5165\u8868\u60c5";this.tooltipname="\u63d2\u5165\u8868\u60c5";this.cssName="Smiley";this.commandName="InsertSmiley";this.smileyPath="http://img.baidu.com/hi/face/";this.smileyImages=[];this.layer=_BdPopupLayer.provider();this.layer.exclusive=true;this._isFirstExecute=true;this.initialize()}_TiSmiley.Extends(_ToolbarItemBase);_TiSmiley.prototype.initialize=function(){var a=this;this.layer.onshow=function(){var b=a.getContainer();b.onmouseover=b.onmouseout=function(){return false};a._ac("mouseover")};this.layer.onhide=function(){var b=a.getContainer();b.onmouseover=function(){a.mouseOverHandler(this)};b.onmouseout=function(){a.mouseOutHandler(this)};a._rc("mouseover")}};_TiSmiley.prototype.over=function(c,a){var b=this.layer.getElementById("tabIconReview");this.layer.getElementById("faceReview").style.backgroundImage="url("+c+")";if(a==1){b.style.display="block";b.style.left="4px";b.style.top="3px"}else{b.style.display="block";b.style.left="228px";b.style.top="3px"}};_TiSmiley.prototype.out=function(b){var a=this.layer.getElementById("tabIconReview");a.style.display="none"};_TiSmiley.prototype.switchTab=function(c){var b=7;if(c==4){this.layer.getElementById("tab4").style.height="150px"}for(var d=0;d<b;d++){var e=this.layer.getElementById("tab"+d);var a=this.layer.getElementById("tab"+d+"M");if(d==c){if(this.tabFlags[c]==0){this.tabFlags[c]=1;this.createTab("tab"+c)}e.style.display="block";a.className="tabMenuHover"}else{e.style.display="none";a.className="tabMenuNoHover"}}};FCKConfig={};FCKConfig.SmileyInfor={tab0:[],tab1:[],tab2:[],tab3:[],tab4:[],tab5:[],tab6:[]};FCKConfig.SmileyInfor.tab0=["Kiss","Love","Yeah","\u554a\uff01","\u80cc\u626d","\u9876","\u6296\u80f8","88","\u6c57","\u778c\u7761","\u9c81\u62c9","\u62cd\u7816","\u63c9\u8138","\u751f\u65e5\u5feb\u4e50","\u5927\u7b11","\u7011\u5e03\u6c57~","\u60ca\u8bb6","\u81ed\u7f8e","\u50bb\u7b11","\u629b\u5a9a\u773c","\u53d1\u6012","\u6253\u9171\u6cb9","\u4fef\u5367\u6491","\u6c14\u6124","\u56e7","\u543b","\u6012","\u80dc\u5229","HI","KISS","\u4e0d\u8bf4","\u4e0d\u8981","\u626f\u82b1","\u5927\u5fc3","\u9876","\u5927\u60ca","\u98de\u543b","\u9b3c\u8138","\u5bb3\u7f9e","\u53e3\u6c34","\u72c2\u54ed","\u6765","\u53d1\u8d22\u4e86","\u5403\u897f\u74dc","\u5957\u7262","\u5bb3\u7f9e","\u5e86\u795d","\u6211\u6765\u4e86","\u6572\u6253","\u6655\u4e86","\u80dc\u5229","\u81ed\u7f8e","\u88ab\u6253\u4e86","\u8d2a\u5403","\u8fce\u63a5","\u9177","","","","","","","","","","","","","","","\u5f00\u5fc3","\u5077\u7b11","\u5927\u54ed","\u6ef4\u6c57","\u53f9\u6c14","\u8d85\u8d5e","\u56e7\u56e7","\u98de\u543b","\u5929\u4f7f","\u6492\u82b1","\u751f\u6c14","\u88ab\u7838","\u5413\u50bb","\u968f\u610f\u5410"];FCKConfig.SmileyInfor.tab1=["Kiss","Love","Yeah","\u554a\uff01","\u80cc\u626d","\u9876","\u6296\u80f8","88","\u6c57","\u778c\u7761","\u9c81\u62c9","\u62cd\u7816","\u63c9\u8138","\u751f\u65e5\u5feb\u4e50","\u644a\u624b","\u7761\u89c9","\u762b\u5750","\u65e0\u804a","\u661f\u661f\u95ea","\u65cb\u8f6c","\u4e5f\u4e0d\u884c","\u90c1\u95f7","\u6b63Music","\u6293\u5899","\u649e\u5899\u81f3\u6b7b","\u6b6a\u5934","\u6233\u773c","\u98d8\u8fc7","\u4e92\u76f8\u62cd\u7816","\u780d\u6b7b\u4f60","\u6254\u684c\u5b50","\u5c11\u6797\u5bfa","\u4ec0\u4e48\uff1f","\u8f6c\u5934","\u6211\u7231\u725b\u5976","\u6211\u8e22","\u6447\u6643","\u6655\u53a5","\u5728\u7b3c\u5b50\u91cc","\u9707\u8361"];FCKConfig.SmileyInfor.tab2=["\u5927\u7b11","\u7011\u5e03\u6c57~","\u60ca\u8bb6","\u81ed\u7f8e","\u50bb\u7b11","\u629b\u5a9a\u773c","\u53d1\u6012","\u6211\u9519\u4e86","money","\u6c14\u6124","\u6311\u9017","\u543b","\u6012","\u80dc\u5229","\u59d4\u5c48","\u53d7\u4f24","\u8bf4\u5565\u5462\uff1f","\u95ed\u5634","\u4e0d","\u9017\u4f60\u73a9\u513f","\u98de\u543b","\u7729\u6655","\u9b54\u6cd5","\u6211\u6765\u4e86","\u7761\u4e86","\u6211\u6253","\u95ed\u5634","\u6253","\u6253\u6655\u4e86","\u5237\u7259","\u7206\u63cd","\u70b8\u5f39","\u5012\u7acb","\u522e\u80e1\u5b50","\u90aa\u6076\u7684\u7b11","\u4e0d\u8981\u4e0d\u8981","\u7231\u604b\u4e2d","\u653e\u5927\u4ed4\u7ec6\u770b","\u5077\u7aa5","\u8d85\u9ad8\u5174","\u6655","\u677e\u53e3\u6c14","\u6211\u8dd1","\u4eab\u53d7","\u4fee\u517b","\u54ed","\u6c57","\u554a~","\u70ed\u70c8\u6b22\u8fce","\u6253\u9171\u6cb9","\u4fef\u5367\u6491","\u56e7"];FCKConfig.SmileyInfor.tab3=["HI","KISS","\u4e0d\u8bf4","\u4e0d\u8981","\u626f\u82b1","\u5927\u5fc3","\u9876","\u5927\u60ca","\u98de\u543b","\u9b3c\u8138","\u5bb3\u7f9e","\u53e3\u6c34","\u72c2\u54ed","\u6765","\u6cea\u773c","\u6d41\u6cea","\u751f\u6c14","\u5410\u820c","\u559c\u6b22","\u65cb\u8f6c","\u518d\u89c1","\u6293\u72c2","\u6c57","\u9119\u89c6","\u62dc","\u5410\u8840","\u5618","\u6253\u4eba","\u8e66\u8df3","\u53d8\u8138","\u626f\u8089","\u5403To","\u5403\u82b1","\u5439\u6ce1\u6ce1\u7cd6","\u5927\u53d8\u8eab","\u98de\u5929\u821e","\u56de\u7738","\u53ef\u601c","\u731b\u62bd","\u6ce1\u6ce1","\u82f9\u679c","\u4eb2","","\u9a9a\u821e","\u70e7\u9999","\u7761","\u5957\u5a03\u5a03","\u6345\u6345","\u821e\u5012","\u897f\u7ea2\u67ff","\u7231\u6155","\u6447","\u6447\u6446","\u6742\u800d","\u62db\u8d22","\u88ab\u6bb4","\u88ab\u7403\u95f7","\u5927\u60ca","\u7406\u60f3","\u6b27\u6253","\u5455\u5410","\u788e","\u5410\u75f0"];FCKConfig.SmileyInfor.tab4=["\u53d1\u8d22\u4e86","\u5403\u897f\u74dc","\u5957\u7262","\u5bb3\u7f9e","\u5e86\u795d","\u6211\u6765\u4e86","\u6572\u6253","\u6655\u4e86","\u80dc\u5229","\u81ed\u7f8e","\u88ab\u6253\u4e86","\u8d2a\u5403","\u8fce\u63a5","\u9177","\u9876","\u5e78\u8fd0","\u7231\u5fc3","\u8eb2","\u9001\u82b1","\u9009\u62e9"];FCKConfig.SmileyInfor.tab5=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];FCKConfig.SmileyInfor.tab6=["\u7537\u515c","\u5973\u515c","\u5f00\u5fc3","\u4e56\u4e56","\u5077\u7b11","\u5927\u7b11","\u62bd\u6ce3","\u5927\u54ed","\u65e0\u5948","\u6ef4\u6c57","\u53f9\u6c14","\u72c2\u6655","\u59d4\u5c48","\u8d85\u8d5e","\u56e7\u56e7","\u7591\u95ee","\u98de\u543b","\u5929\u4f7f","\u6492\u82b1","\u751f\u6c14","\u88ab\u7838","\u53e3\u6c34","\u6cea\u5954","\u5413\u50bb","\u5410\u820c\u5934","\u70b9\u5934","\u968f\u610f\u5410","\u65cb\u8f6c","\u56f0\u56f0","\u9119\u89c6","\u72c2\u9876","\u7bee\u7403","\u518d\u89c1","\u6b22\u8fce\u5149\u4e34","\u606d\u559c\u53d1\u8d22","\u7a0d\u7b49","\u6211\u5728\u7ebf","\u6055\u4e0d\u8bae\u4ef7","\u5e93\u623f\u6709\u8d27","\u8d27\u5728\u8def\u4e0a"];FCKConfig.SmileyBox={tab0:[],tab1:[],tab2:[],tab3:[],tab4:[],tab5:[],tab6:[]};function initImgBox(d,e,b){if(d.length){return}var a="";for(var c=1;c<=b;c++){a=e;if(c<10){a=a+"0"}a=a+c+".gif";d.push(a)}}initImgBox(FCKConfig.SmileyBox.tab0,"j_00",84);initImgBox(FCKConfig.SmileyBox.tab1,"t_00",40);initImgBox(FCKConfig.SmileyBox.tab2,"w_00",52);initImgBox(FCKConfig.SmileyBox.tab3,"B_00",63);initImgBox(FCKConfig.SmileyBox.tab4,"C_00",20);initImgBox(FCKConfig.SmileyBox.tab5,"i_f",50);initImgBox(FCKConfig.SmileyBox.tab6,"y_00",40);var faceBox=FCKConfig.SmileyBox;var inforBox=FCKConfig.SmileyInfor;_TiSmiley.prototype.createTab=function(a){var h=_System.imagePath;var f="?v=1.1";FaceHandler={imageFolders:{tab0:"jx2/",tab1:"tsj/",tab2:"ldw/",tab3:"bobo/",tab4:"babycat/",tab5:"face/",tab6:"youa/"},imageReviewFolders:{tab0:"jx_review/",tab1:"tsj_review/",tab2:"bobo_review/",tab3:"tsj_review/",tab4:"babycat_review/",tab5:"face/",tab6:"youa/"},imageWidth:{tab0:36,tab1:35,tab2:35,tab3:36,tab4:35,tab5:25,tab6:35},imageCols:{tab0:7,tab1:7,tab2:7,tab3:7,tab4:7,tab5:7,tab6:7},imageColWidth:{tab0:35,tab1:35,tab2:35,tab3:35,tab4:35,tab5:35,tab6:35},tableWidth:{tab0:263,tab1:280,tab2:263,tab3:263,tab4:280,tab5:263,tab6:280},imageCss:{tab0:"jd",tab1:"tsj",tab2:"ldw",tab3:"bb",tab4:"cat",tab5:"pp",tab6:"youa"},imageCssOffset:{tab0:35,tab1:35,tab2:35,tab3:35,tab4:35,tab5:25,tab6:35}};var n=h+FaceHandler.imageFolders[a];var p=h+FaceHandler.imageReviewFolders[a];var w=FaceHandler.tableWidth;var m=FaceHandler.imageWidth;var x=FaceHandler.imageCols[a];var l=x/2;var r=FaceHandler.imageColWidth;var b=FaceHandler.imageCss[a];var k=FaceHandler.imageCssOffset[a];var d=this.layer.getElementById(a);var o=['<table cellpadding="0" cellspacing="0"  style="border-collapse:collapse;" border="1" bordercolor="#B8B3FF" width='+w[a]+'  height="100%">'];for(var u=0,c=faceBox[a].length;u<c;){o.push("<tr>");for(var t=0;t<x;t++,u++){var v=faceBox[a][u];if(v){var q=n+v+f;var z=n+v;var s=p+v;var e=t<l?0:1;var g=k*u*(-1)-1;var y=inforBox[a][u];o.push('<td width="'+r[a]+'"  height="'+r[a]+'" align="center" valign="middle" style="background-color:#FFFFFF;" onmouseover="this.style.backgroundColor=\'#E8E8FD\'"  onmouseout="this.style.backgroundColor=\'#FFFFFF\'" >');o.push('<span class="'+b+'"  style="display:block;">');o.push('<img title="'+y+'" style="background-position:left '+g+'px;"  width="'+m[a]+'" height="'+m[a]+"\" onclick=\"parent.BdEditor.instance.modules['_TiSmiley'].execute('"+z+"');\" src=\"http://img.baidu.com/hi/default/0.gif\" onmouseover=\"parent.BdEditor.instance.modules['_TiSmiley'].over('"+q+"',"+e+');"  onmouseout="parent.BdEditor.instance.modules[\'_TiSmiley\'].out();" /></td>');o.push("</span>")}else{o.push("<td>&nbsp;")}o.push("</td>")}o.push("</tr>")}o.push("</table>");o=o.join("");d.innerHTML=o};_TiSmiley.prototype.clickHandler=function(){this.tabFlags=[0,0,0,0,0,0,0];var a=[];a.push('<div id="tabPanel" class="tabPanel" >');a.push('	<div id="tabContent" class="tabContent">');a.push('		<div id="tab0" class="tabContentShow">0__tabContent</div>');a.push('		<div id="tab1" class="tabContentHide">1__tabContent</div>');a.push('		<div id="tab2" class="tabContentHide">2__tabContent</div>');a.push('		<div id="tab3" class="tabContentHide">3__tabContent</div>');a.push('      	<div id="tab4" class="tabContentHide">4__tabContent</div>');a.push('         <div id="tab5" class="tabContentHide">5__tabContent</div>');a.push('         <div id="tab6" class="tabContentHide">6__tabContent</div>');a.push("	</div>");a.push('	<div id="tabMenu" class="tabMenu" >');a.push('		<div id="tab0M" class="tabMenuHover"   		onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(0)">&nbsp;&nbsp;&nbsp;<u>\u7cbe\u9009</u>&nbsp;&nbsp;&nbsp;</div>');a.push('		<div id="tab1M" class="tabMenuNoHover" 	onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(1)">&nbsp;<u>\u5154\u65af\u57fa</u>&nbsp;</div>');a.push('		<div id="tab2M" class="tabMenuNoHover" 	onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(2)">&nbsp;<u>\u7eff\u8c46\u86d9</u>&nbsp;</div>');a.push('		<div id="tab3M" class="tabMenuNoHover" 	onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(3)">&nbsp;&nbsp;<u>BOBO</u>&nbsp;&nbsp;</div>');a.push('       <div id="tab4M" class="tabMenuNoHover" 	onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(4)">&nbsp;&nbsp;<u>baby\u732b</u>&nbsp;&nbsp;</div>');a.push('       <div id="tab5M" class="tabMenuNoHover" 	onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(5)">&nbsp;&nbsp;<u>\u6ce1\u6ce1</u>&nbsp;&nbsp;</div>');a.push('       <div id="tab6M" class="tabMenuNoHover"    onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(6)">&nbsp;&nbsp;<u>\u6709\u554a</u>&nbsp;&nbsp;</div>');a.push("	</div>");a.push("</div>");a.push('<div id="tabIconReview" class="tabStyle">');var b=_System.imagePath;a.push('<img id="faceReview" class="review"  src="http://img.baidu.com/hi/default/0.gif"/>');a.push("</div>");a=a.join("");this.layer.write(a);this.layer.style.border="solid 1px #A9CCDD";this.layer.showBy(this.getContainer(),_BdBrowser.ie?"346":"346",_BdBrowser.ie?"255":"255");this.createTab("tab0");this.switchTab(0)};_TiSmiley.prototype.execute=function(a){var f=this;f.layer.hide();f.editor.window.focus();if(_BdBrowser.ie){var j=f.editor.document.selection;var g=j.type.toLowerCase();if("control"==g){var k=j.createRange();var d=k(0);d.insertAdjacentHTML("beforeBegin",'<img src="'+a+'">');for(var c=k.length-1;c>=0;c--){k(c).parentNode.removeChild(k(c))}}else{var e=j.createRange();e.pasteHTML('<img src="'+a+'"/>')}}else{var b=f.editor.document.createElement("IMG");b.src=a;var j=f.editor.window.getSelection();var e=j.getRangeAt(0);e.deleteContents();e.insertNode(b);var h=f.editor.document.createRange();h.selectNode(b);j.removeAllRanges();j.addRange(h);j.collapseToEnd();if(f._isFirstExecute){f.editor.document.execCommand("insertHTML",false,"<br>\x00");f._isFirstExecute=false}}};var userSpam={};userSpam.Alert=function(j,e,b,f){var a=b||350;var d=f||100;var c=e||"举报";var g=new Popup({contentType:4,isReloadOnClose:false,width:a,height:d});g.setContent("title",c);g.setContent("alertCon",j);g.build();g.show();return g};userSpam.ShowTextDialog=function(j,e,b,f){var a=b||500;var d=f||280;var c=e||"举报";var g=new Popup({contentType:2,isReloadOnClose:false,width:a,height:d});g.setContent("title",c);g.setContent("contentHtml",j);g.build();g.show();return g};userSpam.ShowTipOff=function(){var a='<div style="padding:10px;"><form onsubmit="if(userSpam.checkReason()) setTimeout(function(){userSpam.ShowTipOK();},500); else return false;" name="_antiSpamSubForm" id="_antiSpamSubForm" action="http://act.hi.baidu.com/userspam/submit" method="post" target="_antiSpamSubIfr">        <b>百度空间代表网民感谢您正义举报，我们会尽快处理您的举报。 <br>空间与您共同努力为用户提供绿色、健康的互联网交流环境。</b>        <div style="border-top:1px solid #ccc; margin-top:5px; height:5px; line-height:0; font-size:0;"> </div>            <input type="hidden" name="spSpamUser" value=""  />            <input type="hidden" name="spBlogID" value=""  />            <input type="hidden" name="spPhotoID" value=""  />            <input type="hidden" name="spMsgID" value=""  />            <input type="hidden" name="spSubType" value="" />            <textarea style="display:none;" name="spSubContent"></textarea>请核实： <br>您正在举报的内容如下：            <div style="margin:10px 20px;padding:10px; border:1px solid #ccc; height:80px; overflow-y:auto;" id="_spSubContentShow"></div>请明确举报理由：（必选）            <div style="margin:10px 20px;padding:10px; border:1px solid #ccc;">            <label for="_spam_radio1" style="width:120px; float:left;"><input type="radio" name="spSubReason" value="1" id="_spam_radio1" />广告</label>            <label for="_spam_radio2" style="width:120px; float:left;"><input type="radio" name="spSubReason" value="2" id="_spam_radio2" />骚扰、谩骂</label>            <label for="_spam_radio3" style="width:120px; float:left;"><input type="radio" name="spSubReason" value="3" id="_spam_radio3" />中奖等欺诈信息</label><br>            <label for="_spam_radio4" style="width:120px; float:left;"><input type="radio" name="spSubReason" value="4" id="_spam_radio4" />色情信息</label>            <label for="_spam_radio5" style="width:120px; float:left;"><input type="radio" name="spSubReason" value="5" id="_spam_radio5" />反动言论</label>            <label for="_spam_radio6" style="width:120px; float:left;"><input type="radio" name="spSubReason" value="6" id="_spam_radio6" />其他</label>            <div style="clear:both;"></div>            </div>            <div align="center">            <input type="submit" value=" 确定 " />  <input type="button" name="" onclick="g_pop.close();" value=" 取消 "  />            </div>        </form>        <iframe style="display:none;" name="_antiSpamSubIfr"></iframe></div>';return userSpam.ShowTextDialog(a)};userSpam.ShowTipOK=function(){var b='<div style="padding:10px;">    <b>百度空间代表网民感谢您正义举报，我们会调查取证后，尽快处理您的举报。 <br>空间与您共同努力为用户提供绿色、健康的互联网交流环境。</b>    <div style="border-top:1px solid #ccc; margin-top:5px; height:5px; line-height:0; font-size:0;"> </div>    <div style="padding:20px; text-align:center;"><img src="http://img.baidu.com/hi/img/antiuserok.gif" border="0" align="absmiddle" /> 举报完成，感谢您的提交</div>';var a=userSpam.ShowTextDialog(b,"",500,150);setTimeout(function(){a.close()},1000)};userSpam.submit=function(e,f,a,h,d,c){var b;b=g_pop=userSpam.ShowTipOff();var g=G("_antiSpamSubForm");G("_spSubContentShow").innerHTML=e;g.spSubContent.value=e;g.spSubType.value=f;g.spSpamUser.value=a;g.spMsgID.value=h;g.spBlogID.value=d;g.spPhotoID.value=c};userSpam.tipBlogCmt=function(g,j,a,e){var d=g.parentNode.parentNode.parentNode.parentNode.parentNode;var f=document.createElement("div");f.appendChild(d.cloneNode(true));var b=f.getElementsByTagName("span");for(var h=0,c=b.length;h<c;h++){if(b[h].className=="date"){b[h].parentNode.removeChild(b[h]);break}}userSpam.submit(f.innerHTML.replace('width="10%"','width="65"'),1,j,a,e)};userSpam.tipBoardCmt=function(f,e,d){var g=f.parentNode.parentNode.parentNode.parentNode.parentNode;var b=document.createElement("div");b.appendChild(g.cloneNode(true));var a=b.getElementsByTagName("span");for(var c=0,h=a.length;c<h;c++){if(a[c].className=="date"){a[c].parentNode.removeChild(a[c]);break}}userSpam.submit(b.innerHTML.replace('width="10%"','width="65"'),0,e,d)};userSpam.tipNoteCmt=function(j){var c=j.parentNode.parentNode.getElementsByTagName("div");var m,s,e,p,q,l="",b="",f="";for(var h=0,d=c.length;h<d;h++){if(c[h].getAttribute("name")=="cmtcontent"){m=c[h]}else{if(c[h].className=="userhead"){s=c[h]}else{if(c[h].className=="content"){e=c[h]}else{if(c[h].className=="remsg"){q=c[h]}}}}}if(e.innerHTML.indexOf("在文章")>-1&&e.innerHTML.indexOf("blog/item")>-1){p=1}else{if(e.innerHTML.indexOf("留言")>-1&&e.innerHTML.indexOf("/board")>-1){p=0}}var o=e.getElementsByTagName("a");if(s.innerHTML.indexOf("/sys/portraitn/item")>-1){l=o[0].innerHTML}var r=q.getElementsByTagName("a")[0];if(p==1){var k=r.href.match(/\/blog\/item\/(\w+)\.html\/cmtid\/(\w+)#/);f=k[1];b=k[2]}else{if(p==0){var k=r.href.match(/\/board\/boardid\/(\w+)#/);b=k[1]}}var g=document.createElement("div");g.appendChild(m.cloneNode(true));var a=g.getElementsByTagName("div");for(var h=0,d=a.length;h<d;h++){if(a[h].className=="remsg"){a[h].parentNode.removeChild(a[h]);break}}userSpam.submit(g.innerHTML.replace('class="userhead"','style="float:left; width:70px;"').replace('class="content"','style="float:left; width:330px;"'),p,l,b,f)};userSpam.checkReason=function(){var c=G("_antiSpamSubForm");var a=c.spSubReason;for(var b=0,d=a.length;b<d;b++){if(a[b].checked){return true}}alert("请选择举报原因！");return false};var userSpam2={g_pop:{},showTpl:function(){var a=['<div style="padding:10px;text-align:left"><form onsubmit="userSpam2.beforeSubmit()" name="_antiSpamSubForm" id="_antiSpamSubForm" action="http://act.hi.baidu.com/userspam/submit" method="post" target="_antiSpamSubIfr">',"<b>百度空间代表网民感谢您正义举报，我们会尽快处理您的举报。 <br>空间与您共同努力为用户提供绿色、健康的互联网交流环境。</b>",'<div style="border-top:1px solid #ccc; margin-top:5px; height:5px; line-height:0; font-size:0;"> </div>','<input type="hidden" name="spSpamUser" value=""  />','<input type="hidden" name="spBlogID" value=""  />','<input type="hidden" name="spPhotoID" value=""  />','<input type="hidden" name="spMsgID" value=""  />','<input type="hidden" name="spSubType" value="" />','<textarea style="display:none;" name="spSubContent"></textarea>请核实： <br>',"您正在举报的内容如下：",'<div style="margin:10px 20px;padding:10px; border:1px solid #ccc; height:80px; overflow-y:auto;" id="_spSubContentShow"></div>',"请明确举报理由：（必选）",'<div style="margin:10px 20px;padding:10px; border:1px solid #ccc;">','<label for="_spam_radio1" style="width:120px; float:left;"><input type="radio" name="spSubReason" value="1" id="_spam_radio1" />广告</label>','<label for="_spam_radio2" style="width:120px; float:left;"><input type="radio" name="spSubReason" value="2" id="_spam_radio2" />骚扰、谩骂</label>','<label for="_spam_radio3" style="width:120px; float:left;"><input type="radio" name="spSubReason" value="3" id="_spam_radio3" />中奖等欺诈信息</label><br>','<label for="_spam_radio4" style="width:120px; float:left;"><input type="radio" name="spSubReason" value="4" id="_spam_radio4" />色情信息</label>','<label for="_spam_radio5" style="width:120px; float:left;"><input type="radio" name="spSubReason" value="5" id="_spam_radio5" />反动言论</label>','<label for="_spam_radio6" style="width:120px; float:left;"><input type="radio" name="spSubReason" value="6" id="_spam_radio6" />其他</label>','<div style="clear:both;"></div>',"</div>",'<div align="center">','<input type="submit" value=" 确定 " />  <input type="button" name="" onclick="userSpam2.g_pop.close();" value=" 取消 "  />',"</div>","</form>",'<iframe style="display:none;" name="_antiSpamSubIfr"></iframe></div>'].join("");return userSpam2.ShowTextDialog(a)},beforeSubmit:function(){if(userSpam2.checkReason()){setTimeout(function(){userSpam2.ShowTipOK()},500)}else{return false}},ShowTextDialog:function(c,b,a,d){var e=Space.Libs.bdDialog.createCustomsDialog({content:c,title:b||"举报",height:a||330,width:d||550},"");e.show();e.setMiddle();return e},submit:function(d,e,a,g,c,b){this.g_pop=userSpam2.showTpl();var f=G("_antiSpamSubForm");G("_spSubContentShow").innerHTML=d;f.spSubContent.value=d;f.spSubType.value=e;f.spSpamUser.value=a;f.spMsgID.value=g;f.spBlogID.value=c;f.spPhotoID.value=b},tipBlogCmt:function(g,f,e,d){var h=g.parentNode.parentNode.parentNode;var b=document.createElement("div");b.appendChild(h.cloneNode(true));var a=b.getElementsByTagName("span");for(var c=0;c<a.length;c++){a[c].parentNode.removeChild(a[c])}userSpam2.submit(b.innerHTML,1,f,e,d)},checkReason:function(){var c=G("_antiSpamSubForm");var a=c.spSubReason;for(var b=0,d=a.length;b<d;b++){if(a[b].checked){return true}}alert("请选择举报原因！");return false},ShowTipOK:function(){var b='<div style="padding:10px;">    <b>百度空间代表网民感谢您正义举报，我们会调查取证后，尽快处理您的举报。 <br>空间与您共同努力为用户提供绿色、健康的互联网交流环境。</b>    <div style="border-top:1px solid #ccc; margin-top:5px; height:5px; line-height:0; font-size:0;"> </div>    <div style="padding:20px; text-align:center;"><img src="http://img.baidu.com/hi/img/antiuserok.gif" border="0" align="absmiddle" /> 举报完成，感谢您的提交</div>';var a=userSpam2.ShowTextDialog(b,"",150,500);setTimeout(function(){a.close();userSpam2.g_pop.close()},1000)}};BdEvent.addDOMLoadEvent(function(){function d(q){var u={},r=q.split("&");for(var o=0,v=r.length;o<v;o++){var m=r[o].split("=");u[m[0]]=m[1]}return u}function b(o){var m="";for(var n in o){m+="&"+n+"="+encodeURIComponent(o[n])}return m}if(window.Node){Node.prototype.replaceNode=function(m){this.parentNode.replaceChild(m,this)}}var k=true,f=document.getElementsByName("FCK_MP3_MUSIC");var a="http://box.baidu.com/widget/flash/bdspacesong.swf";for(var h=0,c=f.length;h<c;h++){var j=f[h];if(j.getAttribute("rel")){var e=document.createElement("SPAN");var g=d(decodeURIComponent(j.getAttribute("rel")).replace(/[\s><()'"]+/g,""));j.replaceNode(e);if(g.autoPlay=="true"&&k){k=false;g.autoPlay=true}else{g.autoPlay=false}var l=location.href;if((l.lastIndexOf("/blog")+5)==l.length||(l.lastIndexOf("/blog/")+6)==l.length){g.autoPlay=false}baidu.swf.create({id:"mp3player"+Math.random(),width:"400",height:"95",ver:"9.0.0.0",url:a+"?"+b(g),wmode:"opaque",allowScriptAccess:"always","allowNetworking ":"all"},e);h--;c--}}});function createActiveXObject(c){var a;var b=null;try{if(window.ActiveXObject){b=new ActiveXObject(c)}else{if(window.GeckoActiveXObject){b=new GeckoActiveXObject(c)}}}catch(a){}return b}function detectWMP(){var c={installed:false,type:null};var d="MediaPlayer.MediaPlayer.1";var a="WMPlayer.OCX.7";if((window.ActiveXObject&&navigator.userAgent.indexOf("Windows")!=-1)){c.type="IE";var b=createActiveXObject(a);if(b){c.installed=true;return c}else{b=createActiveXObject(d);if(b){c.installed=true;return c}else{c.versionInfo="none";return c}}}else{if(navigator.mimeTypes){c.type="NS";var b=navigator.mimeTypes["application/x-mplayer2"].enabledPlugin;if(b){c.installed=true;return c}return c}}}function creatbgmusic(e,h,b,a,l,c,k){var j="<OBJECT id=phx width=100% classid=clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6 "+(b?"height=45":"")+'><PARAM NAME="URL" VALUE="'+e+"?t="+Math.random()+'"> <PARAM NAME="rate" VALUE="1"> <PARAM NAME="balance" VALUE="0"> <PARAM NAME="currentPosition" VALUE="0"> <PARAM NAME="defaultFrame" VALUE=""> <PARAM NAME="PlayCount" VALUE="'+(a?100:0)+'"> <PARAM NAME="DisplayMode" VALUE="0"> <PARAM NAME="PreviewMode" VALUE="0"> <PARAM NAME="DisplayForeColor" VALUE="16777215"> <PARAM NAME="ShowCaptioning" VALUE="0"> <PARAM NAME="ShowControls" VALUE="1"> <PARAM NAME="ShowAudioControls" VALUE="1"> <PARAM NAME="ShowDisplay" VALUE="0"> <PARAM NAME="ShowGotoBar" VALUE="0"> <PARAM NAME="ShowStatusBar" VALUE="0"> <PARAM NAME="ShowTracker" VALUE="1"> <PARAM NAME="autoStart" VALUE="'+(l?1:0)+'"> <PARAM NAME="AutoRewind" VALUE="'+(l?1:0)+'"> <PARAM NAME="currentMarker" VALUE="0"> <PARAM NAME="invokeURLs" VALUE="0"> <PARAM NAME="baseURL" VALUE=""> <PARAM NAME="volume" VALUE="100"> <PARAM NAME="mute" VALUE="0"> <PARAM NAME="stretchToFit" VALUE="0"> <PARAM NAME="windowlessVideo" VALUE="1"> <PARAM NAME="enabled" VALUE="1"> <PARAM NAME="EnableFullScreenControls" VALUE="0"> <PARAM NAME="EnableTracker" VALUE="1"> <PARAM NAME="EnablePositionControls" VALUE="1"> <PARAM NAME="enableContextMenu" VALUE="0"> <PARAM NAME="SelectionStart"  VALUE="0"> <PARAM NAME="SelectionEnd" VALUE="0"> <PARAM NAME="fullScreen" VALUE="0"> <PARAM NAME="SAMIStyle" VALUE=""> <PARAM NAME="SAMILang" VALUE=""> <PARAM NAME="SAMIFilename" VALUE=""> <PARAM NAME="captioningID" VALUE=""> <PARAM NAME="Visualizations" VALUE="1">';if(h<=1){j+=' <PARAM NAME="uiMode" VALUE="mini">'}j+="</OBJECT>";var g='<EMBED src="'+e+"?t="+Math.random()+'" width="100%" '+(b?"height=45":"")+' type="application/x-mplayer2" invokeurls="0" autogotourl="false" autostart='+(l?1:0)+" loop="+(a?1:0)+' quality="high"';if(h<=1){g+='showcontrols="1" showpositioncontrols="0" '}g+="> </EMBED>";var f='<div id="m_bgmusic" class="modbox">对不起，您尚未安装windows media player，无法欣赏该空间的背景音乐，请先<a href="http://www.baidu.com/s?wd=windows+media+player+%CF%C2%D4%D8&cl=3" target="_blank">下载并安装</a><br><br></div>';var d=detectWMP();if(k=="FckMusicHelper"){if(d.installed){if(d.type=="IE"){return j}else{if(d.type=="NS"){return g}}}else{return f}}else{if(d.installed){if(d.type=="IE"){document.write(j)}else{if(d.type=="NS"){document.write(g)}}}else{document.write(f)}return""}}var ShareBlog=(function(){var b=false,f=false,e=-1,g=-1,j=false,c="";var n=(function(){var p=0,o;return function(r,w){if(o){baidu.dom.empty(o)}else{o=document.createElement("div");o.style.display="none";document.body.appendChild(o)}p++;var q="ifr_frd_"+p,x="form_frd_"+p,u='<iframe id="'+q+'" name="'+q+'" src="" style="display:none;"></iframe>						<form id="'+x+'" name="'+x+'" method="post" action="'+r+'" target="'+q+'"></form>';var t=document.createDocumentFragment();for(var s in w){var v=document.createElement("input");v.type="hidden";v.name=s;v.value=w[s];t.appendChild(v)}o.innerHTML=u;baidu.g(x).appendChild(t);baidu.g(x).submit()}})();function d(o){n("http://apps.hi.baidu.com/share/cm",{_method:"create_share",auth:"0",bdstoken:o,comment_content:"",dtype:"json",ie:"utf-8",shid:"",title:"",url:location.href.replace(/\?.*/i,""),vote_opt:"分享是美德~",shareFrom:"0",isHtml:"1",callback:"ShareBlog.callback"})}function m(o){e=o.errno}function k(p){var o='<div style="margin:20px 0 0 20px;font-size:14px">'+p+"</div>";if(ShareBlog.ifrid.length>0){baidu.g(ShareBlog.ifrid).parentNode.innerHTML=o}else{baidu.g("dialogBody").innerHTML=o}setTimeout("window.location.reload()",600)}function h(o){if(typeof o!="undefined"){g=o}if(g!=-1){try{if(e==0){k("评论成功！同时已将此文章分享给你的朋友。")}else{if(e==-1){if(j){k("评论添加成功!")}else{j=true;setTimeout(h,1000)}}else{k("评论添加成功!")}}}catch(p){}}else{setTimeout(h,600)}}function a(){b=true;baidu.g("share_blog").style.display="none"}function l(){b=false;baidu.g("share_blog").style.display=""}return{isHostReply:b,hostReply:a,cancelReply:l,submit:d,callback:m,showCmtShareResult:h,ifrid:c}})();function checkMail(a){var b=/\w+@\w+\.[a-z]+/;if(b.test(a)){return true}else{return false}}function checkeandu(b){var c=baidu.G(b).value;var a=baidu.string.getByteLength(c);if(a>128){showErr(2,"您输入的网址或邮箱太长，请保持在128字节以内。");return false}else{return true}}function checkname(b){var c=baidu.G(b);var a=baidu.string.getByteLength(c.value);if(a>49){showErr(1,"您输入的姓名太长，请保持在49字节以内。");return false}else{if(a==0){baidu.G(b).value="匿名网友"}return true}}function checktext(d){var b="";var c=false;if(editor&&d=="spBlogCmtText"){b=editor.getHtml();baidu.G("spBlogCmtText").value=b;c=!(b==editor.getHtml())}var e=baidu.string.trim(baidu.G(d).value);baidu.G(d).value=e;len=e.length;if(len==0||((/^[\s,　]+$/gi).test(e))){showErr(3,"您必须输入评论内容，请检查。");return false}else{var a=c?916:1000;if(len>a){showErr(3,"您输入的评论内容太长，请保持在500字以内。");return false}if(editor&&d=="spBlogCmtText"){baidu.G("spBlogCmtText").value=editor.getHtml();baidu.G(d).value=e}return true}}function showErr(a,b){baidu.G(a+"_err").style.display="";baidu.G(a+"_err_con").innerHTML=b}function hidErr(a){baidu.G(a+"_err").style.display="none";baidu.G(a+"_err_con").innerHTML=""}function alertPop(c,a){var b=new Popup({contentType:4,isReloadOnClose:false,width:340,height:80});b.setContent("title",c);b.setContent("alertCon",a);b.build();b.show()}var cmt_total_count=0;function cmtfull(){var a=cmt_total_count;if(a>=50000){alertPop("发表评论","单篇日志评论数最多为50000条.");return false}else{return true}}function showCmtSuccess(){ShareBlog.showCmtShareResult(0)}function checkcmtform(){if(checkname("spBlogCmtor")&&checkeandu("spBlogCmtURL")&&checktext("spBlogCmtText")&&cmtfull()){if(baidu.g("shareBlog").checked&&!ShareBlog.isHostReply){baidu.g("shareBlogEchoback").value="shareblog";ShareBlog.submit(Session.spToken)}else{baidu.g("shareBlogEchoback").value=""}location.hash="lastcmt";submitForm();return true}else{return false}}var g_pop=null;function submitForm(){g_pop=new Popup({contentType:1,isReloadOnClose:false,width:340,height:80});g_pop.setContent("title","添加评论");g_pop.setContent("contentUrl","");g_pop.setContent("someDisabledBtn","btn_ok");g_pop.build();G("popFormSubmit").target=g_pop.iframeIdName;g_pop.show()}function g_close_pop(){g_pop.close()}function formatonlinpic(){var a=document.getElementsByName("onlinepic");var c=a.length;for(var b=0;b<c;b++){if(a[b].width>200){a[b].width=200}if(a[b].height>200){a[b].height=200}}try{baidu.G("btn_ok").disabled=""}catch(d){}}function addToFavor(){var a=g_blogTitle.replace(/&#39;/g,"'");window.open("http://cang.baidu.com/do/add?it="+encodeURIComponent(a+"_百度空间")+"&iu="+encodeURIComponent(location.href)+"&fr=sp#nw=1","_s","scrollbars=no,width=600,height=450,right=75,top=20,status=no,resizable=yes");return false}function addToiTieba(){var a=g_blogTitle.replace(/&#39;/g,"'");window.open("http://tieba.baidu.com/i/sys/share?link="+encodeURIComponent("http://hi.baidu.com"+Session.spaceURL+"/blog/item/"+g_blogId+".html")+"&type=text&title="+encodeURIComponent(a)+"&content=")}function addToShare(){window.open("http://apps.hi.baidu.com/share/?url="+encodeURIComponent("http://hi.baidu.com"+Session.spaceURL+"/blog/item/"+g_blogId+".html"))}var g_cmtorInfo=[];function goCmtReply(a){if(Session.isHost){ShareBlog.hostReply()}cmtreply(g_cmtorInfo[a],a)}function cmtreply(c,b){c=c.replace(/<|>/g,"");window.location.hash="#send";var f=document.form1;f.cm.value="3";if(!f.spReferTarget){var k=document.createElement("input");k.type="hidden";k.name="spReferTarget";k.value=b;f.appendChild(k)}else{f.spReferTarget.value=b}G("cancleReLink").style.display="";f.btn_ok.value="回复评论";try{editor.window.focus();editor.window.document.body.innerHTML="回复"+c+"：";var l=editor.window;if(l.getSelection){var h=l.document;var m=l.getSelection();var a=h.createRange();a.setStartAfter(h.body.firstChild);a.setEndAfter(h.body.lastChild);m.removeAllRanges();m.addRange(a)}}catch(g){try{f.getElementsByTagName("textarea")[0].focus();f.getElementsByTagName("textarea")[0].value="回复"+c+"："}catch(j){}}}function canclereply(){ShareBlog.cancelReply();var c=document.form1;c.cm.value="1";try{c.removeChild(c.spReferTarget)}catch(d){}try{var b=editor.window.document.body;b.innerHTML="";editor.window.focus()}catch(d){var a=c.getElementsByTagName("textarea")[0];a.value="";a.focus()}G("cancleReLink").style.display="none";c.btn_ok.value="发表评论"}function gotoreply(){if(window.location.hash.indexOf("&re=1")<0){return}var a=window.location.hash.split("&")[0].replace("#","");var d=document.getElementsByTagName("a");for(var c=0,e=d.length;c<e;c++){if(d[c].name==a){var b=d[c].getAttribute("rename");repid=d[c].getAttribute("repid");break}}if(typeof(b)!="undefined"){cmtreply(b,repid)}}function f_focus(){getVcode()}function getVcode(){var a="http://hi.baidu.com/sys/file/getvcode?echoback=getVcodeDone&t="+(new Date().getTime());BdAjax.loadJS(a)}function getVcodeDone(b){document.form1.spVcode.value=b;var a="http://hiup.baidu.com/cgi-bin/genimg?"+b;G("verifypic").src=a;G("yanzheng").style.display="block"}function newverifypic(){getVcode();return false}function blogdel(b){var a=new Popup({contentType:3,isReloadOnClose:false,width:340,height:80});a.setContent("title","删除文章");a.setContent("confirmCon","您确定要彻底删除这篇文章及其所有评论吗？");a.setContent("callBack",delCallback);a.setContent("parameter",{fid:b,popup:a});a.build();a.show();return false}function delCallback(para){if(!para.popup){return}var o_pop=para.popup;o_pop.config.contentType=1;o_pop.setContent("contentUrl","");o_pop.reBuild();G(para.fid).target=o_pop.iframeIdName;eval("document.draft"+para.fid).submit();eval("document."+para.fid).submit()}var _Space=_Space||{};_Space.commentOperate=(function(){var k=0,g=50,a=0,f=1,e=new Space.Pubs.Comment(Session.spSpaceDomain+"/cmt/spcmt/");var b=(function(){var n="#p#";var o=10;function m(v,w,p){var u=10;v=Number(v);w=Number(w)+1;if(v<=1){return" &nbsp;"}var r=[];var t=Math.max(1,w-Math.floor(o/2));var q=Math.min(v,t+o-1);t=Math.max(1,q-o+1);if(w>1){r.push("<a",p.replace("#p#",0),">[首页]</a> ");r.push("<a",p.replace("#p#",(w-1-1)),">[上一页]</a> ")}for(var s=t;s<=q;s++){if(s==w){r.push("<span>",s,"</span> ")}else{r.push("<a",p.replace("#p#",s-1),">[",s,"]</a> ")}}if(w<v){r.push("<a",p.replace("#p#",w),">[下一页]</a> ");r.push("<a",p.replace("#p#",(v-1)),">[尾页]</a> ")}return r.join("")}return{render:m}})();var l=function(p){var o=p;if(o.err_no==0){cmt_total_count=o.body.total_count;if(o.body.data&&o.body.total_count){var n=Math.ceil(o.body.total_count/g);k=n-1;if("#lastcmt"==location.hash){location.hash=""+k;h(k);return}var m=[];baidu.each(o.body.data,function(r){m.push(c(r))});f=1;baidu.G("userCommentList").innerHTML=m.join("");baidu.G("blogCmtCount").innerHTML=o.body.total_count;baidu.G("page").innerHTML=b.render(n,a,' href="#"  onclick="_Space.commentOperate.view(#p#);return false;"');d("userCommentList");SP.mycard.bind("m_blog");if(location.hash=="#comment"){var q=baidu.g("in_comment");if(q){q.scrollIntoView()}}}}};var c=function(E){var r=function(M,F,H,I,K,O,L,N){var J=[];if(N){J.push('  <a href="http://hi.baidu.com/hi/cms/article/help_phone/index.html" target="_blank" style="text-decoration:none;">来自手机<img src="http://img.baidu.com/hi/img/mobile.gif" align="absmiddle" border="0"/></a>')}if(L&&w){if(O){J.push(' | <a href="#" onclick="BdUtil.relogin();return false;">回复</a>')}else{J.push(' | <a href="#" onclick="goCmtReply(\''+H+"');return false;\">回复</a>")}}if(K){J.push(' | <a href="#" onclick="_Space.commentOperate.deleteCmt(\''+F+"');return false;\">删除</a>");var P=M==1?I:"";J.push(' | <a href="#" onclick="userSpam.tipBlogCmt(this,\''+P+"','"+F+"','"+z+"'); return false;\">举报</a>")}return J.join("")};var p=function(J,K,H,F,I){if("1"==J){return("<a  href='{1}' target='_blank' class='ucard' pid='{2}'><img border='0' src='"+Session.spPortraitDomain+"/sys/portraitn/item/{2}.jpg'><br />{3}</a>").format(K,F,I,H)}else{if(H==""||H=="匿名网友"){if(F==""){return"<a>匿名网友</a>"}else{return("<a href='{1}' target='_blank' class='ucard' pid='{0}'>{2}</a>").format(I,F,H)}}else{if(F==""){return("<div class='f14' style='display:inline'>网友:<a>{0}</a></div>").format(H)}else{return("<div class='f14' style='display:inline'>网友:<a href='{1}' target='_blank' title='{1}'>{2}</a></div>").format(K,F,H)}}}};var o=0,t=E.reserved1,u=Session.isHost,y=Session.visitorPortrait=="00000000"?true:false,m=E.portrait,D=m==Session.visitorPortrait?false:true,v=E.reply_id_enc,n=E.un,B=n?"http://hi.baidu.com/sys/checkuser/"+n+"/1":"",w=g_isAllowCmt,z=g_blogId;if(n&&B&&m){o=1}g_cmtorInfo[m]=n;var s=[],C=g,q=f+a*C;s.push('<a name="'+v+'" rename="'+n+'" repid="'+m+'"></a>');s.push('<table width="100%" border="0" cellspacing="0" cellpadding="0" class="item" style="table-layout:fixed;word-wrap:break-word;overflow:hidden;"><tr>');s.push('<td valign="top" class="index" width="5%">'+q+"</td>");s.push('<td align="center" valign="top" width="10%"><div class="user" style="overflow:hidden;">');s.push(p(o,v,n,B,m));s.push('</div></td><td class="cnt" style="padding-left:20px;">');s.push('<span class="date">');var x="yyyy-MM-dd HH:mm";var A=new Date();A.setTime(parseInt(E.cdatetime)*1000);s.push(baidu.date.format(A,x));s.push(r(o,v,m,n,u,y,D,t));s.push("</span>");s.push('<div class="desc" style="overflow:hidden;word-break:normal;"  name="cmtcontent">');s.push(E.content);s.push("</div></td></tr></table>");s.push('<div class="line">&nbsp;</div>');f++;return s.join("")};var h=function(m){var o=g_blogId;m=m||0;var n={thread_id_enc:o,callback:"_Space.commentOperate.viewCallBack",start:m*g,count:g,orderby_type:0};a=m;e.view(n)};function j(n){var m=new Popup({contentType:3,isReloadOnClose:false,width:340,height:80});m.setContent("title","删除评论");m.setContent("confirmCon","您确定要彻底删除这条评论吗？");m.setContent("callBack",function(){var p=m;var o=baidu.G("blogCmtSubmitForm");o.spBlogCmtID.value=n;o.spRefURL.value=window.location.href;p.config.contentType=1;p.setContent("contentUrl","");p.reBuild();o.target=p.iframeIdName;o.submit()});m.build();m.show();return false}function d(m){if(!baidu.browser.ie){var u='<span style="filter:glow(color=#000000,strength=2);height:0px;color:#000000">';var t='<span style="height: 0px; color: rgb(0, 0, 0);">';var r=document.getElementById(m);var v=r.getElementsByTagName("div");var s,o;for(var p=0,q=v.length;p<q;p++){s=v[p];if(s.getAttribute("name")=="cmtcontent"){o=s.innerHTML;o=o.replace(/<span style="filter:glow\(color=#([0-9a-z]{3,6}),strength=2\);height:0px;color:#([0-9a-z]{3,6})">/ig,u);o=o.replace('<span style="height: 0px; color: rgb(255, 255, 255);">',t);s.innerHTML=o}}}}return{view:h,viewCallBack:l,deleteCmt:j}})();_Space.BlogSharedUser=(function(){function b(h){var g=h.count||0,e=0,d=[],c=h.list.length,f;if(g&&c){d[d.length]='<div class="tit" style="margin-bottom:12px;">已有'+g+"人分享了这篇文章：</div>";d[d.length]='<table width="100%"><tbody><tr>';for(;e<c;e++){f=h.list[e];d[d.length]='<td width="10%" valign="bottom" align="center" class="user"><a class="ucard" target="_blank" pid="'+f.portrait+'" href="http://hi.baidu.com/sys/checkuser/'+f.uname+'/3"><img border="0" src="'+Session.spPortraitDomain+"/sys/portraitn/item/"+f.portrait+'.jpg" style="display:block"><div style="width:75px;overflow:hidden;height:18px;">'+f.uname+'</div><a href="http://apps.hi.baidu.com/share/user/'+f.portrait+'" target="_blank">Ta的分享</a></a></td>'}d[d.length]='<td width="100%"></td></tr></tbody></table>';G("share_user_list")&&(G("share_user_list").innerHTML=d.join(""));SP.mycard.bind("share_user_list")}}function a(){var c="http://apps.hi.baidu.com/share/getsourceshare?url=http://hi.baidu.com"+encodeURIComponent(Session.spaceURL)+"/blog/item/"+g_blogId+".html&callback=_Space.BlogSharedUser.showList&asyn=1&r="+Math.random();BdAjax.loadJS(c)}return{getData:a,showList:b}})();_Space.latestReader=(function(){var c=g_latestReader;c.length=c.length-1;var a="";var d="";function b(){a+='<table width="100%" ><tr>';d+="<tr>";if(!Session.isLogin){a+='<td align="center" width="10%" ><img border="0" width="55" height="55" src="'+Session.spImgDomain+'/hi/img/portraitn.jpg"></td>';d+="<td>&nbsp;</td>";if(c.length>0){a+='<td align="left" width="12%">'}else{a+='<td align="left" width="100%">'}a+='<a href="'+Session.spPortraitDomain+"/?login&tpl=sp&tpl_reg=sp&u="+myref+'" target="_self" onclick="BdUtil.relogin(); return false;">登录</a>后，您就出现在这里。</td>';d+="<td>&nbsp;</td>"}if(c.length==0){if(Session.isLogin){a+='<td align=left width="100%">最近还没有登录用户看过这篇文章……</td>';d+="<td>&nbsp;</td>"}}else{for(i=0,len=c.length;i<len;i++){a+='<td align="center" valign="bottom" width="10%" class="user"><a href="'+c[i][0]+'" target="_blank" class="ucard" pid="'+c[i][1]+'"><img border="0" src="'+Session.spPortraitDomain+"/sys/portraitn/item/"+c[i][1]+'.jpg"></a></td>';d+='<td align="center" valign="top" class="user"><a href="'+c[i][0]+'" target="_blank" class="ucard" pid="'+c[i][1]+'">'+c[i][2]+"</a></td>"}}a+='<td width="100%"></td></tr>';d+="<td></td></tr></table>";baidu.dom.insertHTML("in_reader","beforeEnd",a+d)}return{show:b}})();_Space.pageDone=(function(){function b(){if(window.Node){Node.prototype.replaceNode=function(n){this.parentNode.replaceChild(n,this)}}var l=document.getElementsByName("musicName");var h=true;for(var m=0,f=l.length;m<f;m++){var p=l[m];if(p.getAttribute("rel")){var j=p.getAttribute("rel");var k=document.createElement("SPAN");var o=j.substr(j.indexOf("#")+1,1);var g=(o=="1");if(h&&g){h=false;g=true}else{g=false}var q=creatbgmusic(j.substr(0,j.indexOf("#")).replace(/[\s><()'"]+/g,""),1,true,false,g,g,"FckMusicHelper");q=q.replace("width=100%","width=200").replace('width="100%"',"width=200 height=45");p.replaceNode(k);k.innerHTML=q;m--;f--}}!function(){var s=document.getElementsByName("FCK_VOTE");for(var t=0,r=s.length,u,n=0,v;t<r;t++){u=s[0];n=u.getAttribute("rel")|0;if(n){v=document.createElement("span");u.parentNode.replaceChild(v,u);baidu.swf.create({id:"VOTE_FLASH_"+t,width:"585",height:"100",ver:"9.0.0",wmode:document.all?"opaque":"window",allowscriptaccess:"always",url:"http://hi.bdimg.com/apps/appvote/spaceVote.swf?vote_id="+n},v)}}}()}function c(){if(document.getElementById("m_blog")){var f=document.getElementById("m_blog").getElementsByTagName("img");var h=document.getElementById("m_blog").offsetWidth;h=h-40;var j=[];for(var g=0;g<f.length;g++){if(f[g].className=="blogimg"&&f[g].width>=h){j[g]=new Image();(function(k,m,l){m[l].onload=function(){var n=h/m[l].width*m[l].height;k[l].height=n;k[l].style.height=n+"px"}})(f,j,g);j[g].src=f[g].src;f[g].width=h;f[g].style.width=h+"px"}}}}function e(){var f=document.getElementById("blog_text");var g=f.innerHTML.replace(/href\s*=\s*("|')?(\.\.\/\.\.\/)/gi,"href=$1../$2");g=g.replace(/http:\/\/hi\.baidu\.com\/static\/album\/album\.swf/g,"http://hi.bdimg.com/static/album/album.swf");g=g.replace(/`/g,"&#96;");f.innerHTML=g}function d(){var g=null;try{g=new BdEditor("spBlogCmtText",{width:"100%",height:"155px"},Session.spStaticDomain);g.onfocus=function(){hidErr(3)};g.render();if(Session.loginStatus==0){var h=g.window;baidu.Q("ToolbarContainer",baidu.G("in_send"))[0].style.display="none";baidu.on(h,"focus",function(){BdUtil.relogin();return false})}}catch(k){var f=document.getElementById("spBlogCmtText");if(!f){return false}var j=f.previousSibling;while(j&&j.nodeType!=1){j=j.previousSibling}if(j&&/bdeditor_container/.test(j.id)){j.parentNode.removeChild(j)}f.style.display="";g=null}window.editor=g}function a(){c();e();b();d();gotoreply()}return{ok:a}})();function relative_Click(){BdUtil.ns_trackerLink("m_20110329_relative_article","")}_Space.SectionLoad=(function(){var d=false;var h=[];function b(j){j.isComplete=true}function g(k,j){var k=baidu.G(k);h.push({mod:k,callback:j})}function e(j){j.callback();b(j)}function a(){if(h.length<=0){return}var j=f();baidu.each(h,function(l,k){if(!l.isComplete){if(c(l.mod)-100<=j){e(l)}}})}function c(j){return baidu.dom.getPosition(j).top}function f(){var j=baidu.page.getScrollTop();var k=baidu.page.getViewHeight();return j+k}baidu.on(window,"resize",a);baidu.on(window,"onload",a);baidu.on(window,"scroll",a);return{add:g}})();var _pageEndTime=(new Date().getTime())-g_pageTimerStart;baidu.on(window,"load",function(){var a=(new Date().getTime())-g_pageTimerStart;BdUtil.hi_trackerLink("m_20101109_blogloadtime",a+"|"+_pageEndTime)});_Space.pageDone.ok();baidu.G("share_user_list")&&g_isByShared&&_Space.SectionLoad.add("share_user_list",_Space.BlogSharedUser.getData);baidu.G("in_reader")&&_Space.SectionLoad.add("in_reader",_Space.latestReader.show);baidu.G("blogOpt")&&_Space.SectionLoad.add("blogOpt",_Space.commentOperate.view);