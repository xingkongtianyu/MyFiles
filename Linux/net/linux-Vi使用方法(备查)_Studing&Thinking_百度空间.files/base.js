if(typeof Space=="undefined"){Space={}}Space.pkg=function(c){if(!c||!c.length){return null}var d=c.split(".");var b=Space;for(var a=(d[0]=="Space")?1:0;a<d.length;++a){b[d[a]]=b[d[a]]||{};b=b[d[a]]}return b};if(typeof Space.Libs=="undefined"){Space.Libs={}}Function.prototype.bind=function(a){var b=this;return function(){return b.apply(a,arguments)}};function trace(){}function traceError(){}Space.Libs.getRandomId=function(){var a=[];a.push(parseInt(Math.random()*10000,10).toString());a.push(new Date().getTime().toString());return a.join("")};var _ua=navigator.userAgent.toLowerCase();var $IE=/msie/.test(_ua);var $moz=/gecko/.test(_ua);var $Safari=/safari/.test(_ua);Space.Libs.arrayFind=function(a,c){var b=-1;baidu.each(a,function(f,d){if(c==f){b=d}});return b};Space.Libs.bind3=function(d,c,b){b=b==null?[]:b;var a=d;return function(){return a.apply(c,b)}};(function(b){var a=function(d,c){var f;try{if(typeof c!="undefined"){for(f in d){if(c[f]!=null){d[f]=c[f]}}}}finally{f=null;return d}};b.parseParam=a})(Space.Libs);Space.Libs.winSize=function(){return{width:baidu.page.getWidth(),height:baidu.page.getHeight()}};Space.Libs.viewSize=function(){return{width:baidu.page.getViewWidth(),height:baidu.page.getViewHeight()}};Space.Libs.hi_trackerLink=function(a,b){function c(d){return encodeURIComponent(d)}Space.Libs.imgLog("http://hi.baidu.com/sys/statlog/1.gif?m="+c(a)+"&v="+c(b)+"&_t="+Math.random())};Space.Libs.ns_trackerLink=function(a,c){var b=109,d=2009,f="http://nsclick.baidu.com/v.gif?pid="+b+"&url="+encodeURIComponent(c)+"&type="+d+"&m="+a+"&_t="+Math.random();Space.Libs.imgLog(f)};Space.Libs.imgLog=function(a){var d="imglog__"+(new Date()).getTime(),b=window[d]=new Image();b.onload=(b.onerror=function(){window[d]=null});b.src=a;b=null};if(typeof window.Class=="undefined"){window.Class={}}Class.extend=function(a,d,b){for(var c in d){if(b!=null){if(!a[c]){a[c]=d[c]}}else{a[c]=d[c]}}return a};(function(d){var f=navigator.userAgent.toLowerCase();d.$IE=/msie/.test(f);d.$OPERA=/opera/.test(f);d.$MOZ=/gecko/.test(f);d.$IE5=/msie 5 /.test(f);d.$IE55=/msie 5.5/.test(f);d.$IE7=/msie 7/.test(f);d.$IE8=/msie 8/.test(f);d.$SAFARI=/safari/.test(f);d.$winXP=/windows nt 5.1/.test(f);d.$winVista=/windows nt 6.0/.test(f);d.$FF2=/Firefox\/2/i.test(f);d.$FF=/firefox/i.test(f);d.$CHROME=/chrome/i.test(f);d.$TT=/tencenttraveler/.test(f);d.$360=/360se/.test(f);d.$Maxthon=false;if(/msie (\d+\.\d)/i.test(navigator.userAgent)){var b=document.documentMode||parseFloat(RegExp["\x241"]);d.$IE6=(b==6)}else{d.$IE6=false}try{var a=window.external;d.$Maxthon=a.max_version?true:false}catch(c){}})(window);function $C(b){return document.createElement(b)}Space.Libs.blinkTitle=function(){var j=document.title;var g=0;var b=[];var f=500;var a;function d(n){if(typeof n=="string"){b=[].concat("【"+n+"】","【"+new Array(n.length+1).join("　")+"】")}else{b=[].concat(n)}}function m(n){f=n||500}function c(n,o){d(n);m(o);l();a=setInterval(function(){document.title=b[g]+j;g++;if(g>b.length-1){g=0}},f)}function l(){clearInterval(a);document.title=j}return{blink:c,stop:l,setDelay:m}}();(function(b){var a;if(!$IE){a=function(){if(window.event){return window.event}var d=arguments.callee.caller;var c;var f=0;while(d!=null&&f<40){c=d.arguments[0];if(c&&(c.constructor==Event||c.constructor==MouseEvent)){return c}f++;d=d.caller}return c}}else{a=function(){return window.event}}b.getEvent=a})(Space.Libs);(function(d){var c=function(g){var n=this,p=g,j=[];function f(){return p}function o(r){j[j.length]=r}function q(t){var r;for(var s=j.length-1;s>=0;s--){r=j[s];if(r==t){j.splice(s,1);break}}}function l(v,s){var r=null;for(var u=0,t=j.length;u<t;u++){r=j[u](v,s)}return r}function m(){return(j.length==0)}n.getName=f;n.bind=o;n.unbind=q;n.invoke=l;n.isEmpty=m};var a=function(g){var j=this;_data=g||null;function f(){return _data}j.getData=f};var b=function(f){var n=this;_events={};n.owner=f;function l(o,p){if(!o||!p){return}var q=_events[o];if(!q){q=new c(o);_events[o]=q}q.bind(p)}function j(o,q){if(!o){return}var r=_events[o],p=true;if(q){r.unbind(o,q);if(!r.isEmpty()){p=false}}if(p){_events[o]=null;delete _events[o]}}function g(p,q,s){var r=_events[p];if(r){var o=new a(s);return r.invoke(q,o)}}function m(){_events=null;n.owner=null}n.on=l;n.un=j;n.fire=g;n.dispose=m};d.Events=b})(Space.Libs);(function(f){var a={},c={space_storage:"{}"},b=null,j=false;function l(){if(window.localStorage){try{c=window.localStorage}catch(o){}}else{if(window.globalStorage){try{c=window.globalStorage[window.location.hostname]}catch(o){}}else{b=document.createElement("link");if(b.addBehavior){b.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(b);b.load("space_storage");var n="{}";try{n=b.getAttribute("space_storage")}catch(o){}try{a=baidu.json.parse(n)}catch(o){a={}}c.space_storage=baidu.json.stringify(a)}}}a=baidu.json.parse(c.space_storage||"{}")||{}}function g(){if(!j){l();j=true}}function d(){c.space_storage=baidu.json.stringify(a);if(b){b.setAttribute("space_storage",c.space_storage);b.save("space_storage")}}var m=(function(){function o(s,p){var r={},q=false;if(typeof s=="undefined"){s=""}if(s.constructor!=String){q=true;s=baidu.json.stringify(s)}r.fromDate=new Date();r.value=s;r.isObj=q;if(p){if(p.constructor==Number){r.expires=p}else{if(p.constructor==Date){r.expires=p-r.fromDate}else{throw new Error("'过期时间'参数必须是数字(单位:ms)或日期。ref:Space.Libs.storage.set")}}}else{r.expires=false}return baidu.json.stringify(r)}function n(q){if(typeof q=="undefined"){return}var r=baidu.json.parse(q),s=r.value,p=r.isObj;if(r.expires!==false){if((new Date()-new Date(r.fromDate))>=r.expires){return}}if(p){s=baidu.json.parse(s)}return s}return{build:o,get:n}})();f.Storage={set:function(o,p,n){g();a[o]=m.build(p,n);d();return p},get:function(n){g();var o=m.get(a[n]);if(typeof o=="undefined"){this.deleteKey(n)}return o},deleteKey:function(n){g();if(n in a){delete a[n];d()}return true},clearAll:function(){g();a={};d();return true}}})(Space.Libs);(function(){var b=function(f,d){var c=f;return function(){return c.apply(d,arguments)}};var a="SpaceDebug";window[a]={cacheData:[],base_url:"",product:"baidu_hi",baseColor:{1:{color:"#FFF",bgcolor:"#E00"},2:{color:"#F00"},3:{color:"#FFF000"},4:{color:"#0F0"},5:{color:"#FFF"}},fatal:function(c){this.addData(c,1)},error:function(c){this.addData(c,2)},warning:function(c){this.addData(c,3)},info:function(c){this.addData(c,4)},log:function(c){this.addData(c,5)},dir:function(c){this.addData(c,5)},addData:function(d,c,f,g){if(d==null){return}if(typeof d!="object"){d=d.toString()}var j={type:c||"5",color:f||this.baseColor[c].color,bgcolor:g||this.baseColor[c].bgcolor};this.cacheData.push([d,j]);if(this.initFinished==true){this.showCurrentData([d,j])}}};if(window[a].initFinished){window.trace=b(window[a].log,window[a]);window.traceError=b(window[a].error,window[a])}else{window.trace=function(c){window[a].addData(c,5)};window.traceError=function(c){window[a].addData(c,2)}}})();Space.Libs.Jobs=function(a){this.option=a||{};this._jobTable=[[],[],[],[]]};Space.Libs.Jobs.prototype={_registedJobTable:{},errorMsg:[],_registJob:function(b,a){this._registedJobTable[b]=a},error:function(a){this.errorMsg.push(a)},add:function(b,a){a=a||1;if(Space.Libs.arrayFind(this._jobTable[a],b)==-1){this._jobTable[a].push(b)}else{this.error("Error: Job <b>"+b+"</b> is existed now.")}},start:function(){if(this.option.onStart!=null){this.option.onStart()}var c=this._registedJobTable;var a=this._jobTable[1].concat(this._jobTable[2]);var d=this;this.fe=Space.Libs.bind3(d.focus,d,[]);var b=function(){if(d._jobTable[3].length==0){if(d.option.onEnd!=null){d.option.onEnd()}return}};this.queue(a,b)},focus:function(){var b=this;if(this.focusdown){b.fe=null;return}this.focusdown=true;var a=this._jobTable[3];this.queue(a,this.option.onEnd)},queue:function(a,l){var j=this;var b=function(){return new Date().valueOf()};var c=this._registedJobTable;var g=a.length;var f=0;var d=window.setInterval(function(){if(f>=g){clearInterval(d);d=null;if(l!=null){l()}return}var r=a[f];var p=c[r];f++;if(typeof p=="undefined"){j.error("<b>Job["+r+"] is undefiend!!!</b>");return}var o=true;var n=b();try{p.call()}catch(q){Space.Libs.hi_trackerLink("jobs_error",q.message);j.error("<b>Job["+r+"] failed!!!</b>"+q.message+"");if(l!=null){l()}o=false;throw q}finally{if(o){var m=b()}}},10)},call:function(b,a){if(typeof this._registedJobTable[b]!="undefined"){this._registedJobTable[b].apply(this,a)}else{trace("<b>Job["+b+"] is undefined!!!</b>",{color:"#900",bgColor:"#FFF;"})}}};$registJob=function(b,a){Space.Libs.Jobs.prototype._registJob(b,a)};$callJob=function(b){var a=[];if(arguments.length>1){baidu.each(arguments,function(c,d){a[d]=c});a.shift()}Space.Libs.Jobs.prototype.call(b,a)};(function(a){var b=function(f,d){this.entity=null;this.ifm=null;this.Property={width:0,height:0,x:0,y:0,isFixed:false,uniqueID:"",entityID:"",contentID:"",template:f,templateString:"",container:d,nodes:{}};var g=this;(function c(){var j=g.getProperty();j.uniqueID="_"+Space.Libs.getRandomId();j.entityID=j.uniqueID+"_entity";j.contentID=j.uniqueID+"_content";g.setTemplate(j.template);j.width=parseInt(g.entity.style.width);if($IE6){g.addIframe()}if(j.container){j.container.appendChild(g.entity)}else{document.body.appendChild(g.entity)}g.hidden()})();this._ie6Fixed=function(){g.entity.style.left=document.documentElement.scrollLeft+g.getProperty().x+"px";g.entity.style.top=document.documentElement.scrollTop+g.getProperty().y+"px";if(g.ifm){g.ifm.style.left=document.documentElement.scrollLeft+g.getProperty().x+"px";g.ifm.style.top=document.documentElement.scrollTop+g.getProperty().y+"px"}}};b.prototype={getProperty:function(){return this.Property},setTemplate:function(d){var g=this.getProperty();var f=/[^\{\}]+(?=\})/g;g.template=d;g.templateString=g.template.match(f);if(this.entity){this.entity.parentNode.removeChild(this.entity);this.entity=null}this.entity=$C("div");var c=$C("div");c.innerHTML=baidu.format(g.template,this.getNodes("i"));document.body.appendChild(c);if(!baidu.g(g.entityID)||!baidu.g(g.contentID)){throw new Error("[Error from layer.js] there missing #{entityID} or #{contentID} in layer template")}else{this.entity=baidu.g(g.entityID);this.entity.style.position="absolute";this.entity.style.zIndex="1024";this.entity.style.left=g.x+"px";this.entity.style.top=g.y+"px";document.body.replaceChild(this.entity,c);c=null}g.nodes=this.getNodes()},setSize:function(c){var d=this.getProperty();Space.Libs.parseParam(d,c);if(c.width){d.nodes.entity.style.width=d.width+"px"}if(c.height){d.nodes.entity.style.height=(d.height+30)+"px";d.nodes.content.style.height=d.height+"px"}this.updateIfmSize()},setPosition:function(c){var d=this.getProperty();baidu.object.extend(d,c);this.entity.style.left=d.x+"px";this.entity.style.top=d.y+"px";if($IE6&&d.isFixed){this.entity.style.left=d.x+document.documentElement.scrollLeft+"px";this.entity.style.top=d.y+document.documentElement.scrollTop+"px"}if(this.ifm){this.ifm.style.left=this.entity.style.left;this.ifm.style.top=this.entity.style.top}},getWidth:function(){var c=this.entity.style.display;var d=this.entity.style.visibility;this.entity.style.visibility="hidden";this.entity.style.display="";w=this.entity.offsetWidth;this.entity.style.display=c;this.entity.style.visibility=d;return w},getHeight:function(){var c=this.entity.style.display;var d=this.entity.style.visibility;this.entity.style.visibility="hidden";this.entity.style.display="";h=this.entity.offsetHeight;this.entity.style.display=c;this.entity.style.visibility=d;return h},getX:function(){return parseInt(this.entity.style.left)},getY:function(){return parseInt(this.entity.style.top)},updateIfmSize:function(){if(this.ifm){var c=this;c.ifm.style.width=c.entity.offsetWidth+"px";c.ifm.style.height=c.entity.offsetHeight+"px"}},setFixed:function(d){var c=this.getProperty();c.isFixed=d;var f=this;if($IE){f.entity.style.position="absolute";if(c.isFixed){f._ie6Fixed();baidu.on(window,"scroll",f._ie6Fixed)}else{baidu.un(window,"scroll",f._ie6Fixed)}return}if(c.isFixed&&$FF2){f.updateFixed();return}if($IE){state=false}else{state=c.isFixed}this.entity.style.position=state?"fixed":"absolute"},updateFixed:function(){var f=this.getProperty();if(f.isFixed&&$FF2){var g=this;var d=f.x,c=f.y;g.entity.style.position="absolute";g.setPosition({x:f.x+document.documentElement.scrollLeft,y:f.y+document.documentElement.scrollTop});g.entity.style.position="fixed";g.setPosition({x:d,y:c})}},show:function(){this.entity.style.display="";if(this.ifm){this.ifm.style.display="";this.updateIfmSize()}},hidden:function(){this.entity.style.display="none";if(this.ifm){this.ifm.style.display="none"}},addIframe:function(){this.ifm=$C("iframe");this.ifm.style.position="absolute";this.ifm.style.zIndex="1024";this.ifm.style.left=this.entity.style.left;this.ifm.style.top=this.entity.style.top;document.body.appendChild(this.ifm);baidu.setStyle(this.ifm,"opacity",0)},getNodes:function(n){var l=this.getProperty();var d=n||"o";var g;var f={};var c=l.templateString;if(c){for(g=0;g<c.length;g++){var j=c[g];switch(d){case"o":f[j]=baidu.g(l.uniqueID+"_"+j);break;case"i":f[j]=l.uniqueID+"_"+j;break}}}return f},setContent:function(c){var d=this.getProperty();if(c){d.nodes.content.innerHTML=c}},setZIndex:function(c){this.entity.style.zIndex=c}};a.Layer=b})(Space.Libs);(function(b){var a=function(d,f,j){var g=this;this.beDragObj=d;this.movedObjs=f||this.beDragObj;this.dragMode=j||"normal";this.canDrag=true;this.isLock=false;this.lockArea={left:0,right:0,top:0,bottom:0};this.dragSet={normal:function(){g.normalDrag()},border:function(){g.borderDrag()},opacity:function(){g.opacityDrag()}};this.dragObjsFunc=function(){g.onDrag();g.dragObjs()};(function c(){g.beDragObj.style.MozUserSelect="none";baidu.on(g.beDragObj,"selectstart",function(){return false});baidu.on(g.beDragObj,"drag",function(){return false});for(var l=0;l<g.movedObjs.length;l++){if(g.movedObjs[l]!=g.beDragObj){g.movedObjs[l].style.position="absolute";if(!g.movedObjs[l].style.left){g.movedObjs[l].style.left=g.movedObjs[l].offsetLeft+"px"}if(!g.movedObjs[l].style.top){g.movedObjs[l].style.top=g.movedObjs[l].offsetTop+"px"}}}baidu.on(g.beDragObj,"mousedown",g.dragSet[g.dragMode]);if($IE){baidu.on(g.beDragObj,"mouseup",function(){baidu.un(g.beDragObj,"mousemove",g.dragObjsFunc);g.beDragObj.releaseCapture();g.onDragEnd()})}else{baidu.on(document,"mouseup",function(){baidu.un(document,"mousemove",g.dragObjsFunc);g.onDragEnd()})}})()};a.prototype={capture:function(){this.canDrag=true},release:function(){this.canDrag=false},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},dragObjs:function(){e=Space.Libs.getEvent();for(var c=0;c<this.movedObjs.length;c++){if(this.isLock){if(e.clientX-this.movedObjs[c].deltaX<this.lockArea.left){this.movedObjs[c].style.left=this.lockArea.left+"px"}else{if(e.clientX-this.movedObjs[c].deltaX>this.lockArea.right-this.movedObjs[c].offsetWidth){this.movedObjs[c].style.left=this.lockArea.right-this.movedObjs[c].offsetWidth+"px"}else{this.movedObjs[c].style.left=e.clientX-this.movedObjs[c].deltaX+"px"}}if(e.clientY-this.movedObjs[c].deltaY<this.lockArea.top){this.movedObjs[c].style.top=this.lockArea.top+"px"}else{if(e.clientY-this.movedObjs[c].deltaY>this.lockArea.bottom-this.movedObjs[c].offsetHeight){this.movedObjs[c].style.top=this.lockArea.bottom-this.movedObjs[c].offsetHeight+"px"}else{this.movedObjs[c].style.top=e.clientY-this.movedObjs[c].deltaY+"px"}}}else{this.movedObjs[c].style.left=e.clientX-this.movedObjs[c].deltaX+"px";this.movedObjs[c].style.top=e.clientY-this.movedObjs[c].deltaY+"px"}}},normalDrag:function(){var d=this;e=Space.Libs.getEvent();for(var c=0;c<d.movedObjs.length;c++){d.movedObjs[c].deltaX=e.clientX-parseInt(d.movedObjs[c].style.left);d.movedObjs[c].deltaY=e.clientY-parseInt(d.movedObjs[c].style.top)}if(d.canDrag){if($IE){d.beDragObj.setCapture();baidu.on(d.beDragObj,"mousemove",d.dragObjsFunc)}else{baidu.on(document,"mousemove",d.dragObjsFunc)}}d.onDragStart()},borderDrag:function(d,c){},opacityDrag:function(d,c){}};b.Drag=a})(Space.Libs);(function(b){var a={alpha1:{show:function(l,m,g){var f=0,d=0,c=parseInt(l.style.top)-m;l.style.top=c;baidu.setStyle(l,"opacity",f);l.style.display="";var j=window.setInterval(function(){if(f<=1){baidu.setStyle(l,"opacity",f)}if(d<=c+m){l.style.top=c+d+"px"}d+=1.5;f+=0.05;if(f>0.9&&parseInt(l.style.top)>=c+m){window.clearInterval(j);if(g){g()}}},10)},hidden:function(m,n,j){var f=1;var c=parseInt(m.style.top);var g=c-n;var d=c;var l=window.setInterval(function(){if(f>=0){baidu.setStyle(m,"opacity",f)}if(d>=g){m.style.top=d+"px"}d-=1.5;f-=0.05;if(f<=0&&d<g){window.clearInterval(l);if(j){j()}}},10)}},alpha:{show:function(f,g,d){baidu.setStyle(f,"opacity",0.3);f.style.display="";f.style.top=parseInt(f.style.top)-g+"px";var c=parseInt(f.style.top)+g;Space.Libs.tween(f,["top","opacity"],[c,0.9],0.4,"simple",{end:d})},hidden:function(f,g,d){var c=parseInt(f.style.top)-g;Space.Libs.tween(f,["top","opacity"],[c,0],0.2,"simple",{end:d})}},fallDown:{show:function(g,d,c,f){g.style.display="";g.style.top=d+"px";Space.Libs.tween(g,"top",c,0.6,"bounceEaseOut",{end:f})},hidden:function(g,d,c,f){g.style.display="";g.style.top=d+"px";Space.Libs.tween(g,"top",c,0.6,"strongEaseIn",{end:f})}}};b.DisplaySet=a})(Space.Libs);(function(c){var p={simple:function(u,r,s,t){return s*u/t+r},backEaseIn:function(u,r,y,x){var v=1.70158;return y*(u/=x)*u*((v+1)*u-v)+r},backEaseOut:function(v,r,A,z,u,y){var x=1.70158;return A*((v=v/z-1)*v*((x+1)*v+x)+1)+r},backEaseInOut:function(v,r,A,z,u,y){var x=1.70158;if((v/=z/2)<1){return A/2*(v*v*(((x*=(1.525))+1)*v-x))+r}return A/2*((v-=2)*v*(((x*=(1.525))+1)*v+x)+2)+r},bounceEaseOut:function(s,r,v,u){if((s/=u)<(1/2.75)){return v*(7.5625*s*s)+r}else{if(s<(2/2.75)){return v*(7.5625*(s-=(1.5/2.75))*s+0.75)+r}else{if(s<(2.5/2.75)){return v*(7.5625*(s-=(2.25/2.75))*s+0.9375)+r}else{return v*(7.5625*(s-=(2.625/2.75))*s+0.984375)+r}}}},bounceEaseIn:function(s,r,v,u){return v-p.bounceEaseOut(u-s,0,v,u)+r},bounceEaseInOut:function(s,r,v,u){if(s<u/2){return p.bounceEaseIn(s*2,0,v,u)*0.5+r}else{return p.bounceEaseOut(s*2-u,0,v,u)*0.5+v*0.5+r}},strongEaseInOut:function(s,r,v,u){return v*(s/=u)*s*s*s*s+r},regularEaseIn:function(s,r,v,u){return v*(s/=u)*s+r},regularEaseOut:function(s,r,v,u){return -v*(s/=u)*(s-2)+r},regularEaseInOut:function(s,r,v,u){if((s/=u/2)<1){return v/2*s*s+r}return -v/2*((--s)*(s-2)-1)+r},strongEaseIn:function(s,r,v,u){return v*(s/=u)*s*s*s*s+r},strongEaseOut:function(s,r,v,u){return v*((s=s/u-1)*s*s*s*s+1)+r},strongEaseInOut:function(s,r,v,u){if((s/=u/2)<1){return v/2*s*s*s*s*s+r}return v/2*((s-=2)*s*s*s*s+2)+r},elasticEaseIn:function(v,r,A,z,u,y){if(v==0){return r}if((v/=z)==1){return r+A}if(!y){y=z*0.3}if(!u||u<Math.abs(A)){u=A;var x=y/4}else{var x=y/(2*Math.PI)*Math.asin(A/u)}return -(u*Math.pow(2,10*(v-=1))*Math.sin((v*z-x)*(2*Math.PI)/y))+r},elasticEaseOut:function(v,r,A,z,u,y){if(v==0){return r}if((v/=z)==1){return r+A}if(!y){y=z*0.3}if(!u||u<Math.abs(A)){u=A;var x=y/4}else{var x=y/(2*Math.PI)*Math.asin(A/u)}return(u*Math.pow(2,-10*v)*Math.sin((v*z-x)*(2*Math.PI)/y)+A+r)},elasticEaseInOut:function(v,r,A,z,u,y){if(v==0){return r}if((v/=z/2)==2){return r+A}if(!y){var y=z*(0.3*1.5)}if(!u||u<Math.abs(A)){var u=A;var x=y/4}else{var x=y/(2*Math.PI)*Math.asin(A/u)}if(v<1){return -0.5*(u*Math.pow(2,10*(v-=1))*Math.sin((v*z-x)*(2*Math.PI)/y))+r}return u*Math.pow(2,-10*(v-=1))*Math.sin((v*z-x)*(2*Math.PI)/y)*0.5+A+r}};var l=function(r){return r.uniqueID};if(!$IE){l=function(s){try{var r;if(s.getAttribute("uniqueID")==null){r="moz__id"+parseInt(Math.random()*100)+"_"+new Date().getTime();s.setAttribute("uniqueID",r);return r}return s.getAttribute("uniqueID")}finally{r=null}}}function n(t){try{var r=t.constructor.toString().toLowerCase();return r.slice(r.indexOf("function")+9,r.indexOf("()"))}finally{r=null}}function m(v,u){var t,s,r=[];s=u.length;for(t=0;t<s;t++){r[r.length]=parseFloat(baidu.getStyle(v,u[t]))}return r}function o(r){return n(r)!="array"?[r]:r}function d(r,y){try{var u=n(r);var z=[],x=[],v,t,s;if(u!="array"){s=j(r);s[1]=y=="opacity"?"":s[1];z=[s[0]];x=[s[1]]}else{t=r.length;for(v=0;v<t;v++){s=j(r[v]);s[1]=y[v]=="opacity"?"":s[1];z[z.length]=s[0];x[x.length]=s[1]}}return[z,x]}finally{u=z=x=v=t=s=null}}function j(s){try{var r=/(-?\d.?\d*)([a-z%]*)/i.exec(s);return[r[1],r[2]?r[2]:"px"]}finally{r=null}}var a={};var g={};function b(t){try{var s=Space.Libs.getRandomId(t);var r;if(a[s]!=true){r=new f();g[s]={node:t,func:r};a[s]=true;return r}else{return g[s].func}}finally{s=r=null}}function f(){this._timer=null}f.prototype.start=function(z,y,u,x,v,A){this.reset();A=A||{};if(A.end){this._func.end=A.end}if(A.tween){this._func.tween=A.tween}var s=o(y);var r=m(z,s);var t=d(u,s);this._node=z;this._property=s;this._endingvalue=t[0];this._suffixvalue=t[1];this._startvalue=r;this._end=false;this._fps=0;if(x!=null){this._seconds=x}if(p[v]!=null){this._animation=p[v]}this._starttime=new Date().getTime();this._timer=setInterval(Space.Libs.bind3(this.play,this),10)};f.prototype.play=function(){var u=(new Date().getTime()-this._starttime)/1000;var t,s,r=this._property.length;if(u>this._seconds){u=this._seconds}for(t=0;t<r;t++){s=this._animation(u,this._startvalue[t],this._endingvalue[t]-this._startvalue[t],this._seconds);baidu.setStyle(this._node,this._property[t],s+this._suffixvalue[t])}this._fps++;this._func.tween();if(u==this._seconds){this.stop()}};f.prototype.stop=function(){clearInterval(this._timer);this._end=true;this._func.end()};f.prototype.reset=function(){clearInterval(this._timer);this._end=false;this._node=null;this._property=[];this._startvalue=[];this._endingvalue=[];this._suffixvalue=[];this._fps=0;this._seconds=0.5;this._animation=p.simple;this._func={end:function(){},tween:function(){}}};function q(x,y,s,v,t,u){var r=b(x);r.start.apply(r,arguments)}q.stop=function(r){b(r).stop()};q.isTween=function(r){return !b(r)._end};c.tween=q})(Space.Libs);(function(b){var a=function(d){var g=this;g.entity=null;g.ifm=null;var f={id:"",x:0,y:0,width:0,height:0,isFixed:false,layer:new Space.Libs.Layer(d),template:d,canDrag:false,dragEntity:null,name:"",uniqueID:"",isShow:false,nodes:{},focusNode:null,displayMode:"normal",_modeDisplayRuning:false,enabled:true};this.getProperty=function(){return f};(function c(){var l=g.getProperty();var j;l.uniqueID=l.layer.getProperty().uniqueID;l.id=l.uniqueID+"_dialog";l.nodes=g.getNodes();g.entity=l.layer.entity;g.ifm=l.layer.ifm;l.width=parseInt(g.entity.style.width);if(l.nodes.titleBar){l.dragEntity=new Space.Libs.Drag(l.nodes.titleBar,g.ifm?[g.ifm,g.entity]:[g.entity]);l.nodes.titleBar.style.cursor="move";baidu.on(l.nodes.titleBar,"selectstart",function(){return false});l.dragEntity.onDrag=function(){g.onDrag()}}baidu.on(window,"resize",function(){if(l.isShow&&l.isFixed){var o=Space.Libs.winSize();var n=o.width/2-g.getWidth()/2;var m=o.height/2-g.getHeight()/2;n=n<0?0:n;m=m<0?0:m;g.setPosition({x:n,y:m})}})})()};a.prototype={setPosition:function(c){var d=this.getProperty();Space.Libs.parseParam(d,c);this.getProperty().layer.setPosition(c)},setSize:function(c){var d=this.getProperty();Space.Libs.parseParam(d,c);d.layer.setSize(c)},setFixed:function(d){var c=this.getProperty();c.isFixed=d;this.getProperty().layer.setFixed(c.isFixed)},setContent:function(c){var d=this.getProperty();this.getProperty().layer.setContent(c)},setTemplate:function(c){var d=this.getProperty();d.template=c;d.layer.setTemplate(d.template)},setDrag:function(c){var d=this.getProperty();d.canDrag=c;if(d.canDrag){d.dragEntity.capture()}else{d.dragEntity.release()}},getWidth:function(){return this.getProperty().layer.getWidth()},getHeight:function(){return this.getProperty().layer.getHeight()},getX:function(){return this.getProperty().layer.getX()},getY:function(){return this.getProperty().layer.getY()},show:function(d){var c=this.getProperty();var f=this;c.isShow=true;if(this.ifm){this.ifm.style.display=""}this.onShow();if(c.displayMode=="normal"||d=="normal"){this.entity.style.display=""}else{c._modeDisplayRuning=true;c.enabled=false;this._showWithMode(function(){c._modeDisplayRuning=false;c.enabled=true;if(f.onDisplaied){f.onDisplaied()}})}},close:function(d){var f=this;var c=this.getProperty();if(c.displayMode=="normal"||d=="normal"){c.isShow=false;c.layer.hidden();this.destroy();this.onClose();if(f.onDisplayFinished){f.onDisplayFinished()}}else{if(!c._modeDisplayRuning){c._modeDisplayRuning=true;c.enabled=false;this._hiddenWithMode(function(){c.isShow=false;c.layer.hidden();c._modeDisplayRuning=false;c.enabled=true;f.destroy();f.onClose();if(f.onDisplayFinished){f.onDisplayFinished()}})}}},hidden:function(d){var f=this;var c=this.getProperty();if(c.displayMode=="normal"||d=="normal"){c.isShow=false;c.layer.hidden();this.onHidden();if(f.onDisplayFinished){f.onDisplayFinished()}}else{if(!c._modeDisplayRuning){c._modeDisplayRuning=true;c.enabled=false;this._hiddenWithMode(function(){c.isShow=false;c.layer.hidden();f.onHidden();c._modeDisplayRuning=false;c.enabled=true;if(f.onDisplayFinished){f.onDisplayFinished()}})}}},_showWithMode:function(c){var f=this.getProperty();var d=Space.Libs.winSize();var g=this;switch(f.displayMode){case"alpha":Space.Libs.DisplaySet.alpha.show(this.entity,20,c);break}},_hiddenWithMode:function(c){var f=this.getProperty();var g=this;var d=Space.Libs.winSize();switch(f.displayMode){case"alpha":Space.Libs.DisplaySet.alpha.hidden(this.entity,20,c);break}},destroy:function(){try{if(this.getProperty().nodes.iframe){this.getProperty().nodes.iframe.src=""}}catch(c){}this.entity&&this.entity.parentNode.removeChild(this.entity);this.entity=null;if(this.ifm){this.ifm.parentNode.removeChild(this.ifm);this.ifm=null}},onShow:function(){},onClose:function(){},onHidden:function(){},onDrag:function(){},onDisplaied:function(){},onDisplayFinished:function(){},setAreaLocked:function(c){var d=this.getProperty();d.dragEntity.isLock=c;var f=this;if(c){f._updateLockArea();baidu.on(window,"resize",function(){f._updateLockArea()})}},_updateLockArea:function(){var d=this.getProperty();var c=Space.Libs.winSize();if(d.isFixed){if($IE6){d.dragEntity.lockArea={left:document.documentElement.scrollLeft,right:document.documentElement.scrollLeft+c.width,top:document.documentElement.scrollTop,bottom:document.documentElement.scrollTop+c.height};baidu.on(window,"scroll",function(){d.dragEntity.lockArea={left:document.documentElement.scrollLeft,right:document.documentElement.scrollLeft+c.width,top:document.documentElement.scrollTop,bottom:document.documentElement.scrollTop+c.height}});baidu.on(window,"resize",function(){d.dragEntity.lockArea={left:document.documentElement.scrollLeft,right:document.documentElement.scrollLeft+c.width,top:document.documentElement.scrollTop,bottom:document.documentElement.scrollTop+c.height}})}else{d.dragEntity.lockArea={left:0,right:c.width,top:0,bottom:c.height}}}else{d.dragEntity.lockArea={left:0,right:document.documentElement.scrollWidth,top:0,bottom:document.documentElement.scrollHeight};if(d.dragEntity.lockArea.bottom<100){d.dragEntity.lockArea.bottom=document.documentElement.clientHeight}}},updateFixed:function(){this.getProperty().layer.updateFixed()},getNodes:function(c){return this.getProperty().layer.getNodes(c)},setFocus:function(){var d=this.getProperty();if(d.focusNode&&d.focusNode.style.display!="none"){try{d.focusNode.focus()}catch(c){}}else{if(this.entity.style.display!="none"){this.entity.focus()}}},getRandomId:function(){Space.Libs.getRandomId()},setTimeClose:function(c){setTimeout(function(){this.close()}.bind(this),c)},setZIndex:function(c){this.entity.style.zIndex=c}};b.Dialog=a})(Space.Libs);var LayerTemplate={dialog:'<table id="#{entity}" cellspacing="0" cellpadding="0" border="0">		    <tbody>		      <tr height="24" bgcolor="">		        <td>					<table width="100%" id="#{titleBar}" cellspacing="0" cellpadding="0" border="0" style="-moz-user-select: none; height: 24px;">		            <tbody>		              <tr>		                <td style="width: 15px; height: 40px; background: url(&quot;http://apps.hi.baidu.com/static/img/dialog/round.gif&quot;) no-repeat scroll 0pt 0pt transparent;"></td>		                <td style="color: rgb(0, 0, 0); font-size: 14px; font-weight: bold; background: url(&quot;http://apps.hi.baidu.com/static/img/dialog/x_repeat.gif&quot;) repeat-x scroll left top transparent; padding: 10px 0pt 0pt 5px; cursor: move;" id="#{titleName}"></td>		                <td valign="middle" align="center" style="background: url(&quot;http://apps.hi.baidu.com/static/img/dialog/x_repeat.gif&quot;) repeat-x scroll left top transparent; width: 23px;"><input border="0" align="absmiddle" type="button" title="关闭" style="background: url(&quot;http://apps.hi.baidu.com/static/img/dialog/round.gif&quot;) no-repeat scroll 0px -44px transparent; border: 0pt none; cursor: pointer; width: 17px; height: 17px; margin-top: 10px;"id="#{btnClose}"></td>		                <td style="width: 15px; height: 40px; background: url(&quot;http://apps.hi.baidu.com/static/img/dialog/round.gif&quot;) no-repeat scroll -25px 0pt transparent;"></td>		              </tr>		            </tbody>		          </table></td>		      </tr>		      <tr valign="top">		        <td><table width="100%" height="100%" cellspacing="0" cellpadding="0" border="0">		            <tbody>		              <tr>		                <td style="background: url(&quot;http://apps.hi.baidu.com/static/img/dialog/y_repeat.gif&quot;) repeat-y scroll left top transparent; width: 15px;"></td>		                <td style="position: relative; background: none repeat scroll 0% 0% rgb(255, 255, 255);" id="#{content}" ></td>		                <td style="background: url(&quot;http://apps.hi.baidu.com/static/img/dialog/y_repeat.gif&quot;) repeat-y scroll right top transparent; width: 15px;"></td>		              </tr>		            </tbody>		          </table></td>		      </tr>		      <tr>		        <td><table width="100%" cellspacing="0" cellpadding="0" border="0">		            <tbody>		              <tr style="line-height: 0pt;">		                <td style="background: url(&quot;http://apps.hi.baidu.com/static/img/dialog/round.gif&quot;) no-repeat scroll left bottom transparent; width: 15px; font-size: 0pt;">&nbsp;</td>		                <td style="background: url(&quot;http://apps.hi.baidu.com/static/img/dialog/x_repeat.gif&quot;) repeat-x scroll left bottom transparent; height: 15px; font-size: 0pt;">&nbsp;</td>		                <td style="background: url(&quot;http://apps.hi.baidu.com/static/img/dialog/round.gif&quot;) no-repeat scroll right bottom transparent; width: 15px; font-size: 0pt;">&nbsp;</td>		              </tr>		            </tbody>		          </table></td>		      </tr>		    </tbody>		  </table>		</div>'};(function(a){var b=function(d){this.entity=null;this.isShow=false;this._ie6Fixed=function(){if(f.entity){f.entity.style.top=document.documentElement.scrollTop+"px";f.entity.style.left=document.documentElement.scrollLeft+"px";if(f.ifm){f.ifm.style.top=f.entity.style.top;f.ifm.style.left=f.entity.style.left}f.updateSize()}};var f=this;(function c(){f.entity=$C("div");f.entity.style.position="absolute";f.entity.style.width=f.getAreaWidth()+"px";f.entity.style.height=f.getAreaHeight()+"px";f.entity.style.left="0px";f.entity.style.top="0px";f.entity.style.zIndex=1024;f.entity.style.backgroundColor="black";document.body.appendChild(f.entity);f._setOpacity(f.entity,isNaN(d)?0.4:d);if($IE6){f.entity.style.top=document.documentElement.scrollTop+"px";f.addIframe()}baidu.on(window,"resize",function(){if(f.entity){if($IE6&&f.isShow){document.documentElement.scrollLeft=0;f._ie6Fixed()}setTimeout(function(){f.updateSize()},1)}});f.setFixed(true);f.hidden()})()};b.prototype={show:function(){this.entity.style.display="";if(this.ifm){this.ifm.style.display=""}this.isShow=true;this.onShow()},hidden:function(){this.entity.style.display="none";if(this.ifm){this.ifm.style.display="none"}this.isShow=false;this.onHidden()},close:function(){this.hidden();this.destroy()},destroy:function(){baidu.un(window,"scroll",this._ie6Fixed);this.entity.parentNode.removeChild(this.entity);this.entity=null;if(this.ifm){this.ifm.parentNode.removeChild(this.ifm);this.ifm=null}},addIframe:function(){this.ifm=$C("iframe");this._setOpacity(this.ifm,0);this.ifm.style.position="absolute";this.ifm.style.zIndex=this.entity.style.zIndex;this.ifm.style.left=this.entity.style.left;this.ifm.style.top=this.entity.style.top;this.ifm.style.width=this.entity.style.width;this.ifm.style.height=this.entity.style.height;document.body.insertBefore(this.ifm,this.entity)},insertBefore:function(c){document.body.insertBefore(this.entity,c);if(this.ifm){document.body.insertBefore(this.ifm,this.entity)}},updateSize:function(){this.entity.style.width=this.getAreaWidth()+"px";this.entity.style.height=this.getAreaHeight()+"px";if(this.ifm){this.ifm.style.width=this.getAreaWidth()+"px";this.ifm.style.height=this.getAreaHeight()+"px"}},getAreaHeight:function(){return baidu.page.getHeight()},getAreaWidth:function(){return baidu.page.getWidth()},setFixed:function(c){if($IE6){var d=this;if(c){d._ie6Fixed()}else{baidu.event._unload(window,d._ie6Fixed,"scroll")}}if($IE){c=false}this.entity.style.position=c?"fixed":"absolute"},_setOpacity:function(d,c){if($IE){d.style.filter="alpha(opacity="+c*100+")"}else{d.style.opacity=c}},onShow:function(){},onHidden:function(){},setZIndex:function(c){this.entity.style.zIndex=c;if(this.ifm){this.ifm.style.zIndex=c}}};a.Shadow=b})(Space.Libs);(function(b){function a(f,d){this.nodesPattern=/[^\{\}]+(?=\})/g;this._dialog=Space.Libs.DialogManager.create(f,d);this.entity=this._dialog.entity;this.templateString="";this.nodes={};var g=this;(function c(){g._dialog.onDrag=function(){if($IE6){if(this.getProperty().isFixed){this.setPosition({x:(parseInt(this.entity.style.left)-document.documentElement.scrollLeft),y:(parseInt(this.entity.style.top)-document.documentElement.scrollTop)})}}else{if(this.getProperty().isFixed){this.setPosition({x:parseInt(this.entity.style.left),y:parseInt(this.entity.style.top)})}}g.onDrag()};g.updateNodes();if(g.nodes.btnClose){baidu.on(g.nodes.btnClose,"mousedown",function(){var j=Space.Libs.getEvent();if(j){j.cancelBubble=true}})}})();this._hiddenDialog=function(){g.hidden()};this._closeDialog=function(){g.close()}}a.prototype={isSetMiddle:false,setContent:function(c){var d=c;this.templateString=d.match(this.nodesPattern);this.nodes.content.innerHTML=baidu.format(d,this.getContentNodes("i"));this.updateNodes()},setTitle:function(c){if(this.nodes.titleName){this.nodes.titleName.innerHTML=c}},setHelp:function(c){if(this.nodes.btnHelp){if(c){this.nodes.btnHelp.href=c}else{this.nodes.btnHelp.innerHTML=""}}},setClose:function(c){var d=this;if(d.nodes.btnClose){c=c||"hidden";switch(c){case"hidden":baidu.on(d.nodes.btnClose,"click",d._hiddenDialog);break;case"close":baidu.on(d.nodes.btnClose,"click",d._closeDialog);break}}},setPosition:function(c,d){this._dialog.setPosition({x:c,y:d})},setMiddle:function(){var m=Space.Libs.viewSize();var f,c;var g=this._dialog.entity.style.display;this._dialog.setPosition({x:-10000});this._dialog.entity.style.display="";var l=this.nodes.titleBar?this.nodes.titleBar.offsetHeight:0;var j=m.height-this.nodes.content.offsetHeight-l;var d=m.width-this.nodes.content.offsetWidth;var f=d/2<0?0:d/2;var c=j*0.618/1.618<0?0:j*0.618/1.618;f+=baidu.page.getScrollLeft();c+=baidu.page.getScrollTop();this._dialog.entity.style.display=g;this._dialog.setPosition({x:f,y:c});this.isSetMiddle=true},setSize:function(d,c){this._dialog.setSize({width:d,height:c})},setFixed:function(c){this._dialog.setFixed(c)},setAreaLocked:function(c){this._dialog.setAreaLocked(c)},setFocusNode:function(c){this._dialog.getProperty().focusNode=c},setDisplayMode:function(c){this._dialog.getProperty().displayMode=c||"normal"},getWidth:function(){return this._dialog.getProperty().width},getHeight:function(){return this._dialog.getProperty().height},getX:function(){return this._dialog.getProperty().x},getY:function(){return this._dialog.getProperty().y},show:function(){if(this.isSetMiddle){this.setMiddle()}this._dialog.show();this.onShow()},hidden:function(){this._dialog.hidden();this.onHidden()},close:function(){var c=this;c._dialog.close();c.onClose();if(c.nodes.btnClose){baidu.un(c.nodes.btnClose,"click",c._hiddenDialog);baidu.un(c.nodes.btnClose,"click",c._CloseDialog)}},updateNodes:function(){this.nodes=this._dialog.getNodes();var c=this.getContentNodes();for(k in c){this.nodes[k]=c[k]}},getContentNodes:function(l){var d=l||"o";var g;var f={};var c=this.templateString;if(c){for(g=0;g<c.length;g++){var j=c[g];switch(d){case"o":f[j]=$E(this.nodes.content.id+"_"+j);break;case"i":f[j]=this.nodes.content.id+"_"+j;break}}}return f},setOnDisplaied:function(c){this._dialog.onDisplaied=c},setOnDisplayFinished:function(c){this._dialog.onDisplayFinished=c},setZIndex:function(c){this._dialog.setZIndex(c)},setTimeClose:function(c){this._dialog.setTimeClose(c)},onDrag:function(){},onShow:function(){},onHidden:function(){},onClose:function(){}};b.CustomsDialog=a})(Space.Libs);(function(b){var a={dialogs:[],activeDialog:{},backShadow:null,zIndex:null,isShadowZIndexed:false,create:function(d,c){var g=this;var f=new Space.Libs.Dialog(d);this.dialogs.push(f);this.activeDialog=f;f.name=c||Space.Libs.getRandomId();f.entity.style.zIndex=1024;f.onDrag=function(){if($IE6){if(this.getProperty().isFixed){this.setPosition({x:(parseInt(this.entity.style.left)-document.documentElement.scrollLeft),y:(parseInt(this.entity.style.top)-document.documentElement.scrollTop)})}}else{if(this.getProperty().isFixed){this.setPosition({x:parseInt(this.entity.style.left),y:parseInt(this.entity.style.top)})}}};f.onClose=function(){g.removeDialog(this.name);g.updateActiveDialog();g.updateShadow();if(g.activeDialog){g.activeDialog.setFocus()}};f.onHidden=function(){this.isHidden=true;if(this==g.activeDialog){g.activeDialog=null}g.updateActiveDialog();g.updateShadow();if(g.activeDialog){g.activeDialog.setFocus()}};f.onShow=function(){if(this.isHidden){this.isHidden=false;var l,j=g.dialogs.length;for(l=0;l<j;l++){if(g.dialogs[l]==this){document.body.appendChild(g.dialogs[l].entity);g.dialogs.push(g.dialogs[l]);g.dialogs.splice(l,1)}}g.activeDialog=this;g.backShadow.show();g.updateShadow()}};if(this.backShadow.isShow){this.updateShadow()}else{this.backShadow.show()}f.hidden();return f},getDialog:function(d){var f=0,c=this.dialogs.length;for(f=0;f<c;f++){if(this.dialogs[f].name==d){return this.dialogs[f]}}},removeDialog:function(d){var f=0,c=this.dialogs.length;for(f=c-1;f>=0;f--){if(this.dialogs[f].name==d){this.dialogs.splice(f,1);this.activeDialog=this.dialogs[this.dialogs.length-1];break}}},updateActiveDialog:function(){var d,c=this.dialogs.length;for(d=c-1;d>=0;d--){if(!this.dialogs[d].isHidden){this.activeDialog=this.dialogs[d];break}}},updateShadow:function(){if(this.activeDialog&&!this.activeDialog.isHidden){this.backShadow.insertBefore(this.activeDialog.entity);this.activeDialog.updateFixed()}else{this.backShadow.hidden()}},close:function(d){if(!d){if(this.activeDialog){this.activeDialog.close()}return}var f,c=this.dialogs.length;for(f=c-1;f>=0;f--){if(this.dialogs[f].name==d){this.dialogs[f].close();break}}},setShadowZIndex:function(c){this.backShadow.setZIndex(c);this.isShadowZIndexed=true}};b.DialogManager=a})(Space.Libs);(function(b){var a=function(c,d){this.template=d||{};Space.Libs.DialogManager.backShadow=c};a.prototype={alert:function(l,c,f){c=c||{};var g=Space.Libs.DialogManager.create(this.template.alert||LayerTemplate.alert,f);var j=Space.Libs.winSize();var d=g.getNodes();g.onDisplaied=c.funcDisplaied;g.onDisplayFinished=c.funcDisplayFinished;g.setSize({width:c.width,height:c.height});this._setDialogMiddle(g);if(Space.Libs.DialogManager.zIndex){g.setZIndex(Space.Libs.DialogManager.zIndex);if(!Space.Libs.DialogManager.isShadowZIndexed){Space.Libs.DialogManager.setShadowZIndex(Space.Libs.DialogManager.zIndex)}}g.show();g.setAreaLocked(true);d.text.innerHTML=l;if(d.titleName){d.titleName.innerHTML=c.title||"提示"}d.btnOk.value=c.textOk||"确定";if(d.subText){d.subText.innerHTML=c.subText||""}g.getProperty().focusNode=d.linkOk;baidu.on(d.btnOk,"click",function(){if(c.funcOk&&g.getProperty().enabled){c.funcOk();baidu.event.stop(Space.Libs.getEvent())}g.close();return false});baidu.on(d.btnClose,"click",function(){if(c.funcClose&&g.getProperty().enabled){c.funcClose()}g.close()});baidu.on(d.btnClose,"mousedown",function(){var m=Space.Libs.getEvent();m.cancelBubble=true});return g},confirm:function(l,c,f){c=c||{};var g=Space.Libs.DialogManager.create(this.template.confirm||LayerTemplate.confirm,f);var j=Space.Libs.winSize();var d=g.getNodes();g.onDisplaied=c.funcDisplaied;g.onDisplayFinished=c.funcDisplayFinished;g.setSize({width:c.width,height:c.height});this._setDialogMiddle(g);if(Space.Libs.DialogManager.zIndex){g.setZIndex(Space.Libs.DialogManager.zIndex);if(!Space.Libs.DialogManager.isShadowZIndexed){Space.Libs.DialogManager.setShadowZIndex(Space.Libs.DialogManager.zIndex)}}g.show();g.setAreaLocked(true);d.text.innerHTML=l;if(d.titleName){d.titleName.innerHTML=c.title||"提示"}d.btnOk.innerHTML=c.textOk||"确定";d.btnCancel.innerHTML=c.textCancel||"取消";if(d.subText){d.subText.innerHTML=c.subText||""}baidu.on(d.btnOk,"click",function(){if(c.funcOk&&g.getProperty().enabled){c.funcOk();baidu.event.stop(Space.Libs.getEvent())}g.close();return false});baidu.on(d.btnCancel,"click",function(){if(c.funcCancel&&g.getProperty().enabled){c.funcCancel();baidu.event.stop(Space.Libs.getEvent())}g.close();return false});baidu.on(d.btnClose,"click",function(){if(c.funcClose&&g.getProperty().enabled){c.funcClose();baidu.event.stop()}g.close();return false});baidu.on(d.btnClose,"mousedown",function(){var m=Space.Libs.getEvent();m.cancelBubble=true});return g},showIframe:function(g,c){g=g||{};g.displayMode=g.displayMode||"alpha";var j=Space.Libs.DialogManager.create(this.template.iframe||LayerTemplate.iframe,c);var f=Space.Libs.viewSize();var d=j.getNodes();var m,l;j.setSize({width:g.width||320,height:g.height||150});var n=f.height-j.getProperty().height;var o=f.width-j.getProperty().width;var m=o/2<0?0:o/2;var l=n*0.618/1.618<0?0:n*0.618/1.618;m+=baidu.page.getScrollLeft();l+=baidu.page.getScrollTop();j.setPosition({x:m,y:l});if(!$IE6){j.getProperty().displayMode=g.displayMode}if(Space.Libs.DialogManager.zIndex){j.setZIndex(Space.Libs.DialogManager.zIndex);if(!Space.Libs.DialogManager.isShadowZIndexed){Space.Libs.DialogManager.setShadowZIndex(Space.Libs.DialogManager.zIndex)}}j.show();j.setAreaLocked(true);d.titleName.innerHTML=g.title||"";d.iframe.src=g.url||"about:blank";baidu.on(d.iframe,"load",function(){d.iframe.style.display="";d.loadState.style.display="none"});baidu.on(d.btnClose,"click",function(){j.close()});baidu.on(d.btnClose,"mousedown",function(){var p=Space.Libs.getEvent();p.cancelBubble=true});return j},createCustomsDialog:function(c,d){c=c||{};var f=new Space.Libs.CustomsDialog(c.tpl||this.template.customs||LayerTemplate.customs,d);c.content&&f.setContent(c.content);f.setTitle(c.title||"提示");f.setHelp(c.help||"");f.setSize(c.width||320,c.height||150);f.setClose("hidden");f.setOnDisplaied(c.funcDisplaied);f.setOnDisplayFinished(c.funcDisplayFinished);if(Space.Libs.DialogManager.zIndex){f.setZIndex(Space.Libs.DialogManager.zIndex);if(!Space.Libs.DialogManager.isShadowZIndexed){Space.Libs.DialogManager.setShadowZIndex(Space.Libs.DialogManager.zIndex)}}return f},getDialog:function(c){return Space.Libs.DialogManager.getDialog(c)},close:function(c){Space.Libs.DialogManager.close(c)},_setDialogMiddle:function(g){var f=Space.Libs.viewSize();var c=g.getNodes();var l,j;var o=g.entity.style.display;g.setPosition({x:-10000});g.entity.style.display="";var d=c.titleBar?c.titleBar.offsetHeight:0;var m=f.height-c.content.offsetHeight-d;var n=f.width-c.content.offsetWidth;var l=n/2<0?0:n/2;var j=m*0.618/1.618<0?0:m*0.618/1.618;l+=baidu.page.getScrollLeft();j+=baidu.page.getScrollTop();g.entity.style.display=o;g.setPosition({x:l,y:j})}};b.WindowDialog=a})(Space.Libs);Space.Libs.diaTemp={};Space.Libs.diaTemp.alert=['<div id="#{entity}" style="width:300px"  class="pop-uic">',"<div>",'<table style="height: 100%; width: 100%; " class="pop-dialog-table" cellpadding="0" cellspacing="0">',"<tbody>","<tr>",'<td class="pop-content" align="center"  valign="top">','<h2 id="#{titleBar}"><span id="#{titleName}"></span><a href="#" onclick="return false;" id="#{btnClose}"></a></h2>','<div class="clear" style="height:0px;padding:0;margin:0;overflow:hidden;"></div>','<div id="#{content}">','<div class="pop-html">','<div class="pop-body" id="#{text}"></div>',"</div>",'<div class="pop-buttons">','<div class="pop-buttons-c" style="width:73px">','<a href="#" onclick="return false;" class="pop-submit" style="color:#fff;" id="#{btnOk}">确定</a>',"</div>","</div>","</div>","</td>","</tr>","</tbody>","</table>","</div>","</div>"].join("");Space.Libs.diaTemp.confirm=['<div class="pop-uic" id="#{entity}" style="width:300px">',"<div>",'<table style="height: 100%; width: 100%; " class="pop-dialog-table" cellpadding="0" cellspacing="0">',"<tbody>","<tr>",'<td class="pop-content" valign="top" align="center">','<h2 id="#{titleBar}"><span id="#{titleName}"></span><a href="#" onclick="return false;" id="#{btnClose}"></a></h2>','<div class="clear" style="height:0px;padding:0;margin:0;overflow:hidden;"></div>','<div id="#{content}">','<div class="pop-html">','<div class="pop-body" id="#{text}"></div>',"</div>",'<div class="pop-buttons">','<div class="pop-buttons-c">','<a href="#" onclick="return false;" class="pop-submit" style="color:#fff;"  id="#{btnOk}">确定</a>','<a href="#" onclick="return false;" class="pop-cancel" style="color:#717171;"  id="#{btnCancel}">取消</a>',"</div>","</div>","</div>","</td>","</tr>","</tbody>","</table>","</div>","</div>"].join("");Space.Libs.diaTemp.iframe=['<div class="pop-uic" id="#{entity}" style="width:300px">','<table style="height: 100%; width: 100%; " class="pop-dialog-table" cellpadding="0" cellspacing="0">',"<tbody>","<tr>",'<td class="pop-content" valign="top" align="center">','<h2 id="#{titleBar}"><span id="#{titleName}"></span><a href="#" id="#{btnClose}" onclick="return false;"></a></h2>','<div class="clear" style="height:0px;padding:0;margin:0;overflow:hidden;"></div>','<div id="#{content}">','<div id="#{loadState}">Loading...</div>','<iframe frameborder="0" scrolling="no" style="width:100%;height:100%;display:none;" id="#{iframe}"></iframe>',"</div>","</td>","</tr>","</tbody>","</table>","</div>"].join("");Space.Libs.diaTemp.customs=['<div class="pop-uic" id="#{entity}" style="width:300px">',"<div>",'<table style="height: 100%; width: 100%; " class="pop-dialog-table" cellpadding="0" cellspacing="0">',"<tbody>","<tr>",'<td class="pop-content" valign="top" align="center">','<h2 id="#{titleBar}"><span id="#{titleName}"></span><a href="#" onclick="return false;" id="#{btnClose}"></a></h2>','<div class="clear" style="height:0px;padding:0;margin:0;overflow:hidden;"></div>','<div id="#{content}">','<div id="#{loadState}">Loading...</div>','<iframe frameborder="0" scrolling="no" style="width:100%;height:100%;display:none;" id="#{iframe}"></iframe>',"</div>","</td>","</tr>","</tbody>","</table>","</div>","</div>"].join("");(function(f){var d;var b={},c;b.alert=function(l,g,j){if(!c){a();return c.alert(l,g,j)}else{return c.alert(l,g,j)}};b.confirm=function(l,g,j){if(!c){a();return c.confirm(l,g,j)}else{return c.confirm(l,g,j)}};b.showIframe=function(g,j){if(!c){a();return c.showIframe(g,j)}else{return c.showIframe(g,j)}};b.createCustomsDialog=function(g,j){if(!c){a();return c.createCustomsDialog(g,j)}else{return c.createCustomsDialog(g,j)}};b.getDialog=function(g){if(!c){a();return c.getDialog(g)}else{return c.getDialog(g)}};b.close=function(g){if(!c){a();c.close(g)}else{c.close(g)}};function a(){d=new Space.Libs.Shadow(0.4);c=new Space.Libs.WindowDialog(d,{alert:Space.Libs.diaTemp.alert,confirm:Space.Libs.diaTemp.confirm,iframe:Space.Libs.diaTemp.iframe,customs:Space.Libs.diaTemp.customs})}f.bdDialog=b})(Space.Libs);(function(a){var b=function(d){var g='<li#{on} data-index="#{i}">#{title}</li>';var f=[];baidu.each(d,function(j){j.name=j.name||"tabDialog"+Math.ceil(Math.random()*10000);f.push(j.name)});function c(n){var o=Space.Libs.bdDialog.getDialog(f[n]);if(o){o.show()}else{var j="";baidu.each(d,function(q,p){j+=baidu.format(g,{on:p==n?' class="on"':"",i:p,title:q.config.title})});if(d.length>n){var l=d[n];l.name=l.name||"tabDialog"+(new Date).getTime();switch(l.type){case"alert":o=new Space.Libs.bdDialog.alert(l.text,l.config,l.name);break;case"confirm":o=new Space.Libs.bdDialog.confirm(l.text,l.config,l.name);break;case"showIframe":case"iframe":o=new Space.Libs.bdDialog.showIframe(l.config,l.name);break;case"createCustomsDialog":case"custom":o=new Space.Libs.bdDialog.showIframe(l.config,l.name);break;default:if(l.type in Space.Libs.bdDialog){o=new Space.Libs.bdDialog[l.type](l.config,l.name)}else{return}}var m=o.getNodes()||o.nodes;m.titleName.innerHTML="<ul>"+j+"</ul>";if(l.type=="createCustomsDialog"||l.type=="custom"){o.show();o.setMiddle()}baidu.each(m.titleName.getElementsByTagName("li"),function(p){baidu.on(p,"click",function(){var q=baidu.getAttr(p,"data-index")|0;if(q!=n){o.hidden();c(q)}})})}}o.setDrag(false);return o}c(0);return{close:function(){baidu.each(f,function(j){Space.Libs.bdDialog.getDialog(j).close()})},getDialogByName:function(j){return Space.Libs.bdDialog.getDialog(j)},getDialog:function(j){return Space.Libs.bdDialog.getDialog(f[i])},changeTab:c}};a.tabDialog=b})(Space.Libs);(function(b){var a=function(g){var f=[];var c=location.host;f.push({type:"iframe",config:{url:"http://apps.hi.baidu.com/static/html/login.html?host="+c+"&_t="+Math.random(),width:400,height:330,title:"登录",displayMode:"normal"}});f.push({type:"iframe",config:{url:"http://hi.baidu.com/reg/new?mode=iframe&u="+escape("http://"+c+"/static/html/proxy.html?fun=top.loginDialog.callback"),width:700,height:450,displayMode:"normal",title:"注册"}});var d=Space.Libs.tabDialog(f);d.callback=function(){if(g=="noreload"){return}g?(location.href=g):location.reload()};window.loginDialog=d};b.loginDialog=a})(Space.Libs);(function(b){function a(){if(!this.initCheckEvent){baidu.on(window,"focus",function(){window.activeWindow=true});baidu.on(window,"blur",function(){window.activeWindow=false})}this.initCheckEvent=true;return window.activeWindow}b.checkActiveWin=a})(Space.Libs);Space.suliaoDecide={portraits:[],portraitsStrs:"",lightSty:null,_sourceId:"",_statesDeal:{"5188":"只有认证用户才能速聊哦，马上认证享受聊天特权吧！","5189":"只有认证用户才能速聊哦，换一个在线的好友开始速聊吧！","5190":"只有好友才可以速聊哦，马上加为好友吧！","5191":"TA还没有加你为好友。继续搭讪或者对味吧！","5192":"TA还没有上线，换一个在线的好友速聊吧！","0":"开始速聊吧！"},_source:{find_frd:101,concern:102,notice:103,person:104,page_frd:105},getStatesDeal:function(){return this._statesDeal},enterDecide:function(d,a,g){this.portraitsStrs="";this.portraits.push(d);for(var f=0,b=d.length;f<b;f++){this.portraitsStrs+=(f==0?("portrait[]="+d[f]):("&portrait[]="+d[f]))}this._sourceId=g;this.lightSty=a.split(".");var c=window;for(var f=0,b=this.lightSty.length;f<b;f++){c=c[this.lightSty[f]]}this.lightSty=c;this.getPorState(c,g)},getPorState:function(b,d){var a=this;var c=(window.spDomain?window.spDomain.apps:"http://apps.hi.baidu.com")+"/suliao/data/state?"+a.portraitsStrs+"&asyn=1&_tmp="+Math.random();baidu.sio.callByServer(c,function(f){b(a.coreDecide(f,d),a.getStatesDeal())})},getRightPors:function(m){var a=this;var g=true;for(var f=0,c=a.portraits.length;f<c;f++){g=true;for(var d=0,b=a.portraits[f].length;d<b;d++){if(typeof m[a.portraits[f][d]]=="undefined"){g=false;break}}if(g){return a.portraits[f]}}},dealCallback:function(b){var a=this;this.lightSty(a.coreDecide(b),a.getStatesDeal())},coreDecide:function(n,b){var o=[];var f="invite";var a=this._source[b];var m=(window.spDomain?window.spDomain.apps:"http://apps.hi.baidu.com")+"/suliao?portrait=#{portrait}&action=#{action}&source=#{source}";var c=this.getRightPors(n);for(var g=0,d=c.length;g<d;g++){var j=n[c[g]];if(j.isVerifySelf==0){o.push({portrait:c[g],state:5188})}else{if(j.isVerifyOther==0){o.push({portrait:c[g],state:5189})}else{if(j.isOnline==0){o.push({portrait:c[g],state:5192})}else{o.push({portrait:c[g],state:0,url:baidu.string.format(m,{portrait:c[g],action:f,source:a})})}}}}return o}};(function(b){function a(){this.init()}a.prototype={i_name:"IframeLoader_",f_id:"iframe_loader_",init:function(){this.id=Math.random()*1000;var c='<iframe name="'+this.i_name+this.id+'" style="display:none"></iframe>';var d='<form id="'+this.f_id+this.id+'" action="" method="post" target="'+this.i_name+this.id+'">';baidu.dom.insertHTML(document.body,"beforeEnd",c+d)},request:function(d,g){var c="";for(name in g){c+='<input name="'+name+'" value="'+g[name]+'" type="hidden"/>'}var f=baidu.g(this.f_id+this.id);f.action=d;f.innerHTML=c;f.submit()}};b.IframeLoader=a})(Space.Libs);(function(b){var a=function(x,s){var o=function(C,B){return C[y]-B[y]};var t=function(C,B){return B[y]-C[y]};var y=x,u=[],v=s?t:o;var p=function(B){u.push(B);u.sort(v)};var l=function(){return u.length==0?undefined:u[u.length-1]};var n=function(){return u.pop()};var f=function(){return u.length==0?undefined:u[0]};var j=function(){return u.length==0?undefined:u.shift()};var m=function(G,F){var B=[],E=null;for(var D=0,C=u.length;D<C;D++){E=u[D];if(E[G]==F){B[B.length]=E}}return B};var g=function(E,D){var C=null;for(var B=0;B<u.length;B++){C=u[B];if(C[E]==D){return C}}return undefined};var A=function(E,D){var C=null;for(var B=0;B<u.length;B++){C=u[B];if(C[E]==D){u.splice(B,1);return C}}return undefined};var r=function(G,F){var E=null,C=[],B=[];for(var D=0;D<u.length;D++){E=u[D];if(E[G]==F){B.push(E)}else{C.push(E)}}u=C;return B};var z=function(C){for(var B=0;B<u.length;B++){if(u[B]==C){u.splice(B,1);return}}};var q=function(B){return u.join(B)};var c=function(){return u};var d=function(){return u.length};return{add:p,last:l,removeLast:n,first:f,removeFirst:j,findFirstBy:g,findAllBy:m,removeFirstBy:A,removeAllBy:r,remove:z,getItems:c,getLength:d,toString:function(){return u.toString()}}};b.PriorityQueue=a})(Space.Libs);if(typeof Space.Pubs=="undefined"){Space.Pubs={}}(function(b){window.setSoundReady=function(){window.soundReady=true};var a=function(c,d,f){this.sDomain=c;this._inboxId=d;this._portrait=f;this._titleBak=document.title;this._createSwf();this.initSoundSet()};a.prototype={_SWF_CID:"ps_swfContainer",_SWF_ID:"ps_swf",_COOKIENAME:"mt_cookie_",_swfEle:null,_inboxId:null,_sSetId:"topMsgPlayBtn",_titleBak:null,_tTipNum:null,_portrait:null,_soundType:null,isInboxTiping:false,isTitleTiping:false,initSoundSet:function(){if(!window.soundReady){setTimeout(function(){this.initSoundSet()}.bind(this),500);return}this._soundType=this._swfEle.getSetInfo(this._portrait)||"open";if(this._soundType=="close"){this._setColseView()}else{this._setOpenView()}baidu.on(baidu.g(this._sSetId),"click",this.soundSet.bind(this))},soundTip:function(){if(!window.soundReady){setTimeout(function(){this.soundTip()}.bind(this),500);return}this._swfEle.playSound(this._portrait)},inboxTip:function(){if(this.isInboxTiping){}var c=baidu.g(this._inboxId);c.innerHTML='<img src="http://img.baidu.com/hi/img/email.gif"/>';this.isInboxTiping=true},titleTip:function(){if(this.isTitleTiping){return}Space.Libs.blinkTitle.blink("新消息");this.isTitleTiping=true},allTip:function(){this.inboxTip();this.titleTip()},clearTip:function(){Space.Libs.blinkTitle.stop();this.isTitleTiping=false;this.isInboxTiping=false},staticInbox:function(){var c=baidu.g(this._inboxId);if(c.innerHTML!=""){c.innerHTML='<img src="http://img.baidu.com/hi/img/email_s.gif"/>'}},hideInbox:function(){var c=baidu.g(this._inboxId);c.innerHTML=""},soundSet:function(){var c=Space.Libs.getEvent();baidu.event.stop(c);if(this._soundType=="open"){this._setColseView();this._soundType="close";this._swfEle.setClose(this._portrait)}else{this._setOpenView();this._soundType="open";this._swfEle.setOpen(this._portrait)}},_setColseView:function(){var c=baidu.g(this._sSetId);if(c){c.className="no_sound";c.title="开启新消息提示音"}},_setOpenView:function(){var c=baidu.g(this._sSetId);if(c){c.className="sound";c.title="关闭新消息提示音"}},_createSwf:function(){if(this._swfEle){return}var c='<div style="height: 2px;left: 3px;overflow: hidden;position: absolute;top: -10000px;left:-10000px;width: 1px;background:#000" id="'+this._SWF_CID+'"></div>';baidu.dom.insertHTML(document.body,"beforeEnd",c);baidu.swf.create({id:this._SWF_ID,width:1,height:1,url:this.sDomain+"/static/base/swf/soundTip.swf",wmode:"opaque",allowscriptaccess:"always","allownetworking ":"all"},baidu.g(this._SWF_CID));this._swfEle=baidu.swf.getMovie(this._SWF_ID)}};b.MessageTip=a})(Space.Pubs);if(typeof window.Libs=="undefined"){window.Libs={}}(function(b){function a(c){var f=this;f.Property={template:c,entityId:null,height:0,animateTimer:null};(function d(){var g=f.Property;f.initLayer(g.template);g.entityId=f.layer.getNodes("i").entity;g.height=parseInt(baidu.G(g.entityId).offsetHeight);f.bindEvent()})()}a.prototype={initLayer:function(c){this.layer=new Space.Libs.Layer(c);this.setPosition();this.setFixed();this.layer.setZIndex(77777)},bindEvent:function(){var c=this.getNodes();baidu.on(window,"resize",this.setPosition.bind(this))},animate:function(j,f,m,l){if(!f){return}function d(q){return(f>0?(q>=m):(q<=m))}var o=this,n=baidu.G(o.Property.entityId),p=o.layer.getHeight(),c=p+f,g=d(c);if(!n||(n==null)){o.Property.animateTimer=null;o.animateBack=null;return}if(!d(p)){if(g){c=m}baidu.dom.setStyles(n,{overflow:"hidden",height:c});if(!g){o.setPosition();setTimeout(function(){o.animate.call(o,j,f,m,l)},j)}}if(g&&l){o.Property.animateTimer=null;l();if(o.animateBack&&(o.animateBack!=null)){o.animateBack()}}},getAnimateCfg:function(){var c={speed:50,interval:20};if(window.$IE6||window.$IE7){c.speed=10;c.interval=10}return c},pullUp:function(d,c){if(this.Property.animateTimer!=null){return}var g=this;pnl=baidu.G(g.Property.entityId),tHeight=g.layer.getHeight(),aCfg=g.getAnimateCfg();d=d||aCfg.speed;baidu.dom.setStyles(pnl,{overflow:"hidden",height:0});g.show();var f=function(){g.innerOnShow();if(c){c()}};g.Property.animateTimer=setTimeout(function(){g.animate.call(g,d,aCfg.interval,tHeight,f)},0)},pushDown:function(f,d){var l=this,g=l.Property;if(l.Property.animateTimer!=null){l.animateBack=function(){if(!l.Property.isDestroyed){l.pushDown(f,d);l.animateBack=null}};return}if(!l.beforeClose()){return false}var c=l.getAnimateCfg();f=f||c.speed;g.height=parseInt(baidu.G(g.entityId).offsetHeight);var j=function(){l.close();if(d){d()}};l.Property.animateTimer=setTimeout(function(){l.animate.call(l,f,c.interval*(-1),0,j)},0);return true},innerOnShow:function(){baidu.dom.setStyles(this.Property.entityId,{overflow:"visible"});this.setPosition()},getNodes:function(){return this.layer.getNodes()},show:function(){this.layer.show();this.onShow()},setFixed:function(){var c=this.layer.getNodes()["entity"];if($IE){baidu.on(window,"scroll",this.setPosition.bind(this))}else{c.style.position="fixed"}},beforeClose:function(){return true},close:function(){if(!this.beforeClose()){return false}this.hidden();this.destroy();return true},hidden:function(){this.layer.hidden()},destroy:function(){var c=baidu.G(this.Property.entityId);if(c){c.parentNode.removeChild(c)}this.Property.isDestroyed=true},setPosition:function(){var g=this.layer.getHeight();var f=this.layer.getWidth();var d,c;if($IE){if(document.documentElement.clientHeight==0){d=document.body.scrollTop+document.body.clientHeight;c=document.body.scrollLeft+document.body.clientWidth}else{d=document.documentElement.scrollTop+document.documentElement.clientHeight;c=document.documentElement.scrollLeft+document.documentElement.clientWidth}}else{if(document.documentElement.clientHeight==document.documentElement.offsetHeight){d=document.body.clientHeight;c=document.body.clientWidth}else{d=document.documentElement.clientHeight;c=document.documentElement.clientWidth}}var j={x:c-f,y:d-g-4};this.layer.setPosition(j)},onShow:function(){}};b.BottomTips=a})(Space.Libs);(function(c){var b=["<div class='bottom-tip' id='#{entity}'>","<div class='bt-title'><span id='#{titleName}'></span><div class='bt-title-close' id='#{btnClose}' action='log:btnClose'></div></div>","<div class='bt-body'>","<div class='bt-content' id='#{content}'></div>","</div>","<div class='bt-foot' id='#{footer}'>","<span id='#{chkDisable}' class='bt-foot-check' action='log:disable' style='float:left;'>","<table border='0' cellspacing='0' action='log:disable'>","<tr action='log:disable'>","<td style='padding-top:2px;*padding-top:0px;width:18px;' action='log:disable'>","<input type='checkbox' id='#{chkBtn}' action='log:disable'></td>","<td action='log:disable' style='*padding-top:1px;'><label action='log:disable'>不再出现此类提示</label></td>","</tr></table></span>","<span class='bt-foot-next' id='#{next}' action='log:toNext' style='float:right;'>查看下一条&gt;&gt;</span>","<span class='clear'></span>","</div>","</div>"].join("");var a=function(j,f){j=j||window.event;var g=baidu.event.getTarget(j);f.onClick({source:g})};var d=function(){var g=this;g.Property={tip:new Space.Libs.BottomTips(b),layer:null,contentTplString:"",confirmBtns:[]};g.Property.layer=g.Property.tip.layer;g.events=new Space.Libs.Events(g);(function f(){var l=g.Property,j=l.layer.getNodes("i");l.tip.onShow=function(){return g.onShow()};baidu.dom.hide(j.next);baidu.on(j.btnClose,"click",function(){g.events.fire("closeClick",g);g.closeAction()});baidu.on(j.chkDisable,"click",function(m){baidu.g(j.chkBtn).checked=true;g.onDisable()});baidu.on(j.next,"click",function(){g.onToNext()});baidu.on(j.entity,"click",function(m){a(m,g)})})()};d.prototype={fill:function(o,n){var m=this.Property,f=m.layer,l=f.getNodes()["titleName"],j=/[^\{\}]+(?=\})/g,g="";l.innerHTML=o;m.contentTplString=n.match(j);g=baidu.string.format(n,this.getContentNodes("i"));f.setContent(g)},getContentNodes:function(q){var o=this.Property,g=q||"o",j={},f=o.contentTplString;uniqueId=o.tip.Property.entityId;if(f){for(var l=0;l<f.length;l++){var n=f[l];switch(g){case"o":j[n]=baidu.g(uniqueId+"_"+n);break;case"i":j[n]=uniqueId+"_"+n;break}}}return j},setToNextVisible:function(g){var f=(g?baidu.dom.show:baidu.dom.hide);f(this.Property.layer.getNodes("i").next)},setConfirmButtons:function(g){if(!g||(g==null)){return}var f=[];if(g.constructor==Array){f=g.concat([])}else{f[0]=g}this.confirmBtns=f},getConfirmButtons:function(){return this.confirmBtns},show:function(){this.Property.tip.show()},hide:function(){this.Property.tip.hidden();this.onHide()},close:function(){var j=this,g=j.Property.tip,f=j.Events;g.beforeClose=function(){return j.beforeClose()};g.close()&&j.destroy()},pullUp:function(){this.Property.tip.pullUp(0)},pushDown:function(){var j=this,g=j.Property.tip,f=j.Events;g.beforeClose=function(){return j.beforeClose()};g.pushDown(0,function(){j.destroy()})},destroy:function(){var g=this.Property,f=g.tip;if(f&&f.dispose){f.dispose()}f=null;g.layer=null;this.onClose()},closeAction:function(){this.close()},beforeClose:function(){var f=this.events.fire("beforeClose",this);return(typeof f=="undefined"?true:f)},onDisable:function(){this.events.fire("disable",this)},onToNext:function(){this.events.fire("toNext",this)},onClick:function(f){this.events.fire("click",this,f)},onClose:function(){this.events.fire("close",this)},onShow:function(){this.events.fire("show",this)},onHide:function(){this.events.fire("hide",this)}};c.NoticeTips=d})(Space.Pubs);Space.Pubs.tipConfig={};Space.Pubs.tipConfig.tpl={leftPhoto:' <div class="bt-leftphoto">			<div class="bt-photoinfo">				<div class="bt-photo50">					<a class=" #{cp_portrait}" target="_blank" href="#{host_space}/sys/checkuser/#{ctx_username}/3" action="log:portrait">						<img width="50" height="50" src="#{host_portrait}/sys/portraitn/item/#{ctx_portrait}.jpg" action="log:portrait" />					</a>				</div>				<div class="bt-photoinfo-name #{cp_username}" title="#{ctx_username}">					<a href="#{host_space}/sys/checkuser/#{ctx_username}/3" target="_blank" class="bt-username" action="log:username">#{ctx_username}</a>				</div>				<div class="bt-photoinfo-sexage #{cp_sexAge}">#{ctx_sexAge}</div>				<div class="bt-photoinfo-addr #{cp_address}" title="#{ctx_address}">#{ctx_address}</div>			</div>			<div class="bt-rightinfo" id="bt-rightinfo">				#{infoContent}				<div class="bt-buttons">				#{btButtons}				</div>			</div>		</div>',photopk:' <div class="bt-photopk">			#{infoContent}			<div class="bt-photovs">				<div class="bt-photo50 bt-vsleft">					<a href="#{host_apps}/photopk/detail/#{ctx_photopkid}?ref=notice" target="_blank" action="log:pkportrait;close">						<img src="#{host_portrait}/sys/portraitn/item/#{ctx_portrait}.jpg" width="50" height="50" action="log:pkportrait;close" />					</a>				</div>				<div class="bt-vs"></div>				<div class="bt-photo50 bt-vsright">					<a href="#{host_apps}/photopk/detail/#{ctx_photopkid}?ref=notice" target="_blank" action="log:pkportrait;close">						<img src="#{host_portrait}/sys/portraitn/item/#{portrait}.jpg" width="50" height="50" action="log:pkportrait;close" />					</a>				</div>			</div>			<div id="bt-buttons" class="bt-buttons">			#{btButtons}			</div>		</div>',defaultTpl:' <div class="bt-default">			#{infoContent}			<div class="bt-buttons">			#{btButtons}			</div>		</div>',badgePass:' <div class="bt-badgepass">			<div class="bt-photo50">				<a class=" #{cp_portrait}" target="_blank" href="#{host_space}/sys/checkuser/#{ctx_username}/3" action="log:portrait">					<img width="50" height="50" src="#{host_portrait}/sys/portraitn/item/#{ctx_portrait}.jpg" action="log:portrait" />				</a>			</div>			<div class="bt-badgenormal"></div>			<div class="bt-badgeinfo">				<div class="bt-style-icondiv">					<div class="bt-style-font14">您的头像已经通过认证！</div>					<span class="bt-style-colorgray">现在已经是真实头像了~<br />快去找朋友吧！</span>					<div class="bt-buttons">					#{btButtons}					</div>				</div>			</div>		</div>'};Space.Pubs.tipConfig.tips=(function(){var b={getbdstoken:function(){var f=document.getElementsByTagName("input"),d="";for(var g=0,c=f.length;g<c;g++){if(f[g].name=="bdstoken"){d=f[g].value;break}}if(d){return d}if(window.gData){d=window.gData.bdstoken}if(d){return d}if(Space.msgConfig){return Space.msgConfig.spToken}return false},refuseSuliao:function(c,f){var g=c.msg,l=Space.Pubs.tipConfig.postIframe;if(!l){l=new Space.Libs.IframeLoader();Space.Pubs.tipConfig.postIframe=l}var d=Space.msgConfig.appsDomain+"/suliao/submit/send",j={bdstoken:this.getbdstoken(),portrait:g.portrait,category:0,type:3,extra:f};l.request(d,j);if((typeof SL!="undefined")&&SL.insPool&&SL.insPool.messager&&SL.insPool.messager.refuseDeal){SL.insPool.messager.refuseDeal()}}};var a={"portrait-passed":{levels:{ihome:1,apps:1,blog:1},showTime:60,title:"头像审核通知",tpl:"badgePass",buttons:[{id:"goToFindBtn",text:"找朋友",href:"#{host_space}/#{spaceUrl}/ihome/square",preventDefault:false}]},"portrait-fail":{levels:{ihome:1,apps:1,blog:1},showTime:60,title:"头像审核通知",tpl:"defaultTpl",tplArgs:{infoContent:' <div class="bt-style-font14 bt-style-colorred">真遗憾，你的头像没有通过认证哦！</div>	        <ul class="bt-style-ul">	            <li class="bt-style-colorgray">需要本人<strong>清晰照片</strong>才能通过审核</li>	            <li class="bt-style-colorgray">头像需要与资料中的<strong>年龄和性别一致</strong>才可通过审核</li>	        </ul>'},buttons:[{id:"reUploadBtn",text:"重新上传",href:"#{host_space}/#{spaceUrl}/ihome/basicconfig#tab=Photo",preventDefault:false}]},"duiwei-unknow":{levels:{ihome:2,apps:2,blog:2},showTime:60,title:"#{username},有人想和你测试",tpl:"leftPhoto",tplArgs:{infoContent:' <div class="bt-style-font14">						有一名网友向你发出邀请~<br />						他想测一测你们的缘分					</div>'},tplContentPolicy:{cp_portrait:"hidden",cp_username:"hidden",cp_sexAge:"hidden",cp_address:"hidden"},buttons:[{id:"receivedBtn",text:"接受邀请",href:"#{host_apps}/duiwei/show?portrait=#{ctx_portrait}&from=notice&type=simple",preventDefault:false}]},"visitor-browsed":{levels:{ihome:2,apps:2,blog:2},showTime:60,title:"#{username},有人浏览了你的空间",tpl:"leftPhoto",tplArgs:{infoContent:' <div class="bt-style-font14">						<a href="#{host_space}/sys/checkuser/#{ctx_username}/3" target="_blank" class="bt-username" action="log:username">#{ctx_username}</a>浏览了你的空间，TA正在等待你的回访~					</div>'},tplContentPolicy:{cp_address:"hidden"},buttons:[{id:"viewBtn",text:"现在就去",href:"#{host_space}/sys/checkuser/#{ctx_username}/3",preventDefault:false}]},"dashan-info":{levels:{ihome:2,apps:2,blog:2},showTime:60,title:"#{username},有人向你打招呼",tpl:"leftPhoto",tplArgs:{infoContent:' <div class="bt-style-font14">						有人看了你的个人资料，想认识你，赶快看看Ta是谁吧！					</div>'},tplContentPolicy:{cp_username:"hidden",cp_portrait:"hidden",cp_address:"hidden",cp_sexAge:"hidden"},buttons:[{id:"viewBtn",text:"点击查看",href:"#{host_apps}/dashan/show/guess",preventDefault:false}]},"dashan-psrefer":{levels:{ihome:2,apps:2,blog:2},showTime:60,title:"#{username},有人向你打招呼",tpl:"leftPhoto",tplArgs:{infoContent:' <div class="bt-style-font14">						有人看了你的个人资料，想认识你，赶快看看Ta是谁吧！					</div>'},tplContentPolicy:{cp_username:"hidden",cp_portrait:"hidden",cp_address:"hidden",cp_sexAge:"hidden"},buttons:[{id:"viewBtn",text:"点击查看",href:"#{host_apps}/dashan/show/list?message=1&type=search",preventDefault:false}]},"friend-request":{levels:{ihome:3,apps:3,blog:3},showTime:60,title:"#{username},有人想和你成为好友",tpl:"leftPhoto",tplArgs:{infoContent:' <div class="bt-style-font14">						<a href="#{host_space}/sys/checkuser/#{ctx_username}/3" target="_blank" class="bt-username" action="log:username">#{ctx_username}</a>想和你成为好友~<div class="clear"></div>						<div class="bt-infotip #{cp_message}" title="#{ctx_message_title}"><div class="bt-infotip-inner">#{ctx_message}</div></div>					</div>'},tplContentPolicy:{cp_username:"hidden"},buttons:[{id:"viewBtn",text:"点击查看",href:"#{domain}/msg/index?from=act#msgcontent",preventDefault:false}]},"gift-received":{levels:{ihome:1,apps:1,blog:1},showTime:60,title:"#{username},有人送你礼物了",tpl:"leftPhoto",tplArgs:{infoContent:' <div class="bt-style-font14">						<a href="#{host_space}/sys/checkuser/#{ctx_username}/3" target="_blank" class="bt-username" action="log:username">#{ctx_username}</a>送你神秘礼物一份！快去看看吧~					</div>'},tplContentPolicy:{cp_username:"hidden"},buttons:[{id:"viewBtn",text:"点击查看",href:"#{domain}/msg/index?from=sys#msgcontent",preventDefault:false}]},"photopk-vote":{levels:{ihome:1,apps:1,blog:1},showTime:60,title:"#{username},有人邀请你帮TA投票",tpl:"photopk",tplArgs:{infoContent:' <div class="bt-style-font14">					<span class="bt-username">#{ctx_username}</span>正在进行照片pk，邀请你帮TA投票~				</div>'},buttons:[{id:"acceptBtn",text:"接受邀请",href:"#{host_apps}/photopk/detail/#{ctx_photopkid}?ref=notice",preventDefault:false}]},"photopk-invite":{levels:{ihome:2,apps:2,blog:2},showTime:60,title:"#{username},有人想和你玩照片PK",tpl:"photopk",tplArgs:{infoContent:' <div class="bt-style-font14">					有人想和你比一比，谁的照片更美~				</div>'},buttons:[{id:"acceptBtn",text:"接受邀请",href:"#{host_apps}/photopk/detail/#{ctx_photopkid}?ref=notice",preventDefault:false}]},"suliao-invite":{levels:{ihome:4,apps:4,blog:4},showTime:90,title:"#{username},有人想和你聊天",tpl:"leftPhoto",tplArgs:{infoContent:' <div id="suliao-invite-content">						<div class="bt-style-font14">							<a href="#{host_space}/sys/checkuser/#{ctx_username}/3" target="_blank" class="bt-username" action="log:username">#{ctx_username}</a>想和你聊天~<div class="clear"></div>							<div class="bt-infotip #{cp_message}" title="#{ctx_message_title}"><div class="bt-infotip-inner">#{ctx_message}</div></div>						</div>					</div>					<div id="suliao-refused-content">						<div class="bt-style-font14">55~为什么要拒绝我呀？</div>						<input id="bt-refused-text" class="bt-inputtext" type="text" size="25" maxlength="16" value="我暂时不想聊天哦~"/>						<span id="bt-refused-info" class="bt-inputtext-info">0/16</span>					</div>'},runtime:function(g){var d=g.getContentNodes(),c=baidu.g("bt-refused-text"),j=baidu.g("bt-refused-info");baidu.dom.hide("suliao-refused-content");baidu.dom.hide(d.sendBtn);baidu.dom.hide(d.cancelBtn);baidu.event.on(c,"focus",function(){if(c.value=="我暂时不想聊天哦~"){c.value=""}});baidu.event.on(c,"blur",function(){if(c.value==""){c.value="我暂时不想聊天哦~"}});var f=function(){var l=c.value=="我暂时不想聊天哦~"?"":c.value;j.innerHTML=l.length+"/16"};baidu.event.on(c,"keyup",f);baidu.event.on(c,"change",f);g.events.on("close",function(m,l){if(!m.isTimeout&&!m.isCompleted&&!m.isDisabled){b.refuseSuliao(m,"")}})},buttons:[{id:"acceptBtn",text:"接受",href:"#{host_apps}/suliao?portrait=#{ctx_portrait}&action=accept",target:"appSuliao",getPreventDefault:function(){return(((typeof SL!="undefined")&&SL.insPool&&SL.insPool.messager)?true:false)},onclick:function(){var c=this,d=c.msg;c.isCompleted=true;if((typeof SL!="undefined")&&SL.insPool&&SL.insPool.messager){SL.insPool.messager.acceptFromOutside({portrait:d.portrait,extra:d.extra});return false}}},{id:"refusedBtn",text:"拒绝",href:"#",preventDefault:true,style:"gray",onclick:function(){var d=this,c=d.getContentNodes();baidu.dom.hide("suliao-invite-content");baidu.dom.hide(c.acceptBtn);baidu.dom.hide(c.refusedBtn);baidu.dom.show("suliao-refused-content");baidu.dom.show(c.sendBtn);baidu.dom.show(c.cancelBtn)}},{id:"sendBtn",text:"发送",href:"#",preventDefault:true,onclick:function(){var c=this;b.refuseSuliao(c,encodeURIComponent(baidu.g("bt-refused-text").value));c.isCompleted=true;c.closeAction()}},{id:"cancelBtn",text:"取消",href:"#",preventDefault:true,style:"gray",onclick:function(){var d=this,c=d.getContentNodes();baidu.dom.hide("suliao-refused-content");baidu.dom.hide(c.sendBtn);baidu.dom.hide(c.cancelBtn);baidu.dom.show("suliao-invite-content");baidu.dom.show(c.acceptBtn);baidu.dom.show(c.refusedBtn)}}]}};return a})();(function(g){var d=' <a id="#{id}" class="bt-btn-outer #{style}" href="#{href}" #{onclick} action="#{action}" target="#{target}">			<div class="bt-btn-inner" action="#{action}">#{text}</div>		</a>',c=Space.Pubs.tipConfig;var a=function(j,l){return j.indexOf("#{")>-1?baidu.string.format(j,l):j};var b=function(o,p){var l=o.tipKey,j=c.tips[l];if(!j){throw new Error('there is no config for tipkey "'+l+'"');return}var m=c.tpl[j.tpl],n={domain:Space.msgConfig.domain,username:Space.msgConfig.userName,portrait:Space.msgConfig.userPortrait,spaceUrl:Space.msgConfig.spaceUrl,host_space:Space.msgConfig.domain,host_apps:Space.msgConfig.appsDomain,host_portrait:Space.msgConfig.portraitDomain};var q=function(D){if(D){for(var u in D){n[u]=D[u]}}for(var s in o){n["ctx_"+s]=o[s]}if(n.ctx_message!=undefined){var t=n.ctx_message;if(!t){n.cp_message="bt-cp-hidden"}else{n.ctx_message_title=t;if(baidu.string.getByteLength(t)>30){n.ctx_message=baidu.string.subByte(t,27)+".."}}}if(j.tplContentPolicy){for(var A in j.tplContentPolicy){n[A]="bt-cp-"+j.tplContentPolicy[A]}}if(j.tplArgs){for(var C in j.tplArgs){var B=j.tplArgs[C];n[C]=a(B,n)}}if(j.buttons){var v=[];for(var x=0;x<j.buttons.length;x++){var z=j.buttons[x];var r={id:"#{"+z.id+"}",text:a(z.text,n),href:a(z.href,n),target:a(z.target||"_blank",n),style:z.style?"bt-btn-"+z.style:"",onclick:((z.getPreventDefault&&z.getPreventDefault())||z.preventDefault)?'onclick="return false;"':"",action:"log:"+z.id+(z.preventDefault?"":";close")};v.push(baidu.string.format(d,r))}}n.btButtons=v.join("");var y=baidu.string.format(m,n);p({tpl:y,title:baidu.string.format(j.title,n)})};if(j.beforeShow){j.beforeShow(q)}else{q()}};var f=function(n,o){var j=c.tips[n],l=j.buttons;if(!j){throw new Error('there is no config for tipkey "'+n+'"');return}for(var m=0;m<l.length;m++){var p=l[m];if(p.onclick){baidu.event.on(o.getContentNodes()[p.id],"click",p.onclick.bind(o))}}if(j.runtime){j.runtime(o)}if(j.dispose){o.events.on("beforeClose",j.dispose)}};g.tipCfgManager={getTpl:b,bindEvent:f}})(Space.Pubs);(function(a){var b={$1_23_1:"portrait-passed",$1_23_2:"portrait-fail",$1_5000_1:"gift-received",$1_5007_2:"dashan-info",$1_5008_1:"photopk-invite",$1_5010_3:"duiwei-unknow",$2_52_1:"friend-request",$4_20_1:"visitor-browsed",$4_23_1:"visitor-browsed",$4_24_1:"visitor-browsed",$4_25_1:"visitor-browsed",$4_26_1:"visitor-browsed",$4_28_1:"visitor-browsed",$5_5007_1:"dashan-info",$5_5014_1:"suliao-invite",$0_0_1:"dashan-psrefer",getMsgConfig:function(g,m,j){var d="$"+g+"_"+m+"_"+j,l=this[d];if(l){var f=l.split("-");return{category:f[0],tipKey:l}}},restoreCategory:function(f){if(f){for(var g in this){if(this[g]===f){var d=g.substr(1).split("_");return{msgType:d[0],srcType:d[1],templateId:d[2]}}}}}};var c=function(){var f=this,d=null;f.msgId="";f.category="";f.tipKey="";f.intMType=-1;f.mid=-1;f.portrait="";f.portraitHtml="";f.username="";f.age=0;f.gender="";f.sexAge="";f.province="";f.city="";f.address="";f.message="";f.photopkid="";f.config=undefined;f.level=-1;f.isEffective=false;f.getLevel=function(){if(f.level>=0){return f.level}var g=f.config;if(g){var j=g.levels[Space.msgConfig.pageType];f.level=j||0}return f.level};f.getTpl=function(){if(f.isEffective&&(d==null)){Space.Pubs.tipCfgManager.getTpl(f,function(g){d={};d.title=g.title;d.tpl=g.tpl})}return d}};c.parse=function(o){var x=[],r=o.msg,u=o.transfer,p=o.__NoticeDealed,f=null,v=null,s=null;function m(z){z.level=z.getLevel();z.sexAge=baidu.string.format("<span style='float:left;'>#{s}</span><span style='float:right;'>#{a}</span><span class='clear'></span>",{s:z.gender,a:(z.age>0?z.age+"岁":"")});z.address=z.province;if(z.category=="portrait"){z.portrait=Space.msgConfig.userPortrait}if(z.portrait&&(z.portrait!="")&&(z.portrait!="ab300914313143bd")){var y="<img src='#{url}' alt='portrait' height='50' width='50' />",A=(z.portrait.toLowerCase()==Space.msgConfig.userPortrait.toLowerCase()),l={userPortrait:"#{userPortrait}"};l.url=Space.msgConfig.portraitDomain+"/sys/portrait/item/"+z.portrait+".jpg";if(!A){y="<a href='#{linkUrl}' id='#{userPortrait}'>"+y+"</a>";l.linkUrl=Space.msgConfig.domain+"/sys/checkuser/"+z.username}z.portraitHtml=baidu.string.format(y,l)}}for(var n=0,j=r.length;n<j;n++){v=r[n];f=new Space.Pubs.NoticeMessage();var q=b.getMsgConfig(v.msg_type,v.src_type,v.template_id);if(q){f.isEffective=true;f.category=q.category;f.tipKey=q.tipKey;f.config=Space.Pubs.tipConfig.tips[f.tipKey];if(!f.config){f.isEffective=false}}else{f.isEffective=false}if(f.isEffective){f.msgId=v.msgId||Space.Libs.getRandomId();v.msgId=v.msgId||f.msgId;f.intMType=v.msg_type||-1;f.mid=v.mid||-1;s=v.content;if(s&&(s!=null)){if(s.constructor==String){s=baidu.json.decode(s)}f.portrait=s.user_portrait;f.username=decodeURI(s.user_name);var t=s.user_info;if(t){f.age=t.age||0;f.gender=t.gender;if(f.gender=="0"){f.gender="女"}else{if(f.gender=="1"){f.gender="男"}else{f.gender=""}}f.province=decodeURI(t.reside_province||"");f.city=decodeURI(t.reside_city||"")}f.extra=decodeURI(s.content);if((f.category=="suliao")&&f.extra){var d=f.extra.split("|");if(d.length>1){f.message=d[d.length-2]}}else{f.message=f.extra}f.photopkid=s.pkid}if(v.cusCfg){f.tag=v.cusCfg.tag;if(v.cusCfg.levels){var g=v.cusCfg.levels[Space.msgConfig.pageType];f.level=g||0}}if(f.isEffective){m(f)}}f.isTransfer=u;f.isNoticeDealed=p;x[x.length]=f}return x};c.analyseCategory=function(d){return b.restoreCategory(d)};c.isNoticeMessage=function(f){if(!f){return false}var d=b.getMsgConfig(f.msg_type,f.src_type,f.template_id);return(d?true:false)};a.NoticeMessage=c})(Space.Pubs);(function(b){var a={tips:[],activeTip:null,create:function(c,d){if(!c||(c==null)){throw new Error("the 1st para of funciton Space.Pubs.NoticeTipManager.create can't be null!")}var g=this,f=new Space.Pubs.NoticeTips();f.fill(c.title,c.tpl);f.name=d||Space.Libs.getRandomId();g.tips.push(f);g.activeTip=f;f.events.on("show",function(o,l){var m=o,j=g.tips;if(m.isHidden){m.isHidden=false}if(j[j.length-1]!=m){for(var n=j.length-2;n>=0;n--){if(j[n].name==m.name){j[j.length]=j[n];j.splice(n,1);break}}}g.activeTip=m});f.events.on("close",function(m,j){var l=m.name;g.removeTip(l)});f.events.on("hide",function(m,j){var l=m;l.isHidden=true;if(l==g.activeTip){g.updateActiveTip()}});return f},getTip:function(d){if(d){var c=this.tips;for(var f=c.length-1;f>=0;f--){if(c[f].name==d){return c[f]}}return null}else{return this.activeTip}},removeTip:function(d){var c=this.tips;d=d||(activeTip?activeTip.name:"");if(d){for(var f=c.length-1;f>=0;f--){if(c[f].name==d){c.splice(f,1);if(d==this.activeTip.name){this.updateActiveTip()}break}}}},updateActiveTip:function(){var c=this.tips,f=null;this.activeTip=null;for(var d=c.length-1;d>=0;d--){f=c[d];if(!f.isHidden){this.activeTip=c[d];break}}},closeTip:function(c){var d=(c?this.getTip(c):this.activeTip);if(d){d.close()}}};b.NoticeTipManager=a})(Space.Pubs);(function(b){var a=function(){var u=this,m=Space.Libs.getRandomId(),d=new Space.Libs.PriorityQueue("level",true),t=[],G={data:{}},y={msg:null,tip:null,timer:null,postFormId:"",isHold:false};u.curTipInfo=y;t.start=function(){var H=this,I;y.isHold=false;if(H.length>0){while(!y.isHold&&(H.length>0)){I=H.shift();if(I){g(I)}else{break}}}};t.findFirstBy=function(J,K){var H=this;for(var I=H.length-1;I>=0;I--){if(H[I][J]==K){return H[I]}}};t.removeAllBy=function(J,K){var H=this;for(var I=H.length-1;I>=0;I--){if(H[I][J]==K){H.splice(I,1)}}};G.isLoaded=false;G.load=function(N){var H=this;if(!H.loaded){var K="Space.Notice.Setting",L=false,M=function(Q,P){for(var O in Q){H.data[O]=(Q[O]=="0"?true:false)}H.isLoaded=true;if(N){N()}if(P){H.ciToCache()}};window.NoticeOperator=u;try{L=Space.Libs.Storage.get(K)}catch(J){L=false}if(L){M(L,false)}else{var I=Space.msgConfig.domain+"/"+Space.msgConfig.spaceUrl+"/ihome/data/noticesetting?asyn=1";u.loadBack=function(O){M(O,true)};baidu.sio.callByServer(I,"top.NoticeOperator.loadBack")}}};G.getAccept=function(H){return(this.data[H]?true:false)};G.setAccept=function(I,H){this.data[I]=(H?true:false);this.ciToCache()};G.update=function(L){if(!L){return}var H=this,I=[],K;for(var J in L){K=(L[J]=="0"?true:false);if(H.data[J]!=K){H.data[J]=K;I[I.length]=J}}H.isLoaded=true;H.ciToCache();return I};G.ciToCache=function(){var H="Space.Notice.Setting",K={};for(var J in this.data){K[J]=(this.data[J]?"0":"1")}try{Space.Libs.Storage.set(H,K,1*60*60*1000)}catch(I){}};function A(L,K){var H=G.update(L);if(!K){var M=[];for(var J in L){M.push(J+"_"+L[J]+",")}x("upSetting",M.join(""))}for(var I=H.length-1;I>=0;I--){if(!G.getAccept(H[I])){z(H[I])}}}function p(){return m}function c(J){var I=J.isEffective&&(J.level>0)&&!d.findFirstBy("msgId",J.msgId)&&!t.findFirstBy("msgId",J.msgId),H=false;if(I&&(J.category!="suliao")){H=d.findFirstBy("category",J.category)||t.findFirstBy("category",J.category);I=!H}return{isEffective:I,sameCategory:H}}function o(K){var J=Space.Pubs.NoticeMessage.parse(K),L=false;for(var I=0,H=J.length;I<H;I++){L=g(J[I])}K.__NoticeDealed=true;return L}function g(K){var I=c(K),H=I.isEffective;if(G.isLoaded&&!G.getAccept(K.category)){if(H&&!K.isTransfer&&!K.isNoticeDealed){F("ban:"+K.category,K.tag)}return false}if(!H&&I.sameCategory&&!K.isNoticeDealed){if(!K.isTransfer){F("samecat:"+K.category,K.tag)}}if(y.isHold){t[t.length]=K;return H}if(!G.isLoaded){f();G.load(function(){y.isHold=false;g(K);t.start()});return}if(H){d.add(K);if(y.msg!=null){if(K.level>y.msg.level){y.msg._isToBack=true;y.tip.close()}else{y.tip.setToNextVisible(true)}}else{var J=l(K);J.msg=K;y.tip=J;y.msg=K;J.pullUp()}}return H}function s(I){var H=d.findFirstBy("msgId",I)||t.findFirstBy("msgId",I);return(H?true:false)}function f(){y.isHold=true}function l(J){var H=J.tipKey,I=Space.Pubs.NoticeTipManager.create(J.getTpl(),r(J));if(J.config.beforeShowFunc){J.config.beforeShowFunc(I)}if(!J.isCustomMsg){Space.Pubs.tipCfgManager.bindEvent(H,I)}I.setToNextVisible(d.getLength()>1);v(I,J);I.msg=J;return I}function v(I,H){I.closeAction=function(){return(d.getLength()>1?this.close():this.pushDown())};I.events.on("show",function(L,J){var K=H.config.showTime*1000;y.timer=setTimeout(function(){L.isTimeout=true;L.closeAction()},K);F("alshow:"+y.msg.category,y.msg.tag);if(!y.msg.isTransfer){F("show:"+y.msg.category,y.msg.tag)}});I.events.on("beforeClose",function(K,J){if(y.timer!=null){window.clearTimeout(y.timer);y.timer=null}return true});I.events.on("close",function(N,S){if((y.msg==null)||(N!=y.tip)){return}var Q=y.msg,K=Q.msgId,P=Q.mid,T=Q.intMType,J=y.msg._isToBack||false,L=N.isTimeout;if(!J){try{window.SpNet.sendCmd("close_bpop")}catch(O){}d.remove(Q)}y.msg=null;y.tip=null;if(d.getLength()>0){var M=d.first();nextTip=l(M);y.msg=M;y.tip=nextTip;nextTip.show()}if(!J){x("markread",K);if(!L&&P&&(P>=0)){if(!y.postFormId){y.postFormId=C()}var R=B();baidu.G(R.intMtype).value=T;baidu.G(R.strMid).value=P;baidu.G(R.strNoteMid).value=(T==1?P:"");baidu.G(R.bdstoken).value=Space.msgConfig.spToken;baidu.G(R._t).value=Space.Libs.getRandomId();baidu.G(y.postFormId).submit()}}if(J){Q._isToBack=false}});I.events.on("toNext",function(K,J){K.close()});I.events.on("disable",function(L,K){f();var N=H.category;var O=y.ifr,M=Space.msgConfig.domain+"/"+Space.msgConfig.spaceUrl+"/ihome/submit/noticesetting",J={bdstoken:Space.msgConfig.spToken,callback:"top.NoticeOperator.onTipDis",myDomain:document.domain};J[N]="1";if(!O){y.ifr=O=new Space.Libs.IframeLoader()}if(!window.NoticeOperator){window.NoticeOperator=u}O.request(M,J)});I.events.on("click",function(M,R){var O=R.getData().source,K=(O?O.getAttribute("action"):"");if(K){var L=K.split(";"),P=null,Q=false;for(var N=0,J=L.length;N<J;N++){P=L[N];if(P.indexOf("log:")==0){F("click-"+P.substr(4)+":"+y.msg.category,y.msg.tag)}else{if(P=="close"){Q=true}}}if(Q){M.closeAction()}}})}function E(K){if(!K){return}if(K.errNo==0){var J=y.msg,I=y.tip,H=J.category;G.setAccept(H,false);J.category=H+"$temp";d.removeAllBy("category",H);J.category=H;x("disable",H);var L=(d.getLength()>1)?function(){I.isDisabled=true;I.close()}:function(){I.isDisabled=true;I.pushDown()};L();t.start()}else{if(K.errNo==2001){window.location.reload(true)}}}function C(){var H=["<form id='#{id}' name='#{id}' method='post' target='#{ifrName}' action='#{url}' style='display:none;'>","<input type='hidden' name='intMtype' id='#{id}_intMtype' />","<input type='hidden' name='strMid' id='#{id}_strMid' />","<input type='hidden' name='_t' id='#{id}__t' />","<input type='hidden' name='strNoteMid' id='#{id}_strNoteMid'>","<input type='hidden' name='bdstoken' id='#{id}_bdstoken' />","</form>","<iframe id='#{ifrName}' name='#{ifrName}' style='display:none;'></iframe>"].join(""),J="postDataForm"+Space.Libs.getRandomId(),I="forSubmit"+Space.Libs.getRandomId();baidu.dom.insertHTML(document.body,"beforeEnd",baidu.string.format(H,{id:J,ifrName:I,url:Space.msgConfig.domain+"/msg/msg_dataSetRead"}));return J}function B(){var H=y.postFormId;if(H){var I={};I.intMtype=H+"_intMtype";I.strMid=H+"_strMid";I.strNoteMid=H+"_strNoteMid";I.bdstoken=H+"_bdstoken";I._t=H+"__t";return I}}function r(H){return(H.msgId||(H.tipKey+"_"+Space.Libs.getRandomId()))}function D(N){if(N.source==m){return}var M=N.command,L=N.data;switch(M){case"markread":q(L);break;case"disable":z(L);break;case"upSetting":var K={},H=L.split(","),J;for(var I=H.length-1;I>=0;I--){if(H[I]){J=H[I].split("_");K[J[0]]=J[1]}}A(K,true);break;default:break}}function q(I){var H=d.findFirstBy("msgId",I)||t.findFirstBy("msgId",I);if(H){if(I==y.msg.msgId){y.tip.isTimeout=true;y.tip.closeAction()}else{d.remove(H);j()}}}function z(I){if(typeof I=="undefined"){return}G.setAccept(I,false);if(y.msg==null){return}var H=y.msg,J=H.category;H.category=J+"$temp";d.removeAllBy("category",I);t.removeAllBy("category",I);H.category=J;if(J==I){y.tip.isTimeout=true;y.tip.closeAction()}else{j()}}function j(){var H=y.tip;if(H!=null){H.setToNextVisible(d.getLength()>1)}}function x(I,H){Space.Libs.CommandCenter.getInstance().sendCommand(u,I,H)}function F(I,H){H=H||"notice";Space.Libs.hi_trackerLink(H+">"+I+"-T110525")}function n(I){var H={isNotice:false},K=Space.Pubs.NoticeMessage.parse({msg:[I]}),J=(K.length>0?K[0]:false);H.isNotice=(J&&J.isEffective?true:false);if(H.isNotice){H.isAccept=(G.isLoaded?G.getAccept(J.category):"unknown");H.isAbandoned=(H.isAccept===true&&!s(J.msgId))}return H}u.receiveData=o;u.processData=g;u.hasMessage=s;u.processCommand=D;u.getUniqueKey=p;u.onTipDis=E;u.updateSetting=A;u.getMessageStatus=n};b.NoticeOperator=new a()})(Space.Pubs);(function(a){var b={show:function(f,j,c){var d=a.NoticeMessage.analyseCategory(f);if(!d){return}c=c||{};var l={msg_type:d.msgType,src_type:d.srcType,template_id:d.templateId,message:1,ring:c.ring||0,content:{user_portrait:j.portrait,user_name:(j.userName?encodeURI(j.userName):""),content:(j.content?encodeURI(j.content):""),user_info:{age:j.age,gender:j.gender,reside_province:(j.province?encodeURI(j.province):""),reside_city:(j.city?encodeURI(j.city):"")}}};l.cusCfg={};if(c.levels){l.cusCfg.levels=c.levels}if(c.tag){l.cusCfg.tag=c.tag}l.msgId="msg_"+Space.Libs.getRandomId();var g=Space.Pubs.NoticeMessage.parse({mod:"single",msg:[l]})[0];g.level=g.getLevel();if(g.config&&c.beforeShowFunc){g.config.beforeShowFunc=c.beforeShowFunc}Space.Pubs.NoticeOperator.processData(g)},showCustomTip:function(f,c){var d={};baidu.extend(d,f);d.msgId=d.msgId||"cusMsg_"+Space.Libs.getRandomId();f.msgId=d.msgId;d.config=c;d.isCustomMsg=true;d.isEffective=true;d.getTpl=function(){return{title:"",tpl:""}};d.level=-1;d.getLevel=function(){var l=this;if(l.level>=0){return l.level}var g=l.config;if(g){var j=g.levels[Space.msgConfig.pageType];l.level=j||0}return l.level};d.level=d.getLevel();if(c.tag){d.tag=c.tag}a.NoticeOperator.processData(d)},getTip:function(c){return a.NoticeTipManager.getTip(c)}};a.NoticeManager=b})(Space.Pubs);if(typeof window.Libs=="undefined"){window.Libs={}}(function(a){function b(j,l,g,c,f,d){this.userName=j;this.portrait=l;this.domain=g;this.appsDomain=f;this.staticDomain=d;this.portraitDomain=c;this.iframe=new Space.Libs.IframeLoader()}b.prototype={initTitle:function(){this.setTitle('<p style="margin:0;font-size:14px;font-weight:bold">有人想和你聊天</p>')},showTip:function(g){this.initLayer(this.HTML());this.bindEvent();this.initTitle();var d=this;var c=this.layer.getNodes();c.slAccept.href=this.appsDomain+"/suliao?portrait="+this.portrait+"&action=accept";c.slAccept.target="appSuliao";c.slPortrait.src=this.portraitDomain+"/sys/portraitn/item/"+this.portrait+".jpg";c.slInfo.innerHTML=g.cuname+"想和你聊天，<br/>TA说:“"+j(g.extra.split("|")[3])+"”";c.slLink.href=this.domain+"/sys/checkuser/"+g.cuname;c.slName.innerHTML=g.cuname;baidu.on(c.slRefuse,"click",function(){window.SpNet.sendCmd("close_bpop");d.hidden();f()});baidu.on(c.btnClose,"click",function(){window.SpNet.sendCmd("close_bpop");d.hidden();f()});baidu.on(c.slAccept,"click",function(){window.SpNet.sendCmd("close_bpop");d.hidden()});this.show();function j(m){return m.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>")}function f(){var n={domain:d.appsDomain,portrait:d.portrait,type:3,extra:""};var m=n.domain+"/suliao/submit/send";var o={bdstoken:l(),portrait:n.portrait,category:0,type:n.type,extra:n.extra};d.iframe.request(m,o)}function l(){var p=document.getElementsByTagName("input");for(var q=0,o=p.length;q<o;q++){if(p[q].name=="bdstoken"){return p[q].value}}if(window.gData){return window.gData.bdstoken}if(Space.msgConfig){return Space.msgConfig.spToken}return false}if(window.$isHost){Space.Libs.imgLog("http://apps.hi.baidu.com/suliao/data/stat?event=invitepop&r="+ +new Date())}},beforeClose:function(){return true},HTML:function(){var c=['<div class="bpopMax" id="#{entity}">','<div class="ptitle">','<div class="pinfo" id="#{titleName}"></div>','<div class="bmin" id="#{btnMin}"></div>','<div class="bmax" style="display:none" id="#{btnMax}"></div>','<div class="bclose" id="#{btnClose}"></div>',"</div>",'<div class="bcontent" id="#{content}">','<a href="#" id="#{slLink}" target="_blank"><img id="#{slPortrait}" style="padding:2px;background:white;border:1px solid #999;position:absolute;top:5px" width="50" height="50"/>','<span id="#{slName}" style="position:absolute;top:65px;left:0px;font-size:12px;font-weight:bold;color:#333;cursor:pointer"></span></a>','<div id="#{slInfo}" style="float:left;position:absolute;left:70px;top:5px;font-size:14px;line-height:22px;" ></div>','<a id="#{slAccept}" style="cursor:pointer;position:absolute;left:90px;top:100px;border:none;background:url('+this.staticDomain+'/static/apps/suliao/img/tip_accept.png);width:73px;height:27px;"></a>','<a id="#{slRefuse}" style="cursor:pointer;position:absolute;left:170px;top:100px;border:none;background:url('+this.staticDomain+'/static/apps/suliao/img/tip_refuse.png);width:73px;height:27px;"></a>',"</div>",'<div class="bbottom">',"</div>","</div>"].join("");return c}};Class.extend(b.prototype,Space.Libs.BottomTips.prototype,true);a.SuliaoTips=b;window.$trace&&window.console&&window.console.log("base-luorui-33")})(Space.Pubs);(function(a){var c={msgEleId:"topMsgTab",msgIconId:"msgInbox",mailIcon:"topMsgMail",actIcon:"topMsgAct",sysIcon:"topMsgSys",layer_play:"topMsgPlayBtn",layer_close:"topMsgCloseBtn"};var b=function(d){this._inboxEle=baidu.g(d);this._initHTML()};b.prototype={_inboxEle:null,_spaceUrl:null,_msgUrl:"",_msgPath:"/msg/msg_dataGetmsgCount",_sysNum:0,_actNum:0,_mailNum:0,_callbacks:[],_spaceDomain:"",clickCallback:function(){},_showMsgNum:function(d){if(parseInt(d)>0){return'<span class="t_red">'+d+"</span>条新"}else{return'<span class="t_ccc">无新消息提醒</span>'}},_initHTML:function(){this._inboxEle.innerHTML='<a class="" href="'+this._spaceDomain+'msg/index" id="'+Space.Pubs.mStaticIds.msgEleId+'">消息</a>				<a id="'+Space.Pubs.mStaticIds.msgIconId+'" href="#"></a>';this.layer=new Space.Libs.Layer('<div style="display: none;" id="#{entity}" >				<div class="msglist" id="#{content}">					<div id="'+Space.Pubs.mStaticIds.mailIcon+'" class="icon3"></div>					<div id="'+Space.Pubs.mStaticIds.actIcon+'" class="icon1"></div>					<div id="'+Space.Pubs.mStaticIds.sysIcon+'" class="icon4"></div>					<div id="'+Space.Pubs.mStaticIds.layer_play+'" class="sound">&nbsp;</div>					<div id="'+Space.Pubs.mStaticIds.layer_close+'" class="close" title="关闭">&nbsp;</div>				</div>			</div>',this._inboxEle);this.layer.setZIndex(99999);this.addIframe();this.bindEvent();if(!$IE){this.layer.getNodes()["entity"].style.position="fixed"}},addIframe:function(){var f="ml_iframe_"+Space.Libs.getRandomId();var d='<iframe id="'+f+'" style="position: absolute; z-index: 99998;" width="230" height="85"></iframe>';baidu.dom.insertHTML(this.layer.getNodes()["entity"],"beforeEnd",d);this.ifm=baidu.g(f);baidu.setStyle(this.ifm,"opacity",0)},bindEvent:function(){baidu.on(baidu.g(Space.Pubs.mStaticIds.layer_close),"click",this.close.bind(this));baidu.on(window,"scroll",this.layerFixed.bind(this));baidu.on(baidu.g(this._inboxEle),"mouseover",this.mouseShow.bind(this));baidu.on(baidu.g(this._inboxEle),"mouseout",this.mouseHidden.bind(this))},mouseShow:function(){if(this.isPoping){return}this.show()},mouseHidden:function(){if(this.isPoping){return}this.hidden()},pop:function(){this.isPoping=true;this.show()},layerFixed:function(){var f=baidu.g(Space.Pubs.mStaticIds.msgEleId);var j={};if($IE){j.x=20}else{j.x=baidu.dom.getPosition(f).left+20}var g=29;var d;if($CHROME||document.documentElement.clientHeight==0){d=document.body.scrollTop}else{d=document.documentElement.scrollTop}if(d<g){if($IE){j.y=d+g}else{j.y=g}}else{if($IE){j.y=d+0}else{j.y=0}}this.layer.setPosition(j)},upNum:function(){var d=true;if(this._sysNum==0&&this._actNum==0&&this._mailNum==0){d=false}baidu.g(Space.Pubs.mStaticIds.mailIcon).innerHTML="<nobr>站内消息 ："+this._showMsgNum(this._mailNum)+"</nobr>";baidu.g(Space.Pubs.mStaticIds.actIcon).innerHTML="<nobr>互动请求 ："+this._showMsgNum(this._actNum)+"</nobr>";baidu.g(Space.Pubs.mStaticIds.sysIcon).innerHTML="<nobr>系统通知 ："+this._showMsgNum(this._sysNum)+"</nobr>";if(d){baidu.g(Space.Pubs.mStaticIds.msgIconId).innerHTML='<img src="http://img.baidu.com/hi/img/email_s.gif">'}baidu.dom.addClass(this._inboxEle,"mod-message-tip")},show:function(){this.layerFixed();this.layer.show()},close:function(){try{this.setEmpty();window.SpNet.sendCmd("close_m")}catch(d){}this.hidden("clearPop")},setEmpty:function(){this._sysNum=0;this._actNum=0;this._mailNum=0;this.upNum()},hidden:function(d){if(d&&d=="clearPop"){this.isPoping=false}this.layer.hidden()},go:function(n){var l="";var g="";var j=this._spaceDomain+"/msg/index",f={sys:this._spaceDomain+"/msg/index?from=sys",act:this._spaceDomain+"/msg/index?from=act",mail:this._spaceDomain+"/msg/index?from=mail"};var m=this._clickEle;if(m.tagName.toLowerCase()=="div"){g=m.id}else{var d=baidu.dom.getAncestorByTag(m,"div");if(d){g=d.id}}switch(g){case Space.Pubs.mStaticIds.sysIcon:l=f.sys;break;case Space.Pubs.mStaticIds.actIcon:l=f.act;break;case Space.Pubs.mStaticIds.mailIcon:l=f.mail;break;case Space.Pubs.mStaticIds.layer_play:case Space.Pubs.mStaticIds.layer_close:return;break;default:l=j}window.open(l);this.close();return false},update:function(d){if(d){this._sysNum=this._changeMaxStr(d.sysMsgNum)||0;this._actNum=this._changeMaxStr(d.actMsgNum)||0;this._mailNum=this._changeMaxStr(d.mailMsgNum)||0;this.upNum();this._inboxEle.onclick=function(){return false};if(!this.isAddEvent){baidu.on(this._inboxEle,"click",function(f){this._clickEle=baidu.event.getTarget(f);this.clickCallback();this.go()}.bind(this));this.isAddEvent=true}if((this._sysNum&&parseInt(this._sysNum)!=0)||(this._actNum&&parseInt(this._actNum)!=0)||(this._mailNum&&parseInt(this._mailNum)!=0)){}}this.exCallbacks()},_changeMaxStr:function(f){var d=f;if(parseInt(d)>99){d="99+"}return d},addCallback:function(d){this._callbacks.push(d)},exCallbacks:function(g){var d=this._callbacks.length;for(var f=0;f<d;f++){this._callbacks[f](g)}},setURL:function(f,d){this._spaceDomain=f;this._msgUrl=f+this._msgPath+"?callback="+d},start:function(){if(this._msgUrl){baidu.page.loadJsFile(this._msgUrl+"&ran="+Space.Libs.getRandomId())}}};a.mStaticIds=c;a.MessageLayer=b})(Space.Pubs);(function(b){window.setReady=function(){window.flashReady=true};if(!window.initSpaceMessage){window.initSpaceMessage=function(){}}function a(f,c,d){if(window.isInitSRequest){throw new Error("SingleRequest已经被实例化")}this.portrait=f;this.stDomain=c;this.domain=d;this.pageId=parseInt(Math.random()*10000).toString()+(new Date).getTime().toString();this.swfEle=this.createSwf();if($FF){this.createPostIfm()}window.lpAdmin=window.lpAdmin||false}a.prototype={_SWF_CID:"sr_swfContainer",_SWF_ID:"sr_swf",_IFRAME_ID:"sr_iframe",_URL:"http://m.hi.baidu.com/i/msg/listen",_isCreateConn:false,_isMaster:false,pageId:null,swfEle:null,sendFuncs:[],admincBacks:[],swfCounts:0,createSwf:function(){var c='<div style="height: 1px;left: 1px;overflow: hidden;position: absolute;top: -10000px;left:-10000px;width: 1px;background:#000" id="'+this._SWF_CID+'"></div>';baidu.dom.insertHTML(document.body,"beforeEnd",c);baidu.swf.create({id:this._SWF_ID,width:1,height:1,url:this.stDomain+"/static/base/swf/LongPolling.swf?swfran="+Space.Libs.getRandomId(),wmode:"opaque",allowscriptaccess:"always","allownetworking ":"all"},baidu.g(this._SWF_CID));return baidu.swf.getMovie(this._SWF_ID)},createPostIfm:function(){baidu.dom.insertHTML(document.body,"beforeEnd",'<iframe id="'+this._IFRAME_ID+'" src="'+this.domain+'/lpostmess.html" scrolling="no" allowTransparency="true" style="display:none;" frameborder="0"></iframe>');window.addEventListener("message",this.ifrmeEvent.bind(this),false)},ifrmeEvent:function(c){this.dataHandler(baidu.json.decode(c.data))},superCallback:function(){},addSendFunc:function(c){this.sendFuncs.push(c)},addAdminCBack:function(c){this.admincBacks.push(c)},exAdminCBack:function(f){var c=this.admincBacks.length;for(var d=0;d<c;d++){this.admincBacks[d](f)}},start:function(){var d=baidu.swf.version;if(d){if(!window.flashReady){if((this.swfCounts++)>30){if(!this.isSendErrLog){Space.Libs.hi_trackerLink("longpolling_flash_timeout_30");this.isSendErrLog=true}}setTimeout(function(){this.start()}.bind(this),1000);return}if(!this.isSendOkLog){Space.Libs.hi_trackerLink("longpolling_flashOK");this.isSendOkLog=true}var c=this.swfEle.checkAdmin(this.portrait,this.pageId,window.lpAdmin);trace("isSuperCache:"+c);var g=false;if(c){g=true}if(c&&!window.lpAdmin){this.sendChannel();return}var f=this.swfEle.connectChannel();if(f){if(!c||(c&&window.lpAdmin)){traceError("request:"+this.pageId);this.request()}else{this.sendChannel()}}else{if(window.lpAdmin){traceError("superMaster repeat");this.superCallback();return}this.sendChannel()}}else{traceError("no flash player");Space.Libs.hi_trackerLink("longpolling_no_flash");this.request()}},sendChannel:function(){trace("sendChannel:"+this.pageId);this.swfEle.sendChannel();setTimeout(function(){this.start()}.bind(this),30000)},sendCmd:function(c,d){try{trace("sendCmd:"+this.act);this.swfEle.sendCmd(c)}catch(f){traceError("sendCmd:Error")}},clearData:function(){},parseData:function(f){var c=this.sendFuncs.length;for(var d=0;d<c;d++){try{this.sendFuncs[d](f)}catch(g){}}},dataHandler:function(d){if(d.err_no){return}if(d.msg&&d.msg[0]){d.msg[0].msgId="msg_"+Space.Libs.getRandomId()}this.exAdminCBack(d);this.parseData(d);var c={};baidu.extend(c,d);c.transfer=true;if(c.msg){try{trace("shareData");this.swfEle.send(c)}catch(f){traceError("shareData:Error")}}clearTimeout(this.stId);this.start()},request:function(){var c=this._URL+"?r="+Math.random();if($FF){if(!this.iframeWin){this.iframeWin=baidu.g(this._IFRAME_ID).contentWindow}this.iframeWin.postMessage(c,this.domain)}else{setTimeout(function(){baidu.page.loadJsFile(c)},10)}this.sending=true;this.stId=setTimeout(function(){this.start()}.bind(this),70000)}};b.SingleRequest=a})(Space.Libs);(function(b){var a=function(){var n=this,j={},m=new Space.Libs.SingleRequest(Space.msgConfig.userPortrait,Space.msgConfig.staticDomain,Space.msgConfig.domain);function g(p,o,q){if((typeof p!="string")||(p=="")){throw new Error("the type of cmdType must be string and can't be empty!")}if(!o){throw new Error("the para client is necessary.")}q=q||"";var r=j[p];if(!r){r=[];j[p]=r}r[r.length]={client:o,key:q};o.$doSendCommand=function(t,s){var u={commandType:p,source:q,command:t,data:s};m.sendCmd(baidu.json.stringify(u))}}function f(u){var t=null;try{t=baidu.json.parse(u)}catch(s){}if(t!=null){var q=j[t.commandType],o=null;if(q&&q.length>0){for(var r=0,p=q.length;r<p;r++){o=q[r];if(o.client.processCommand){o.client.processCommand(t)}else{throw new Error("the obj which registered in CommandCenter must contain function:processCommand(cmdObj).")}}}}}function l(o,q,p){o.$doSendCommand(q,p)}function d(){return m}n.register=g;n.processCommand=f;n.sendCommand=l;n.getSingleRequest=d};var c=function(){var g=this,d=null;function f(){if(d==null){d=new a()}return d}g.getInstance=f};b.CommandCenter=new c()})(Space.Libs);$registJob("message_tip",function(a){Space.mtLayer=new Space.Pubs.MessageLayer("topMsgLi");Space.mtLayer.setURL(Space.msgConfig.domain,"Space.mtLayer.update");Space.mtLayer.start();Space.mtip=new Space.Pubs.MessageTip(Space.msgConfig.staticDomain,"msgInbox",Space.msgConfig.userPortrait);Space.Libs.checkActiveWin();var j=Space.Libs.CommandCenter.getInstance();window.SpNet=j.getSingleRequest();j.register("notice",Space.Pubs.NoticeOperator,Space.Pubs.NoticeOperator.getUniqueKey());Space.mtLayer.addCallback(function(){if(window.isLp){Space.mtip.inboxTip();Space.mtLayer.pop()}});Space.mtLayer.clickCallback=function(){window.SpNet.sendCmd("close_m");Space.mtip.clearTip();Space.mtip.hideInbox()};window.SpNet.addSendFunc(function(o){if(o.act){switch(o.act){case"close_m":Space.mtLayer.setEmpty();Space.mtLayer.hidden("clearPop");Space.mtip.clearTip();Space.mtip.hideInbox();break;case"close_bpop":if(Space.bpop){Space.bpop.hidden()}Space.mtip.clearTip();Space.mtip.staticInbox();break;default:j.processCommand(o.act)}return}if(o.mod!="null"){window.isLp=true;Space.lpData=o;var l=o.msg.length,m=false,b=Space.Pubs.NoticeOperator;for(var n=0;n<l;n++){d(o);var p=b.getMessageStatus(o.msg[n]);if(o.msg[n].message&&(!p.isNotice||!p.isAccept)){Space.mtLayer.start()}if(Space.Libs.checkActiveWin()){if(c(o.msg[n],p)){if(window.lpAdmin){if(o.msg[n].msg_type!=5||o.msg[n].src_type!=5014){SL.titleBlink("新消息")}}else{Space.mtip.titleTip()}}}}}});function g(b){return(b&&b.mid>0)}function c(b,l){if(l.isNotice&&!l.isAccept){return g(b)}else{return !l.isNotice||!l.isAccept||!l.isAbandoned}}function d(b){Space.Pubs.NoticeOperator.receiveData(b)}function f(l){var m=Space.Pubs.NoticeOperator,b;if((l.src_type==5014)&&(l.msg_type!=5)&&!m.hasMessage(l.msgId)&&l.content){b=baidu.json.decode(l.content);if(b.category==0&&b.type==1&&!window.SL){if(Space.bpop){Space.bpop.hidden()}Space.bpop=new Space.Pubs.SuliaoTips(b.cuname,b.portrait,Space.msgConfig.domain,Space.msgConfig.portraitDomain,Space.msgConfig.appsDomain,Space.msgConfig.staticDomain);Space.bpop.showTip(b)}}}window.SpNet.addAdminCBack(function(n){window.$isHost=true;if(n.mod!="null"){d(n);var l=n.msg.length,b=Space.Pubs.NoticeOperator;for(var m=0;m<l;m++){var o=b.getMessageStatus(n.msg[m]);if(c(n.msg[m],o)){if(window.lpAdmin){if(n.msg[m].msg_type!=5||n.msg[m].src_type!=5014){SL.titleBlink("新消息")}}else{Space.mtip.titleTip()}}if(n.msg[m].ring){Space.mtip.soundTip();return}}}});window.SpNet.start()});trace("base update time :2012-02-10");(function(a){window.PortraitHandler=(function(){var c=null;var d=false;var f=function(l){if(baidu.G("portratiEdit")){baidu.G("portratiEdit").style.display=l?"block":"none"}};var b=function(l){d=l;c=Space.Libs.bdDialog.showIframe({title:Session.userName+"，欢迎来到百度空间！",url:spDomain.space+"/reg/head?mode=iframe&f=Space.Pubs.uploadPortrait.callback&hasPadding=1",width:564,height:530,displayMode:"normal"});if(d){ProfileGuide.bindCloseCallback(c)}};var j=function(){c.close();if(baidu.g("userUploadBtn")){baidu.g("userUploadBtn").style.display="none"}var n="";try{isPortraitVerfied}catch(l){isPortraitVerfied=false}if(!isPortraitVerfied){n='<div style="height: 70px; padding-left: 60px; font-size: 12px; margin: 15px 10px; background: url(http://img.baidu.com/hi/img/ihome/ihome_portrait_tip1.gif) no-repeat scroll 0pt -50px transparent;font-size:14px;color:#555555"><div style="font-weight:bold;color:#7C9810;margin-bottom:10px;padding-top:6px;text-align:left;">您的头像已经生效了哦！</div><div style="text-align:left;"> 如果您的头像符合真实、正面、清晰、完整的要求，将可以成为空间认证用户，获得更多的特权！</div></div>';setTimeout(function(){var p=baidu.G("portrait-img");try{baidu.G("portrait-img").src=p.src+"?_t="+Math.random()}catch(o){}try{baidu.g("img-upload-portrait").src=p.src+"?_t="+Math.random()}catch(o){}},1000)}else{n='<div style="background: url(http://img.baidu.com/hi/img/ihome/ihome_portrait_tip1.gif) no-repeat scroll 0 0 transparent;height:50px;line-height:25px; padding-left:60px;font-size:12px;margin: 20px 16px;text-align:left;">管理员正在火速审核中. . .<br> 预计审核时间为3分钟，审核后，即可生效您的头像哦！请耐心等待</div>'}var m=Space.Libs.bdDialog.createCustomsDialog({content:n,title:"提示",width:460,height:100},"");m.show();m.setMiddle();window.setTimeout(function(){m.close();if(d){ProfileGuide.closeDlg({error_code:0})}},2000)};var g=function(){var m='<div style="padding:0;margin:0;width:450px;height:120px;background:url(http://img.baidu.com/hi/img/ihome/ihome-portrait-tip.gif)"></div>';var l=Space.Libs.bdDialog.createCustomsDialog({content:m,title:"提示",width:460,height:120},"");l.show();l.setMiddle();window.setTimeout(function(){l.close()},2000)};return{pop:c,switchPanel:f,openPanel:b,callback:j,openTipPanel:g}})();a.uploadPortrait=PortraitHandler})(Space.Pubs);(function(b){var a=function(){var c="more",d=false;return function(j,f){if(c=="more"){if(!d){d=false;var g=spDomain.apps+"/apps/installedapps?user="+f+"&asyn=1&r="+Math.random();baidu.sio.callByServer(g,function(n){var m=[],l=0;baidu.each(n,function(o){if(!baidu.g("appId"+o.id)){m[l++]=baidu.string.format('<li><a href="#{link}" class="i#{id}" id="appId#{id}">#{name}</a></li>',o)}});baidu.g("thridAppList").innerHTML=baidu.g("thridAppList").innerHTML+m.join("")})}baidu.g("thridAppList").style.height="auto";j.innerHTML="收起";c="less"}else{baidu.g("thridAppList").style.height="105px";j.innerHTML="更多";c="more"}}}();Class.extend(b,{showInstalledApps:a})})(Space.Pubs);(function(b){var a=function(g,j,c){var j=j||0;var d="";if(g<=1){return" &nbsp;"}if(g<=5){for(var f=0;f<g;f++){if(f==j){d+="<span>"+(f+1)+"</span> "}else{d+="<a href='"+c+f+"'>"+(f+1)+"</a> "}}}else{if(j<3){for(var f=0;f<5;f++){if(f==j){d+="<span>"+(f+1)+"</span> "}else{d+="<a href='"+c+f+"'>"+(f+1)+"</a> "}}d+="<a class='ch' href='"+c+(j-0+1)+"'>下一页</a> ";d+="<a class='ch' href='"+c+(g-0-1)+"'>尾页</a> "}else{d+="<a class='ch' href='"+c+0+"'>首页</a> ";d+="<a class='ch' href='"+c+(j-0-1)+"'>上一页</a> ";if(g-j>2){for(var f=j-2;f<j-2+5;f++){if(f>=g){break}if(f==j){d+="<span>"+(f+1)+"</span> "}else{d+="<a href='"+c+f+"'>"+(f+1)+"</a> "}}if(j-0+2<g-1){d+="<a class='ch' href='"+c+(j-0+1)+"'>下一页</a> ";d+="<a class='ch' href='"+c+(g-0-1)+"'>尾页</a> "}}else{for(var f=g-5;f<g;f++){if(f>=g){break}if(f==j){d+="<span>"+(f+1)+"</span> "}else{d+="<a href='"+c+f+"'>"+(f+1)+"</a> "}}}}}return d};b.Pager=a})(Space.Pubs);(function(b){function a(d){var c={};c.cascade_im=0;c.word=d.word;c.callback=d.callback;c.isnotice=d.isnotice||1;c.bdstoken=d.bdstoken;c.proxy=d.proxy;c.from=d.from||"ihome";c.appPlatMsg=d.appPlatMsg||"";c.isAppPlat=d.isAppPlat||0;this.option=c;this.url="http://frd.baidu.com/commit/friend.add"}a.prototype={addNow:function(){var c=new Space.Libs.IframeLoader();c.request(this.url,this.option)}};b.AddFriend=a})(Space.Pubs);