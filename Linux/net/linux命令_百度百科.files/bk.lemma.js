var G=baidu.G;(function(){this.FX=function(F,E,H,I,J,D){this.el=A.get(F);this.attributes=E;this.duration=H||0.7;this.transition=(!!I&&I in FX.transitions)?I:"easeInOut";this.callback=J||function(){};this.ctx=D||window;this.units={};this.frame={};this.endAttr={};this.startAttr={}};this.FX.transitions={linear:function(E,D,H,F){return H*E/F+D},easeIn:function(E,D,H,F){return -H*Math.cos(E/F*(Math.PI/2))+H+D},easeOut:function(E,D,H,F){return H*Math.sin(E/F*(Math.PI/2))+D},easeInOut:function(E,D,H,F){return -H/2*(Math.cos(Math.PI*E/F)-1)+D}};this.FX.prototype={start:function(){var D=this;this.getAttributes();this.duration=this.duration*1000;this.time=new Date().getTime();this.animating=true;this.timer=setInterval(function(){var E=new Date().getTime();if(E<(D.time+D.duration)){D.elapsed=E-D.time;D.setCurrentFrame()}else{D.frame=D.endAttr;D.complete()}D.setAttributes()},10)},ease:function(E,D){return FX.transitions[this.transition](this.elapsed,E,D-E,this.duration)},complete:function(){clearInterval(this.timer);this.timer=null;this.animating=false;this.callback.call(this.ctx)},stop:function(){clearInterval(this.timer)},setCurrentFrame:function(){for(attr in this.startAttr){if(this.startAttr[attr] instanceof Array){this.frame[attr]=[];for(var D=0;D<this.startAttr[attr].length;D++){this.frame[attr][D]=this.ease(this.startAttr[attr][D],this.endAttr[attr][D])}}else{this.frame[attr]=this.ease(this.startAttr[attr],this.endAttr[attr])}}},getAttributes:function(){for(var D in this.attributes){switch(D){case"color":case"borderColor":case"border-color":case"backgroundColor":case"background-color":this.startAttr[D]=B(this.attributes[D].from||A.getStyle(this.el,D));this.endAttr[D]=B(this.attributes[D].to);break;case"scrollTop":case"scrollLeft":var H=(this.el==document.body)?(document.documentElement||document.body):this.el;this.startAttr[D]=this.attributes[D].from||H[D];this.endAttr[D]=this.attributes[D].to;break;default:var I;var E=this.attributes[D].to;var F=this.attributes[D].units||"px";if(!!this.attributes[D].from){I=this.attributes[D].from}else{I=parseFloat(A.getStyle(this.el,D))||0;if(F!="px"&&document.defaultView){A.setStyle(this.el,D,(E||1)+F);I=((E||1)/parseFloat(A.getStyle(this.el,D)))*I;A.setStyle(this.el,D,I+F)}}this.units[D]=F;this.endAttr[D]=E;this.startAttr[D]=I;break}}},setAttributes:function(){for(var D in this.frame){switch(D){case"opacity":A.setStyle(this.el,D,this.frame[D]);break;case"scrollLeft":case"scrollTop":var F=(this.el==document.body)?(document.documentElement||document.body):this.el;F[D]=this.frame[D];break;case"color":case"borderColor":case"border-color":case"backgroundColor":case"background-color":var E="rgb("+Math.floor(this.frame[D][0])+","+Math.floor(this.frame[D][1])+","+Math.floor(this.frame[D][2])+")";A.setStyle(this.el,D,E);break;default:A.setStyle(this.el,D,this.frame[D]+this.units[D]);break}}}};var A={get:function(D){return(typeof D=="string")?document.getElementById(D):D},getStyle:function(F,H){H=C(H);var D=document.defaultView;if(D&&D.getComputedStyle){return D.getComputedStyle(F,"")[H]||null}else{if(H=="opacity"){var E=F.filters("alpha").opacity;return isNaN(E)?1:(E?E/100:0)}return F.currentStyle[H]||null}},setStyle:function(D,F,E){if(F=="opacity"){D.style.filter="alpha(opacity="+E*100+")";D.style.opacity=E}else{F=C(F);D.style[F]=E}}};var C=(function(){var D={};return function(J){if(!D[J]){var I=J.split("-"),H=I[0];if(I.length>1){for(var F=1,E=I.length;F<E;F++){H+=I[F].charAt(0).toUpperCase()+I[F].substring(1)}}return D[J]=H}else{return D[J]}}})();var B=(function(){var F=(/^#?(\w{2})(\w{2})(\w{2})$/);var D=(/^#?(\w{1})(\w{1})(\w{1})$/);var E=(/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/);return function(I){var H=I.match(F);if(H&&H.length==4){return[parseInt(H[1],16),parseInt(H[2],16),parseInt(H[3],16)]}H=I.match(E);if(H&&H.length==4){return[parseInt(H[1],10),parseInt(H[2],10),parseInt(H[3],10)]}H=I.match(D);if(H&&H.length==4){return[parseInt(H[1]+H[1],16),parseInt(H[2]+H[2],16),parseInt(H[3]+H[3],16)]}}})()})();baidu.extend(String.prototype,{byteLength:function(){return this.replace(/[^\u0000-\u007f]/g,"\u0061\u0061").length},subByte:function(E,D){if(this.byteLength()<=E){return this}for(var B=Math.floor((E=E-2)/2),A=this.length;B<A;B++){var C=this.substring(0,B);if(C.byteLength()>=E){return C+(D!=undefined?D:"...")}}return this}});if(typeof (HTMLElement)!="undefined"&&!window.opera){HTMLElement.prototype.__defineGetter__("innerText",function(){return this.textContent});HTMLElement.prototype.__defineSetter__("innerText",function(A){this.textContent=A})}baidu.extend(Function.prototype,{createCallback:function(){var A=arguments,B=this;return function(){return B.apply(window,A)}},createDelegate:function(C,B,A){var D=this;return function(){var F=B||arguments;if(A===true){F=Array.prototype.slice.call(arguments,0);F=F.concat(B)}else{if(baidu.lang.isNumber(A)){F=Array.prototype.slice.call(arguments,0);var E=[A,0].concat(B);Array.prototype.splice.apply(F,E)}}return D.apply(C||window,F)}},defer:function(C,E,B,A){var D=this.createDelegate(E,B,A);if(C>0){return setTimeout(D,C)}D();return 0}});baidu.proxy=function(C,A){var B=Array.prototype.slice.call(arguments,1);return function(){C.apply(null,B)}};baidu.more=baidu.more||{};baidu.more.ns=function(E){var F=E.split(".");var B=window;for(var D=0,A=F.length;D<A;D++){var C=F[D];if(C==""){continue}B[C]=(B[C]||{});B=B[C]}};if(!window.console||!console.firebug){var names=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console=(typeof window.loadFirebugConsole=="function")?window.loadFirebugConsole():{};for(var i=0;i<names.length;++i){window.console[names[i]]=function(){}}}function nslog_inner(B,D,A){var C=(new Date()).getTime();var E=["http://nsclick.baidu.com/v.gif?pid="+nslog.pid,"url="+encodeURIComponent(B),"type="+D,"t="+C];for(k in A){E.push(k+"="+A[k])}for(k in nslog.log_params){E.push(k+"="+nslog.log_params[k])}nslog.req(E.join("&"))}nslog=function(B,C,A){if(nslog.ie6){nslog.waitinglist.push([B,C,A]);if(!nslog.sending4ie6){nslog.sending4ie6=true;nslog.send4ie6()}}else{nslog_inner(B,C,A)}};nslog.ie6=false;nslog.waitinglist=[];nslog.sending4ie6=false;nslog.send4ie6=function(){if(nslog.waitinglist.length==0){nslog.sending4ie6=false}else{var A=nslog.waitinglist.shift();nslog_inner(A[0],A[1],A[2]);setTimeout(function(){nslog.send4ie6()},100)}};if(/msie (\d+\.\d)/i.test(navigator.userAgent)){var ie=document.documentMode||+RegExp["\x241"];nslog.ie6=ie==6}nslog.pid=103;nslog.log_params={};nslog.set=function(A,B){nslog.log_params[A]=B};nslog.sid=((new Date()).getTime()+"_"+Math.round(Math.random()*2147483637));nslog.stat=function(A){nslog.req("/js/blank.js?func="+A+"&sid="+nslog.sid+"&t="+(new Date()).getTime())};nslog.req=function(A){var C="iknowlog_"+(new Date()).getTime();var B=window[C]=new Image();B.onload=B.onerror=function(){window[C]=null};B.src=A;B=null};function baidumessage(){if(baidu.G("mnum")){baidu.sio.callByBrowser("http://msg.baidu.com/ms?ct=18&cm=3&tn=bmSelfUsrStat&mpn=13227114&un="+baidu.G("login-user-name").innerHTML,function(){if(redmsg){redmsg=redmsg.replace(/\u6211\u7684/g,"");redmsg=redmsg.replace(/\/\d+\)/,")");if(/>0<\/span>/g.test(redmsg)||/\(0\)/g.test(redmsg)){redmsg=redmsg.replace(/\([^\)]+\)/g,"")}baidu.G("mnum").innerHTML="<span class='usrbar-split'>|</span>"+redmsg}})}}baidu.dom.ready(baidumessage);baidu.more.ns("bk");bk.event=bk.event||(function(){var D={};function A(H,I){D[H]=D[H]||[];var F=true;baidu.each(D[H],function(J){if(J===I){F=false}});if(F){D[H].push(I)}}function C(F,H){if(D[F]){baidu.each(D[F],function(I){if(typeof I=="function"){I(H)}})}}function B(I,J){var F=D[I];if(F){var H=F.length;while(H--){if(F[H]===J){F.splice(F[H],1)}}}}function E(F){D[F]=[]}return{on:A,un:B,clear:E,fire:C}})();var g_pop=g_pop||function(){};if(!Array.prototype.push){Array.prototype.push=function(){var B=this.length;for(var A=0;A<arguments.length;A++){this[B+A]=arguments[A]}return this.length}}function G(){var C=new Array();for(var B=0;B<arguments.length;B++){var A=arguments[B];if(typeof A=="string"){A=document.getElementById(A)}if(arguments.length==1){return A}C.push(A)}return C}Function.prototype.bind=function(B){var A=this;return function(){A.apply(B,arguments)}};Function.prototype.bindAsEventListener=function(B){var A=this;return function(C){A.call(B,C||window.event)}};Object.extend=function(A,B){for(property in B){A[property]=B[property]}return A};if(!window.Event){var Event=new Object()}Object.extend(Event,{observers:false,element:function(A){return A.target||A.srcElement},isLeftClick:function(A){return(((A.which)&&(A.which==1))||((A.button)&&(A.button==1)))},pointerX:function(A){return A.pageX||(A.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft))},pointerY:function(A){return A.pageY||(A.clientY+(document.documentElement.scrollTop||document.body.scrollTop))},stop:function(A){if(A.preventDefault){A.preventDefault();A.stopPropagation()}else{A.returnValue=false;A.cancelBubble=true}},findElement:function(C,B){var A=Event.element(C);while(A.parentNode&&(!A.tagName||(A.tagName.toUpperCase()!=B.toUpperCase()))){A=A.parentNode}return A},_observeAndCache:function(D,C,B,A){if(!this.observers){this.observers=[]}if(D.addEventListener){this.observers.push([D,C,B,A]);D.addEventListener(C,B,A)}else{if(D.attachEvent){this.observers.push([D,C,B,A]);D.attachEvent("on"+C,B)}}},unloadCache:function(){if(!Event.observers){return }for(var A=0;A<Event.observers.length;A++){Event.stopObserving.apply(this,Event.observers[A]);Event.observers[A][0]=null}Event.observers=false},observe:function(D,C,B,A){if("string"==typeof D){D=G(D)}A=A||false;if(C=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||D.attachEvent)){C="keydown"}this._observeAndCache(D,C,B,A)},stopObserving:function(D,C,B,A){if("string"==typeof D){D=G(D)}A=A||false;if(C=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||D.detachEvent)){C="keydown"}if(D.removeEventListener){D.removeEventListener(C,B,A)}else{if(D.detachEvent){D.detachEvent("on"+C,B)}}}});Event.observe(window,"unload",Event.unloadCache,false);var Class=function(){var A=function(){this.initialize.apply(this,arguments)};for(i=0;i<arguments.length;i++){superClass=arguments[i];for(member in superClass.prototype){A.prototype[member]=superClass.prototype[member]}}A.child=function(){return new Class(this)};A.extend=function(B){for(property in B){A.prototype[property]=B[property]}};return A};var Popup=new Class();Popup.prototype={iframeIdName:"ifr_popup",initialize:function(A){this.config=Object.extend({contentType:1,isHaveTitle:true,scrollType:"no",isBackgroundCanClick:false,isSupportDraging:true,isShowShadow:true,isReloadOnClose:true,width:400,isPop:false,height:300},A||{});this.info={shadowWidth:3,title:"",contentUrl:"",contentHtml:"",callBack:null,parameter:null,confirmCon:"",alertCon:"",someHiddenTag:"select,object,embed",someDisabledBtn:"",someHiddenEle:"",overlay:0,coverOpacity:30};this.color={cColor:"#000",bColor:"#FFFFFF",tColor:"#709CD2",wColor:"#FFFFFF"};this.dropClass=null;this.someToHidden=[];this.someToDisabled=[];if(!this.config.isHaveTitle){this.config.isSupportDraging=false}this.iniBuild()},setContent:function(A,B){if(B!=""){switch(A){case"width":this.config.width=B;break;case"height":this.config.height=B;break;case"title":this.info.title=B;break;case"contentUrl":this.info.contentUrl=B;break;case"contentHtml":this.info.contentHtml=B;break;case"callBack":this.info.callBack=B;break;case"parameter":this.info.parameter=B;break;case"confirmCon":this.info.confirmCon=B;break;case"alertCon":this.info.alertCon=B;break;case"someHiddenTag":this.info.someHiddenTag=B;break;case"someHiddenEle":this.info.someHiddenEle=B;break;case"someDisabledBtn":this.info.someDisabledBtn=B;break;case"overlay":this.info.overlay=B}}},iniBuild:function(){var A=G("dialogCase");if(A){document.body.removeChild(A)}A=document.createElement("DIV");A.id="dialogCase";A.style.zIndex=65535;A.style.top=0;A.style.left=0;A.style.position="absolute";A.style.width="100%";document.body.appendChild(A)},build:function(){var B=10001+this.info.overlay*10;var I=B+2;this.iframeIdName="ifr_popup"+this.info.overlay;var K="http://img.baidu.com/hi/img/";var J='<div id="dialogBoxClose" style="width:18px;height:18px;cursor:pointer;margin-bottom:2px;"><div>';var F="filter: alpha(opacity="+this.info.coverOpacity+");opacity:"+this.info.coverOpacity/100+";";var L='<div id="dialogBoxBG" style="position:absolute;top:0px;left:0px;z-index:'+B+";"+F+"background-color:"+this.color.cColor+';display:none;"></div>';var E='<div id="dialogBox" style="border:1px solid #104987;display:none;z-index:'+I+";position:relative;width:"+this.config.width+'px;background:url(\'http://img.baidu.com/img/baike/editor/bgs.gif\') repeat-x scroll 0 -68px #1169B1;padding:1px;"><table width="100%" border="0" cellpadding="0" cellspacing="0" style="background:url(\'http://img.baidu.com/img/baike/editor/bgs.gif\') repeat-x 0 -144px">';if(this.config.isHaveTitle){E+='<tr height="29"><td style="background:url(\'http://img.baidu.com/img/baike/editor/edithelper.gif\') no-repeat right -68px transparent;"><table style="-moz-user-select:none;height:24px;" width="100%" border="0" cellpadding="0" cellspacing="0" ><tr><td width="6" height="24"></td><td id="dialogBoxTitle" style="color:'+this.color.wColor+';font-size:14px;font-weight:bold;">'+this.info.title+'&nbsp;</td><td id="dialogClose" width="18" align="right" valign="middle">'+J+'</td><td width="9"></td></tr></table></td></tr>'}else{E+='<tr height="10"><td align="right">'+J+"</td></tr>"}E+='<tr id="container-tr" style="height:'+(this.config.height-36)+'px" valign="top"><td style="position:relative;padding:1px;"><div style="border:1px solid #FFF;"><div style="background:url(\'http://img.baidu.com/img/baike/editor/bgs.gif\') repeat-x #FFF;height:13px;line-height:13px;font-size:1px;">&nbsp;</div><div id="dialogBody" style="background-color:#FFF;height:'+(this.config.height-46)+"px;width:"+(this.config.width-4)+'px"></div></div></td></tr></table></div><div id="dialogBoxShadow" style="display:none;z-index:'+B+';"></div>';if(!this.config.isBackgroundCanClick){G("dialogCase").innerHTML=L+E;var H=document,D=H.body,C=H.documentElement,A=H.compatMode=="BackCompat"?D:H.documentElement;G("dialogBoxBG").style.height=Math.max(C.scrollHeight,D.scrollHeight,A.clientHeight)+"px";G("dialogBoxBG").style.width=window.screen.width+"px"}else{G("dialogCase").innerHTML=E}Event.observe(G("dialogBoxClose"),"click",this.reset.bindAsEventListener(this),false);if(this.config.isSupportDraging){dropClass=new Dragdrop(this.config.width,this.config.height,this.info.shadowWidth,this.config.isSupportDraging,this.config.contentType);G("dialogBoxTitle").style.cursor="move"}this.lastBuild()},lastBuild:function(){var B='<div style="width:100%;height:100%;text-align:center;"><div style="margin:0 20px 0 20px;padding-top:20px;font-size:14px;line-height:16px;color:#000000;">'+this.info.confirmCon+'</div><div style="margin:20px;"><input id="dialogOk" type="button" value="  确定  "/>&nbsp;<input id="dialogCancel" type="button" value="  取消  "/></div></div>';var E='<div style="width:100%;height:100%;text-align:center;background-color:#fff"><div style="margin:0 20px;font-size:14px;line-height:16px;color:#000000;">'+this.info.alertCon+'</div><div style="margin:20px;"><input id="dialogYES" type="button" value="  确定  "/></div></div>';var A=10001+this.info.overlay*10;var D=A+4;if(this.config.contentType==1){var C="<iframe style='height:"+(this.config.height-46)+"px;width:"+(this.config.width-4)+"px;' name='"+this.iframeIdName+"' id='"+this.iframeIdName+"' src='"+this.info.contentUrl+"' frameborder='0' scrolling='"+this.config.scrollType+"'></iframe>";var F="<div id='iframeBG' style='position:absolute;top:0px;left:0px;width:1px;height:1px;z-index:"+D+";filter: alpha(opacity=00);opacity:0.00;background-color:#ffffff;'><div>";G("dialogBody").innerHTML=C+F}else{if(this.config.contentType==2){G("dialogBody").innerHTML=this.info.contentHtml}else{if(this.config.contentType==3){G("dialogBody").innerHTML=B;Event.observe(G("dialogOk"),"click",this.forCallback.bindAsEventListener(this),false);Event.observe(G("dialogCancel"),"click",this.close.bindAsEventListener(this),false)}else{if(this.config.contentType==4){G("dialogBody").innerHTML=E;Event.observe(G("dialogYES"),"click",this.close.bindAsEventListener(this),false)}}}}},reBuild:function(){G("dialogBody").height=G("dialogBody").clientHeight;this.lastBuild()},show:function(){this.hiddenSome();this.middle();if(this.config.isShowShadow){this.shadow()}},resize:function(C,F,I){this.setContent("width",C);this.setContent("height",F);var H=G("dialogBox");var E=G("dialogBody");H.style["width"]=C+"px";H.style["height"]=F+"px";var D=G(this.iframeIdName);D.style["height"]=F-46+"px";D.style["width"]=C-4+"px";E.style["height"]=F-46+"px";E.style["width"]=C-4+"px";if(I){this.setContent("title",I);var B=G("dialogBoxTitle");B.innerHTML=I+"&nbsp;"}var A=G("container-tr");A.style["height"]=F-36+"px";this.show()},forCallback:function(){return this.info.callBack(this.info.parameter)},shadow:function(){var A=G("dialogBoxShadow");var B=G("dialogBox");A.style["top"]=B.offsetTop+this.info.shadowWidth+10+"px";A.style["left"]=B.offsetLeft+this.info.shadowWidth+6+"px";A.style["width"]=B.offsetWidth-6+"px";A.style["height"]=B.offsetHeight-10+"px";A.style["position"]="absolute";A.style["background"]="#000";A.style["display"]="";A.style["opacity"]="0.1";A.style["filter"]="alpha(opacity=20)"},middle:function(){if(!this.config.isBackgroundCanClick){G("dialogBoxBG").style.display=""}var F=G("dialogBox");F.style["position"]="absolute";F.style["display"]="";var C=(document.documentElement.clientWidth||document.body.clientWidth);var E=(document.documentElement.clientHeight||document.body.clientHeight);var B=(document.documentElement.scrollTop||document.body.scrollTop);var D=(C/2)-(F.offsetWidth/2);var A=(E/2+B)-(F.offsetHeight/2);if(A<B){A=20+B}if(D<1){D=20}F.style["left"]=D+"px";F.style["top"]=A+"px"},reset:function(A){this.close();if(typeof A!=="boolean"){A=false}if(this.config.isReloadOnClose||A){top.location.href=top.location.href.replace(/#.*$/g,"")}},close:function(){G("dialogBox").style.display="none";if(!this.config.isBackgroundCanClick){G("dialogBoxBG").style.display="none"}if(this.config.isShowShadow){G("dialogBoxShadow").style.display="none"}G("dialogBody").innerHTML="";this.showSome()},hiddenSome:function(){var A=this.info.someHiddenTag.split(",");if(A.length==1&&A[0]==""){A.length=0}for(var B=0;B<A.length;B++){this.hiddenTag(A[B])}var C=this.info.someHiddenEle.split(",");if(C.length==1&&C[0]==""){C.length=0}for(var B=0;B<C.length;B++){this.hiddenEle(C[B])}var C=this.info.someDisabledBtn.split(",");if(C.length==1&&C[0]==""){C.length=0}for(var B=0;B<C.length;B++){this.disabledBtn(C[B])}},disabledBtn:function(B){var A=document.getElementById(B);if(typeof (A)!="undefined"&&A!=null&&A.disabled==false){A.disabled=true;this.someToDisabled.push(A)}},hiddenTag:function(B){var C=document.getElementsByTagName(B);if(C!=null){for(var A=0;A<C.length;A++){if(C[A].style.display!="none"&&C[A].style.visibility!="hidden"){C[A].style.visibility="hidden";this.someToHidden.push(C[A])}}}},hiddenEle:function(B){var A=document.getElementById(B);if(typeof (A)!="undefined"&&A!=null){A.style.visibility="hidden";this.someToHidden.push(A)}},showSome:function(){for(var A=0;A<this.someToHidden.length;A++){this.someToHidden[A].style.visibility="visible"}for(var A=0;A<this.someToDisabled.length;A++){this.someToDisabled[A].disabled=false}},replaceIframe:function(A){this.setContent("contentUrl",A);G(this.iframeIdName).src=A}};var Dragdrop=new Class();Dragdrop.prototype={initialize:function(C,B,A,D,E){this.dragData=null;this.dragDataIn=null;this.backData=null;this.width=C;this.height=B;this.shadowWidth=A;this.showShadow=D;this.contentType=E;this.IsDraging=false;this.oObj=G("dialogBox");Event.observe(G("dialogBoxTitle"),"mousedown",this.moveStart.bindAsEventListener(this),false)},moveStart:function(A){this.IsDraging=true;if(this.contentType==1){G("iframeBG").style.display="";G("iframeBG").style.width=this.width+"px";G("iframeBG").style.height=this.height+"px"}Event.observe(document,"mousemove",this.mousemove.bindAsEventListener(this),false);Event.observe(document,"mouseup",this.mouseup.bindAsEventListener(this),false);Event.observe(document,"selectstart",this.returnFalse,false);this.dragData={x:Event.pointerX(A),y:Event.pointerY(A)};this.backData={x:parseInt(this.oObj.style.left),y:parseInt(this.oObj.style.top)};if(document.body.setCapture){document.body.setCapture()}},mousemove:function(A){if(!this.IsDraging){return }var C=Event.pointerX(A)-this.dragData.x+parseInt(this.oObj.style.left);var B=Event.pointerY(A)-this.dragData.y+parseInt(this.oObj.style.top);if(this.dragData.y<parseInt(this.oObj.style.top)){B=B-12}else{if(this.dragData.y>parseInt(this.oObj.style.top)+25){B=B+12}}this.oObj.style.left=C+"px";this.oObj.style.top=B+"px";if(this.showShadow){G("dialogBoxShadow").style.left=C+this.shadowWidth+6+"px";G("dialogBoxShadow").style.top=B+this.shadowWidth+10+"px"}this.dragData={x:Event.pointerX(A),y:Event.pointerY(A)};document.body.style.cursor="move"},mouseup:function(C){if(!this.IsDraging){return }if(this.contentType==1){G("iframeBG").style.display="none"}document.onmousemove=null;document.onmouseup=null;var B=Event.pointerX(C)-(document.documentElement.scrollLeft||document.body.scrollLeft);var A=Event.pointerY(C)-(document.documentElement.scrollTop||document.body.scrollTop);if(B<1||A<1||B>document.body.clientWidth||A>document.body.clientHeight){this.oObj.style.left=this.backData.x+"px";this.oObj.style.top=this.backData.y+"px";if(this.showShadow){G("dialogBoxShadow").style.left=this.backData.x+this.shadowWidth+6+"px";G("dialogBoxShadow").style.top=this.backData.y+this.shadowWidth+10+"px"}}this.IsDraging=false;document.body.style.cursor="";Event.stopObserving(window,"selectstart",this.returnFalse,false);if(document.body.releaseCapture){document.body.releaseCapture()}},returnFalse:function(){return false}};var baikeLoginArgs=[];function userLogin(){switch(arguments.length){case 0:relogin();break;case 1:baikeLoginArgs=[arguments[0]];loginflag.setLoginArr("loginSt",0);loginflag.setLoginArr("loginUrl",arguments[0]);checkIfLogin();break;default:baikeLoginArgs=[arguments[0],arguments[1]];loginflag.setLoginArr("loginSt",1);loginflag.setLoginArr("isDetect",arguments[0]);loginflag.setLoginArr("loginTip",arguments[1]);checkIfLogin();break}nslog(location.href,88,{name:"login"})}function checkReloginResult(){afterLogin()}function afterLogin(){switch(baikeLoginArgs.length){case 0:try{bk.editor.unloadConfirm.clear()}catch(A){}window.location=location.href.replace(/#.*/,"");g_pop.close();break;case 1:window.location=baikeLoginArgs[0];g_pop.close();break;default:g_pop.close();if(loginflag.getLoginArr("isDetect")==3){Detect.detecting()}else{try{cnEdit()}catch(A){if(bk.editor){bk.editor.submiter.submitform()}else{submitform()}}}break}}function relogin(A){g_pop=new Popup({contentType:1,isReloadOnClose:false,width:408,height:345});g_pop.setContent("title","登录到百度百科");g_pop.setContent("contentUrl","/page/userlogin.html"+(A?("?fr="+A):""));g_pop.build();g_pop.show()}var userlogin=userlogin||function(){};userlogin.reg=function(A){var B="/page/userlogin.html?userreg"+(A?("&fr="+A):"");g_pop=new Popup({contentType:1,isReloadOnClose:false,width:408,height:345});g_pop.setContent("title","登录到百度百科");g_pop.setContent("contentUrl",B);g_pop.build();g_pop.show()};var regOkHandler=function(A){g_pop.replaceIframe("/page/regok.html?un="+encodeURIComponent(A));g_pop.resize(538,395)};var offlineTimer;function checkIfLogin(){var B="http://baike.baidu.com/login?s="+Math.random();var A=document.createElement("script");A.setAttribute("type","text/javascript");A.setAttribute("src",B);document.getElementsByTagName("head")[0].appendChild(A);offlineTimer=setTimeout(loginWarn,15000)}function wiki_relogin(){clearTimeout(offlineTimer);if(arguments[0]==1){if(loginflag.getLoginArr("loginSt")==0){loginflag.setLoginArr("loginTip",0);var C=loginflag.getLoginArr("loginUrl");var E=setParamURL(C);if(document.images){var B=new Image();var D=addURLParam("/js/blank.js","id",E);B.src=addURLParam(D,"logTp",0)}relogin(C)}else{relogin(loginflag.getLoginArr("isDetect"),loginflag.getLoginArr("loginTip"))}}else{if(loginflag.getLoginArr("loginSt")==0){window.location=loginflag.getLoginArr("loginUrl")}else{if(loginflag.getLoginArr("isDetect")==3){Detect.detecting()}else{try{cnEdit()}catch(A){if(bk.editor){bk.editor.submiter.submitform()}else{submitform()}}}}}}function loginWarn(){var A='			<br>			<div style="font-size:14px;font-weight:bold;text-align:center;padding:10px 10px">请检查您的网络链接，重新进行提交</div>	';g_pop=new Popup({contentType:2,isReloadOnClose:false,width:350,height:120});g_pop.setContent("title","提示");g_pop.setContent("contentHtml",A);g_pop.build();g_pop.show()}function addURLParam(C,B,A){C+=(C.indexOf("?")==-1?"?":"&");C+=B+"="+A;return C}function setParamURL(B){if(B.indexOf("id=")!=-1){var A=(B.match(/id=\d+/).toString().substr(3));return A}}var loginFlag=function(){};(function loginStatus(){var A=new Array();A.loginTip=0;loginFlag.prototype.setLoginArr=function(B,C){A[B]=C};loginFlag.prototype.getLoginArr=function(B){return A[B]}})();var loginflag=new loginFlag();function getCookie(C){var B="(?:; )?"+C+"=([^;]*);?";var A=new RegExp(B);if(A.test(document.cookie)){return decodeURIComponent(RegExp["$1"])}else{return null}}function setCookie(F,H,B,C,A,E){var D=F+"="+encodeURIComponent(H);if(B){D+="; expires="+B.toGMTString()}if(C){D+="; path="+C}if(A){D+="; domain="+A}if(E){D+="; secure"}document.cookie=D}function setSug(){g_pop=new Popup({contentType:1,isReloadOnClose:false,width:300,height:180});g_pop.setContent("title","设置");g_pop.setContent("contentUrl","/page/suggestion.html");g_pop.build();g_pop.show()}function userlogin(B,A){userlogin.onLoginSuccess=B||userlogin.defalutLoginSuccess;userLogin()}userlogin.defalutLoginSuccess=userlogin.onLoginSuccess=function(){window.location.href=window.location.href.replace(/#.*$/g,"")};userlogin.onLoginFailed=function(){window.location="http://passport.baidu.com/?login&tpl=wk&u="+escape("http://baike.baidu.com/")};userlogin.check=function(D,A,C){function B(F,H,E){if(baidu.trim(F.responseText)=="0"){if(E){E()}else{userlogin(H,C)}return false}if(H){H()}return true}baidu.ajax.get("/api/login/?t="+(new Date()).getTime()+(C?("&fr="+C):""),function(E){B(E,D,A)})};userlogin.api=(function(){var loginConfig={immediate:true,jumpUrl:"http://baike.baidu.com/page/logincallback.html?fr=loginapi",labelName:{password:"密\u3000码："},onSuccess:function(){window.location=location.href.replace(/#.*/,"")},onSystemError:function(){window.location=["http://passport.baidu.com/?login","tpl=wk",("u="+escape("http://baike.baidu.com/"))].join("&")},container_id:"user-login-container"};var loginParams={};function getPassportConfig(){var loginUrl=["http://passport.baidu.com/api/?login","tpl=wk","callback=userlogin.api.init",("time="+new Date().getTime())].join("&");baidu.sio.callByServer(loginUrl)}function setConfig(conf){baidu.object.extend(loginConfig,conf)}function configInit(conf){loginParams=eval(conf);if(loginParams.error_no==1){}else{baidu.sio.callByBrowser(loginParams.jslink,buildLoginPage)}}function buildLoginPage(){bdPass.LoginTemplate.render(loginParams,loginConfig.container_id,loginConfig)}return{get:getPassportConfig,set:setConfig,init:configInit,render:buildLoginPage}})();userlogin.userbarinit=function(){var A=baidu.G("logout");if(A&&(A.className!="goto-index")){A.href="https://passport.baidu.com/?logout&u="+escape(location.href)}};baidu.dom.ready(userlogin.userbarinit);baidu.more.ns("bk.userbar");bk.userbar.check=function(){baidu.ajax.get("/api/login/?t="+(new Date()).getTime(),function(A){bk.userbar.build(A)})};bk.userbar.build=function(req){var user=eval("("+req.responseText+")");var userbarHtml=[];if(user){userbarHtml.push('<strong><a href="http://passport.baidu.com/center" target="_blank" id="login-user-name" class="nslog:80">'+user.name+"</a></strong> "+user.title);if(user.forbid){userbarHtml.push('<span class="red">禁止发表词条</span>')}userbarHtml.push('<span id="mnum" class="nslog-area" data-nslog-type="85"></span><span class="usrbar-split">|</span><span id="my_home_container"><a id="my_home" target="_blank" class="nslog:81" href="http://baike.baidu.com/uc/home">我的百科</a></span><span class="usrbar-split">|</span><a target="_blank" href="http://zhidao.baidu.com/q?ct=24&amp;cm=16&amp;tn=ucframework&amp;fr=wk" class="nslog:84">我的知道</a>');if(user.hasspace=="true"){userbarHtml.push('<span class="usrbar-split">|</span><a target="_blank" href="http://hi.baidu.com/sys/checkuser/'+user.name+'/3" class="nslog:86">我的空间</a>')}userbarHtml.push('<span class="usrbar-split">|</span><a href="http://www.baidu.com" class="nslog:87">百度首页</a> <span class="usrbar-split">|</span> ');userbarHtml.push('<a id="logout" target="_self" href="https://passport.baidu.com/?logout&amp;u=http://baike.baidu.com" nslog:89">退出</a>')}else{userbarHtml.push('<a href="http://www.baidu.com" class="nslog:87">百度首页</a><span class="usrbar-split">|</span><a href="https://passport.baidu.com/?login&amp;tpl=wk" class="nslog:88" onclick="userlogin();return false">登录</a>')}if(user){userbarHtml.push('<div id="nav_extra" style="display:none"><div class="top"><a href="/uc/home" class="nslog:81" target="_blank">我的百科</a></div><div class="body">');if(user.channeladmin){userbarHtml.push('<div><a target="_blank" href="http://baike.baidu.com/channel-admin/" class="nslog:1002">分类管理员</a></div>')}userbarHtml.push('<div><a target="_blank" class="nslog:82" href="http://baike.baidu.com/uc/effort">我的贡献</a></div><div><a target="_blank" class="nslog:83" href="http://baike.baidu.com/uc/draft">草稿箱</a></div><div><a target="_blank" class="nslog:1003" href="http://baike.baidu.com/uc/task">我的任务</a></div><div><a target="_blank" class="nslog:1004" href="http://baike.baidu.com/uc/recommend">为我推荐</a></div></div></div>')}baidu.g("usrbar").innerHTML=userbarHtml.join("");bk.userbar.init();baidumessage();userlogin.userbarinit();if(user){bk.event.fire("bk.event.user.login")}};function userbarEvent(){var E,D,B;function A(I,H){I.style.display=B?"none":"block";I.style.left=H+"px"}function F(H){B&&userbarHover(H)}function C(){E=null;D=null;baidu.un(window,"unload",C)}baidu.on(window,"resize",F);baidu.on(document,"click",F);baidu.on(window,"unload",C);return function(I){(I||window.event).cancelBubble=true;E=E||baidu.G("usrbar");D=D||baidu.G("nav_extra");var J=baidu.G("my_home"),K=E.scrollHeight,H=J.offsetLeft;H=H-6;A(D,H);baidu.G("usrbar").scrollWidth;B=!B}}baidu.more.ns("bk.userbar");bk.userbar.init=function(){window.userbarHover=userbarEvent();var A=baidu.G("my_home_container");var B=baidu.G("nav_extra");if(A){baidu.on(A,"mouseover",userbarHover)}if(B){baidu.on(B,"mouseout",function(E){var D=baidu.event.getPageX(E);var H=baidu.event.getPageY(E);var F=baidu.dom.getPosition(B);var C=baidu.q("body",B,"div");var C=C&&C[0];if(C){if(D<F.left+3||D>=F.left+parseInt(baidu.getStyle(B,"width"),10)-3||H<F.top+3||H>=baidu.dom.getPosition(C).top+C.offsetHeight-3){if(B.style.display=="block"){userbarHover(E)}}}})}};var pop={onOk:function(){},onclosed:function(){},onshow:function(){},create:function(){if(!baidu.G("pop-main")){var B=document.createElement("div");B.id="pop-shadow";var C=document.createElement("div");C.id="pop-main";C.style.width="500px";var A=document.createElement("iframe");A.id="pop-shadow-iframe";var D=[,'<div class="p-bg">','<div class="p-top">','<div class="p-title"><div id="pop-close"></div><p id="pop-title">信息提示</p></div>','<div class="p-r1"></div><div class="p-r2"></div>',"</div>",'<div class="p-body"><div class="p-body-inner">','<iframe id="pop-iframe-content" name="pop-iframe-content" width="100%" frameborder="0" scrolling="no" src="about:blank"></iframe>','<div id="pop-text-content"></div>',"</div></div>",'<div class="p-bottom"><div class="p-r3"></div><div class="p-r4"></div><div class="clear"></div></div>','</div><div id="pop-shadow-bg"></div>'];C.innerHTML=D.join("");document.body.insertBefore(A,document.body.firstChild);document.body.insertBefore(C,document.body.firstChild);document.body.insertBefore(B,document.body.firstChild)}},resize:function(B,A,L){var D=baidu.page;var P=D.getScrollTop();var M=D.getWidth()||500;var E=D.getHeight()||500;var O=baidu.G("pop-shadow");var C=baidu.G("pop-shadow-bg");var J=baidu.G("pop-main");var I=baidu.G("pop-shadow-iframe");var N=A||parseInt(J.style.width,10)||500;var F=L||J.offsetHeight||parseInt(J.style.height,10)||500;O.style.width=M+"px";O.style.height=E+"px";O.style.left=O.style.top="0px";I.style.width=(M-20)+"px";I.style.height=(E-20)+"px";I.style.top=I.style.left="5px";var K=(D.getViewWidth()-N)/2;var H=(D.getViewHeight()-F)/2+P;if(K<1){K=P}if(H<1){H="20"}J.style.left=K+"px";J.style.top=H+"px";J.style.width=N+"px";C.style.height=F+"px";if(L&&baidu.G("pop-iframe-content").style.display=="block"){baidu.G("pop-iframe-content").style.height=L+"px"}},hide:function(){pop.onclosed();var A=function(E){E=baidu.G(E);if(E){baidu.hide(E)}};try{A("pop-main");A("pop-shadow");A("pop-shadow-iframe");var D=baidu.G("pop-iframe-content");try{D.src="about:blank"}catch(C){try{D.location="about:blank"}catch(C){}}}catch(B){}baidu.un(window,"resize",pop.resize);baidu.un(document,"onkeydown",pop.keyListener)},keyListener:function(B){B=window.event||B;var A=B.which||B.keyCode;if(27==A){pop.hide()}},config:function(H,A){pop.create();if(H){baidu.G("pop-title").innerHTML=H}pop.onclosed=A.onclosed||function(){};pop.onshow=A.onshow||function(){};var I=baidu.G("pop-iframe-content");var C=baidu.G("pop-text-content");if(A.url){if(A.url!=true){C.innerHTML="";baidu.hide(C);I.style.display="block";try{I.src=A.url}catch(E){try{document.frames["pop-iframe-content"].location=A.url}catch(E){}}}if(A.scrollX){I.style.overflowX=A.scrollX}if(A.scrollY){I.style.overflowY=A.scrollY}if(A.scroll){I.style.overflow=A.scroll}}else{if(A.info){baidu.hide(I);C.style.display="block";C.innerHTML=A.info}}var B=A.width||450;var F=A.height||400;var D=baidu.G("pop-main");D.style.width=B+"px";if(A.url&&I.style.display=="block"){I.style.height=F+"px";I.style.width=(B-30)+"px"}},show:function(B,A){pop.create();pop.config(B,A);baidu.G("pop-close").onclick=pop.hide;baidu.G("pop-main").style.display="block";baidu.G("pop-shadow").style.display="block";baidu.G("pop-shadow-iframe").style.display="block";baidu.G("pop-title").onselectstart=function(){return false};pop.resize();baidu.on(window,"resize",pop.resize);baidu.on(document,"onkeydown",pop.keyListener)}};baidu.more.ns("tools.text");tools.text.cutByWidth=function(A,D,E){if(E){if(!baidu.browser.firefox||baidu.browser.firefox<1){return }}for(var B=A.length-1;B>=0;B--){if(A[B].scrollWidth>D){A[B].innerHTML+="..."}var C=A[B].innerHTML;while(A[B].scrollWidth>D){if(A[B].scrollWidth<8){break}C=C.substr(0,C.length-4)+"...";A[B].innerHTML=C}}};baidu.more.ns("tools.image");tools.image.sizelimit=function(B,H,F,C){if(B.width<=H&&B.height<=F){return }if(B.width>0&&B.height>0){var A=B.width;var E=B.height;var D=Math.min(H/A,F/E);B.style.height="";B.style.width="";B.height=Math.ceil(E*D);B.width=Math.ceil(A*D);if(C){B.style.marginTop=((F-B.height)/2)+"px"}}else{B.style.height="";B.style.width="";B.style.width=H;B.style.height=F}};baidu.more.ns("tools.fixable");tools.fixable=function(D,C){var D=baidu.g(D);if(D){var B=baidu.page.getHeight();if(baidu.ie&&baidu.ie<7){baidu.setStyle(D,"position","absolute");var A=(C.top||baidu.page.getViewHeight());D.style.setExpression("top","eval((document.documentElement||document.body).scrollTop+"+A+") + 'px'");delete C.top}else{baidu.setStyle(D,"position","fixed")}baidu.setStyles(D,C)}};baidu.more.ns("tool.dom");tool.dom.getTopPos=function(B){var A=B.offsetTop;while(B=B.offsetParent){A+=B.offsetTop}B=null;return A};baidu.dom.ready(function(){baidu.on(document,"mousedown",function(I){var M=baidu.event.get(I);var P=M.target;var N=3;var C=false;var H="";var L=true;var O=/nslog:(\d+)/;var A=/nslog-area/;var B=window.location.href;while(P){if(P.nodeType==1){var K=P.className.match(O);if(N>0){B=P.href?P.href:window.location.href;if(L&&K){var F={x:M.pageX,y:M.pageY};var E=P.getAttribute("log-data-detail");var D=P.getAttribute("log-once-flag");if(E){F["log-data-detail"]=E}if(!D||!P.logFlag){nslog(B,K[1],F);L=false;if(D){P.logFlag=true}}}if(!C&&P.href){C=true;H=B}}if(C&&A.test(P.className)){var J=P.getAttribute("data-nslog-type");var F={x:M.pageX,y:M.pageY};var E=P.getAttribute("log-data-detail");if(E){F["log-data-detail"]=E}if(J){nslog(H,J,F)}}}N--;P=P.parentNode}P=null;O=null;A=null})});baidu.dom.ready(function(){if(baidu.G("search")){baidu.sio.callByBrowser("/js/sug.js")}});baidu.more.ns("lemma");baidu.more.ns("bk.view");baidu.more.ns("bk.view");baidu.more.ns("bk.view.timer");bk.view.catalog=function(){var A={};A.init=function(B){this.subid=B;this.holder1=baidu.g("catalog-holder-"+B);this.holder2=baidu.g("catalog-holder-2-"+B);this.container=baidu.g("catalog-"+B);this.temp=null;this.data=null;this.mT=null;this.fadeT=null;this.mItems=this.holder1.getElementsByTagName("DD");this.mItemNum=this.holder1.getElementsByTagName("DD").length;this.mSubItems=null;this.mSubItemNum=0;this.mSub=this.holder1.getElementsByTagName("OL");this.mSubNum=this.mSub.length;this.mShowNum=8;this.h=0;this.dataH=0;this.fade=0};A.start=function(C){if(!baidu.g("catalog-"+C)){return }A.init(C);if(A.mItemNum<=A.mShowNum&&A.mSubNum==0){return }var B="";var I="";for(var E=0;E<A.mSubNum;E++){A.mSub[E].style.display="inline"}var D=A.holder1.offsetWidth;for(var E=0;E<A.mSubNum;E++){A.mSub[E].style.display="none"}if(A.mItemNum>A.mShowNum){for(var E=0;E<A.mShowNum;E++){B+="<dd>"+A.mItems[E].innerHTML+"</dd>"}I="<dd id='cata-temp"+C+"' class='temp'><ul id='cata-data"+C+"' class='data'>";for(var E=A.mShowNum;E<A.mItemNum;E++){I+="<li>"+A.mItems[E].innerHTML+"</li>"}I+="</ul></dd>";A.holder2.innerHTML=B+I;for(var E=A.mShowNum;E<A.mItemNum;E++){A.mItems[E].style.display="none"}A.temp=baidu.g("cata-temp"+C);A.data=baidu.g("cata-data"+C);A.holder2.style.display="block";A.temp.style.height=0+"px";A.dataH=A.data.offsetHeight;var H=Math.round((A.dataH-A.mShowNum*22)/2);H=H-H%22;A.step=Math.max(22,H)}else{A.holder2.innerHTML=A.holder1.innerHTML}A.holder1.style.width=D+"px";A.holder2.style.width=D+"px";A.holder1.style.visibility="hidden";A.holder1.style.paddingBottom="20px";A.holder2.style.display="block";A.holder2.className="holder2 arr";var F=document.createElement("div");F.id="catalog-holder"+A.subid;F.className="nslog:1017 catalog-holder";F.innerHTML="展开";A.holder2.appendChild(F);A.mSubItems=A.holder2.getElementsByTagName("OL");A.mSubItemNum=A.mSubItems.length;baidu.on(F,"mouseover",function(){baidu.addClass(this,"hover")});baidu.on(F,"mouseout",function(){baidu.removeClass(this,"hover")});baidu.on(F,"click",A.toggle);baidu.on(A.holder2,"mousedown",A.holderClick);F=null};A.status=false;A.toggle=function(){clearTimeout(A.mT);try{baidu.un(document,"click",A.outclick)}catch(B){}if(A.status){A.min()}else{A.mT=setTimeout(A.maxM,10);A.status=true;baidu.on(document,"click",A.outclick)}};A.outclick=function(D){var B=baidu.event.get(D);var C=B.target;if(!baidu.dom.contains(A.container,C)){clearTimeout(A.mT);A.min();try{baidu.un(document,"click",A.outclick)}catch(D){}}B=C=null};A.holderClick=function(E){var B=baidu.event.get(E);var C=B.target;if(A.status){if(C.nodeType==1){if(C.nodeName.toUpperCase()=="A"){A.min();var D=C.href.match(/#(.*)/);if(D){location.hash=D[0]}}}}else{if(C.nodeType==1&&C.id==("catalog-holder"+A.subid)){}else{if(!(C.nodeType==1&&C.nodeName.toUpperCase()=="A")){A.toggle()}}}B=C=null};A.min=function(){clearTimeout(A.mT);if(A.mSubNum>0){A.mT=setTimeout(A.hideSecondTitle,10)}else{A.mT=setTimeout(A.minM,100)}A.status=false};A.maxM=function(){baidu.g("catalog-holder"+A.subid).className="nslog:1018 catalog-holder";baidu.g("catalog-holder"+A.subid).innerHTML="收起";A.holder2.className="holder2 up";if(A.h<A.dataH){A.h+=A.step;A.h=Math.min(A.h,A.dataH);A.temp.style.height=A.h+"px";A.data.style.marginTop=(A.h-A.dataH)+"px";A.mT=setTimeout(A.maxM,10)}else{A.showSecondTitle()}A.status=true};A.minM=function(){baidu.g("catalog-holder"+A.subid).innerHTML="展开";A.holder2.className="holder2 arr";if(A.h>0){A.h-=A.step;A.h=Math.max(A.h,0);A.temp.style.height=A.h+"px";A.data.style.marginTop=(A.h-A.dataH)+"px";A.mT=setTimeout(A.minM,10)}};A.fadeIn=function(){clearTimeout(A.fadeT);if(A.fade>=100){return }A.fade+=25;for(var B=0;B<A.mSubItemNum;B++){A.mSubItems[B].style.filter="Alpha(Opacity="+A.fade+")";A.mSubItems[B].style.opacity=A.fade/100}A.fadeT=setTimeout(A.fadeIn,20)};A.fadeOut=function(){clearTimeout(A.fadeT);if(A.fade<=25){for(var B=0;B<A.mSubItemNum;B++){A.mSubItems[B].style.display="none"}if(A.mItemNum>A.mShowNum){A.h=A.data.offsetHeight;A.temp.style.height=A.h+"px"}A.mT=setTimeout(A.minM,20);return }A.fade-=25;A.fadeT=setTimeout(A.fadeOut,20)};A.showSecondTitle=function(){for(var B=0;B<A.mSubItemNum;B++){A.mSubItems[B].style.display="block"}if(A.mItemNum>A.mShowNum){A.h=A.data.offsetHeight;A.temp.style.height=A.h+"px"}else{}clearTimeout(A.mT)};A.hideSecondTitle=function(){clearTimeout(A.mT);for(var B=0;B<A.mSubItemNum;B++){A.mSubItems[B].style.display="none"}if(A.mItemNum>A.mShowNum){A.h=A.data.offsetHeight;A.temp.style.height=A.h+"px"}A.mT=setTimeout(A.minM,20)};A.showCatalog=function(){var B=A.holder1.style.display=="none";A.holder1.style.display=B?"block":"none";if(A.mItemNum<=A.mShowNum&&A.mSubNum==0){A.holder2.style.display="none"}else{A.holder2.style.display=B?"block":"none"}baidu.g("dir-alt-"+A.subid).innerHTML=B?"\u9690\u85cf":"\u663E\u793A"};return{start:A.start,showCatalog:A.showCatalog}};baidu.more.ns("bk.view");baidu.more.ns("bk.view.timer");baidu.more.ns("bk.view.sidecatalog");bk.view.sidecatalog.step=22;bk.view.sidecontentList=[];bk.view.sidesubitemList=[];bk.view.sidecatalog.vHeight=80;bk.view.sidecatalog.togglestatus=false;bk.view.sidecatalog.checkToShow=function(){var E=baidu.page.getScrollTop();var F=baidu.page.getViewHeight();var C=baidu.q("b-ent-section");var D=C.length?(baidu.dom.getPosition(C[0]).top-50):800;var B=Math.min(F*2,D);var A=baidu.page.getHeight()-F-20;if(E<B){return false}else{return true}};bk.view.sidecatalog.contentScroll=function(E){var C=baidu.g("side-title-list");var B=E*bk.view.sidecatalog.step;var D=bk.view.sidecatalog.vHeight;var H=bk.view.sidecatalog.getTotalHeight()-70;if(D<=0){return }var F=parseInt(C.style.top)||0;var I=F+B;var J="normal";if(I>=0){I=0;J="top"}if(I+H<=D){I=Math.min(-H+D,0);J=(J=="top")?"both":"bottom"}bk.view.sidecatalog.statuschange(J);I=I-I%bk.view.sidecatalog.step;var A=new FX(C,{top:{to:I}},0.3,"linear");A.start()};bk.view.sidecatalog.init=function(){var C=baidu.q("holder1","content");var B=baidu.g("page");var A=baidu.g("sublemma-options-list");if(!A&&C.length==0){baidu.g("sidebar").style.visibility="hidden";nslog("sidebar",1025,{catalog:0})}else{bk.view.sidecatalog.contentbuild();baidu.on("side-catalog-up","mousedown",function(){clearInterval(bk.view.timer.ele_side_catalog_scroll);bk.view.timer.ele_side_catalog_scroll=setInterval(function(){bk.view.sidecatalog.contentScroll(3)},300)});baidu.on("side-catalog-up","mouseup",function(){clearInterval(bk.view.timer.ele_side_catalog_scroll)});baidu.on("side-catalog-up","click",function(){clearInterval(bk.view.timer.ele_side_catalog_scroll);bk.view.sidecatalog.contentScroll(3)});baidu.on("side-catalog-down","mousedown",function(){clearInterval(bk.view.timer.ele_side_catalog_scroll);bk.view.timer.ele_side_catalog_scroll=setInterval(function(){bk.view.sidecatalog.contentScroll(-3)},300)});baidu.on("side-catalog-down","click",function(){clearInterval(bk.view.timer.ele_side_catalog_scroll);bk.view.sidecatalog.contentScroll(-3)});baidu.on("side-catalog-down","mouseup",function(){clearInterval(bk.view.timer.ele_side_catalog_scroll)});baidu.on("side-catalog-up","mouseover",function(D){if(this.className!="disabled"){baidu.addClass(this,"hover")}});baidu.on("side-catalog-up","mouseout",function(D){baidu.removeClass(this,"hover")});baidu.on("side-catalog-down","mouseout",function(D){baidu.removeClass(this,"hover")});baidu.on("side-catalog-down","mouseover",function(D){if(this.className!="disabled"){baidu.addClass(this,"hover")}});nslog("sidebar",1025,{catalog:1})}};bk.view.sidecatalog.realList=[];bk.view.sidecatalog.realListUpdate=function(){bk.view.sidecatalog.realList=[];baidu.each(bk.view.sidecontentList,function(A){if(A.display){bk.view.sidecatalog.realList.push(A)}})};bk.view.sidecatalog.contentbuild=function(){var H=baidu.g("content");var K=baidu.q("headline-1",H);var I=baidu.q("headline-2",H);var M=baidu.dom.query(".b-ent-section h2",H);baidu.each([M,K,I],function(O){baidu.each(O,function(P){baidu.addClass(P,"bk-sidecatalog-title")})});var D=[];var F=baidu.q("bk-sidecatalog-title",H);function A(O){return O.replace(/<[^>]*>/g,"")}function B(P,Q){var O=A(baidu.q("headline-content",P)[0].innerHTML);return{ele:P,title:O,level:Q,display:true}}baidu.each(F,function(P,O){var Q=P.tagName.substr(1);if(Q==2&&(baidu.dom.hasClass(P.parentNode,"b-ent-section"))){Q=1}var P=B(P,Q);D.push(P)});if(M&&M.length>0){for(var E=0,C=D.length;E<C;E++){if(D[E].level==1){var N=D[E];bk.view.sidesubitemList.push(N);var J=baidu.dom.hasClass(N.ele.parentNode,"b-ent-section-expand");N.children=[];for(var L=E+1;L<C&&(D[L].level>1);L++){D[L].display=J;N.children.push(D[L])}if(N.children.length==1){C=C-N.children.length;baidu.each(N.children,function(O){baidu.array.remove(D,O)});N.children=[]}else{E=L-1}}}}bk.view.sidecontentList=D;bk.view.sidecatalogDomInit();bk.view.sidecatalog.realListUpdate();bk.event.on("bk.event.SectionStatusChanged",bk.view.sidecatalog.subitemchanged)};bk.view.sidecatalogDomInit=function(){var A=document.createElement("div");var H=document.createElement("div");var E=document.createElement("div");var K=document.createElement("div");var J=document.createElement("div");H.id="side-title-list";A.id="side-title-panel";E.id="side-catalog-up";K.id="side-catalog-down";J.id="side-lemma-title";var B={"分集剧情":"series","剧情简介":"synopsis"};baidu.each(bk.view.sidecontentList,function(O,L){var M=document.createElement("h"+O.level);if(O.level==1&&baidu.dom.hasClass(O.ele.parentNode,"b-ent-section-expand")){M.className="expend"}var N=["<a href='#' class='nslog:1026' data-index = '"+L+"'",B[O.title]?("log-data-detail = '"+B[O.title])+"' ":"","title='",baidu.string.encodeHTML(O.title),"' title='"+O.title+"'>",O.title.subByte(28),"</a>"];M.innerHTML=N.join("");H.appendChild(M);O.item=M;if(!O.display){baidu.hide(M)}M=null});A.appendChild(H);var I=baidu.g("side-catalog-content");J.innerHTML=baikeViewInfo.title;E.innerHTML="<div></div>";K.innerHTML="<div></div>";I.appendChild(E);I.appendChild(J);I.appendChild(A);I.appendChild(K);var F=H.getElementsByTagName("a");for(var D=0,C=F.length;D<C;D++){baidu.on(F[D],"click",function(M){if(this.parentNode.tagName.toLowerCase()=="h1"){var L=this.parentNode;baidu.each(bk.view.sidesubitemList,function(O,N){if(O.item==L){bk.view.showSubLemmaItem(N);setTimeout(bk.view.sidecatalog.resize,200)}})}bk.view.sidecatalog.scrollto(baidu.dom.getAttr(this,"data-index"));baidu.event.preventDefault(M)})}F=null;H=A=E=K=I=null};bk.view.sidecatalog.scrollto=function(A){if(bk.view.sidecontentList[A]){var B=tool.dom.getTopPos(bk.view.sidecontentList[A].ele)-10;window.scrollTo(0,B)}};bk.view.sidecatalog.statuschange=function(A){switch(A){case"top":baidu.g("side-catalog-up").className="disable";baidu.removeClass("side-catalog-down","disable");break;case"bottom":baidu.g("side-catalog-down").className="disable";baidu.removeClass("side-catalog-up","disable");break;case"normal":baidu.removeClass("side-catalog-up","disable");baidu.removeClass("side-catalog-down","disable");break;case"both":baidu.g("side-catalog-up").className="disable";baidu.g("side-catalog-down").className="disable";break}};bk.view.sidecatalog.subitemchanged=function(C){var A=baidu.dom.hasClass(C.ele,"b-ent-section-expand");var B=bk.view.sidesubitemList[C.index];if(B){baidu.dom[A?"addClass":"removeClass"](B.item,"expend");baidu.each(B.children,function(D){baidu[A?"show":"hide"](D.item);D.display=A});bk.view.sidecatalog.realListUpdate();bk.view.sidecatalog.resize()}};bk.view.sidecatalog.toggle=function(){var A=false;return function(){baidu[A?"hide":"show"]("side-catalog-content");baidu[A?"removeClass":"addClass"]("sidebar","show");A=!A;bk.view.sidecatalog.togglestatus=A;var B=bk.view.sidecatalog.tofocus;if(baidu.ie&&baidu.ie<7){B=bk.view.sidecatalog.delayfocus}if(A){bk.view.sidecatalog.tofocus();baidu.on(window,"scroll",B)}else{try{baidu.un(window,"scroll",B)}catch(C){}}nslog("sidecatalog.toggle",1027,{status:A})}};bk.view.sidecatalog.delayfocus=function(){clearTimeout(bk.view.timer.scroll_catalogfocus);bk.view.timer.scroll_catalogfocus=setTimeout(bk.view.sidecatalog.tofocus,200)};bk.view.sidecatalog.tofocus=function(){if(bk.view.sidecatalog.togglestatus){var I=baidu.page.getScrollTop()+70;var D=baidu.g("side-title-list");if(D){var F=bk.view.sidecatalog.vHeight;var L=bk.view.sidecatalog.getTotalHeight()-70;if(F<=0||L==0){return }for(var H=0,B=bk.view.sidecatalog.realList.length;H<B;H++){var J=bk.view.sidecatalog.realList[H];if(tool.dom.getTopPos(J.ele)<=I&&((H+1==B)||((H+1<B)&&tool.dom.getTopPos(bk.view.sidecatalog.realList[H+1].ele)>I))){var C=H*bk.view.sidecatalog.step;var A=F/2;A=A-A%22;var E=Math.min(F-C-A,0);var K="normal";if(E+L<=F){E=-L+F;K="bottom"}if(E==0){K=(K=="bottom")?"both":"top"}bk.view.sidecatalog.statuschange(K);baidu.dom.setStyle(D,"top",E);baidu.addClass(J.item,"on")}else{baidu.removeClass(J.item,"on")}}}}};bk.view.sidecatalog.getTotalHeight=function(){var A=0;baidu.each(bk.view.sidecontentList,function(B){if(B.display){A++}});return(A*bk.view.sidecatalog.step+70)};bk.view.sidecatalog.resize=function(I){var F=baidu.g("sidecatalog");var D=baidu.g("side-catalog-content");var E=baidu.g("wrap");var H=baidu.dom.getPosition(E);var A=bk.view.sidecatalog.getTotalHeight();var C=Math.min(baidu.page.getViewHeight()-200,510);C=C-C%22;if(A>C){A=C}if(A<92){A=92}bk.view.sidecatalog.vHeight=A-70;tools.fixable(F,{top:(baidu.page.getViewHeight()-150),left:(E.offsetWidth+H.left-40-246)});tools.fixable(D,{overflow:"hidden",height:A,top:(baidu.page.getViewHeight()-A-60),left:(E.offsetWidth+H.left-259)});var B=baidu.g("side-title-panel");if(B){baidu.dom.setStyle(B,"height",A-70)}bk.view.sidecatalog.tofocus()};bk.view.sidecatalog.scroll=function(B){var A=baidu.g("sidecatalog");clearTimeout(bk.view.timer.ele_side_catalog);if(!bk.view.sidecatalog.checkToShow()){baidu.hide(A);baidu.hide(baidu.g("side-catalog-content"))}else{baidu.show(A);if(bk.view.sidecatalog.togglestatus){baidu.show("side-catalog-content")}}};baidu.dom.ready(function(){bk.view.sidecatalog.init();bk.view.sidecatalog.resize();bk.view.sidecatalog.scroll();baidu.on(window,"scroll",bk.view.sidecatalog.scroll);baidu.on("sidebar","click",bk.view.sidecatalog.toggle());baidu.on(window,"resize",bk.view.sidecatalog.resize)});var Detect={detecting:function(){handle_doDetect()},url:"",id:"",subId:"",uptime:"",upnum:"",upst:"",content:"",latestid:""};function formatDetect(B){var A=Fe.Dialog.open("/page/detect.html",B);return A}Detect.callback=function(D,A){if(D.toAuditDivideVersionNum!=0){Detect.content="抱歉，该词条当前存在待通过版本，请稍后再进行操作。";var C=formatDetect({title:"编辑提示",width:"388px",height:"190px",buttonbar:true,buttonAccept:false,buttonCancel:true,contentType:"HTMLUrl",locked:true,buttonCancelValue:"返回"})}else{if(D.conflictVersionNum>=D.conflictLimit){if(D.conflictLimit){var B;if(baidu.G("BkLogUser")){B="func=editdeny&username="+baidu.G("BkLogUser").innerHTML+"&lid="+baikeViewInfo.id}else{B="func=editdeny&lid="+baikeViewInfo.id}nslog.stat(B);Detect.content="很抱歉，该词条已有多个版本正在提交中，您当前无法编<br>辑该词条：（<br><br>百科建议您晚些时候再尝试编辑该词条，或尝试编辑其他<br>词条。";var C=formatDetect({title:"编辑提示",width:"388px",height:"190px",buttonbar:true,buttonAccept:false,buttonCancel:true,contentType:"HTMLUrl",locked:true,buttonCancelValue:"返回"})}else{if(D.isMidNight==1){Detect.content='您当前的编辑时间属百科<a href="http://www.baidu.com/search/baike_help.html#&#20160;&#20040;&#26159;&#22812;&#38388;&#32534;&#36753;&#25552;&#31034;" target="_blank">特殊编辑时段</a>。<br><br>为保证您的编辑成果在提交后的最短时间内生效，百科建<br>议您选择其他时间进行编辑：）<br><br>仍然要继续编辑吗？';var C=formatDetect({title:"编辑提示",width:"388px",height:"190px",buttonbar:true,buttonAccept:true,buttonCancel:true,contentType:"HTMLUrl",locked:true});C.onaccept=function(){if(!A){window.location=Detect.url}else{A()}}}else{if(!A){window.location=Detect.url}else{A()}}}}else{if((D.conflictDegree==1)||(D.conflictDegree==2)){Detect.content="该词条当前已有其他版本正在等待通过。<br><br>为了保障您的编辑能得到及时通过，建议您稍后再编辑<br>本词条：）<br><br>仍然要继续吗？";var C=formatDetect({title:"编辑提示",width:"388px",height:"190px",buttonbar:true,buttonAccept:true,buttonCancel:true,contentType:"HTMLUrl",locked:true});C.onaccept=function(){if(!A){window.location=Detect.url}else{A()}}}else{if(D.isMidNight==1){Detect.content='您当前的编辑时间属百科<a href="http://www.baidu.com/search/baike_help.html#&#20160;&#20040;&#26159;&#22812;&#38388;&#32534;&#36753;&#25552;&#31034;" target="_blank">特殊编辑时段</a>。<br><br>为保证您的编辑成果在提交后的最短时间内生效，百科建<br>议您选择其他时间进行编辑：）<br><br>仍然要继续编辑吗？';var C=formatDetect({title:"编辑提示",width:"388px",height:"190px",buttonbar:true,buttonAccept:true,buttonCancel:true,contentType:"HTMLUrl",locked:true});C.onaccept=function(){if(!A){window.location=Detect.url}else{A()}}}else{if(!A){window.location=Detect.url}else{A()}}}}}};Detect.doDetect=function(fn){var _str="tp=0&r="+Math.random()+"&lemmaid="+Detect.id+"&lemmaVersionId=0";var _url="/getConflictInfo/?"+_str;baidu.ajax.get(_url,function(xhr){Detect.callback(eval("("+xhr.responseText+")"),fn)})};function formatDetect_privcheck(B){var A=Fe.Dialog.open("/page/privcheck.html",B);return A}function handle_doDetect(){baidu.sio.callByBrowser("/js/Dialog/Dialog.js",function(){var A="/api/editcheck?lemmaId="+baikeViewInfo.id+(Detect.subId?("&subLemmaId="+Detect.subId):"")+"&flag=1";baidu.ajax.get(A,function(D,C){C=baidu.json.parse(C);if(typeof (C)=="object"){Detect.content="<center></center><p>"+baikeViewInfo.title+"已为"+C.stdWord+"的来源词，无法继续进行编辑，点击“确定”，您可创建标准词"+C.stdWord+"。</p>";var B=formatDetect_privcheck({title:"编辑提示",width:"402px",height:"220px",buttonbar:true,buttonAccept:true,buttonCancel:false,contentType:"HTMLUrl",locked:true});B.onaccept=function(){window.open("/search_noitem/?create=0&word="+C.stdWord)}}else{if(C=="12"){Detect.content='<center><h2>对不起，您暂时没有权限编辑该词条。</h2></center><p>您好，该词条内容已较丰富，现仅对百科等级达到<b>四级</b>，且通过率达到<b>85%</b>的科友开放编辑。</p><p>当您通过努力达到以上要求，就可以参与编辑该词条了。</p><p>如果您认为该词条还需进一步完善，可以到<a href="http://tousu.baidu.com/baike/add" target="_blank">投诉中心</a>反馈。</p><p><img src="http://img.baidu.com/img/baike/usercenter/growuptask/star.gif" class="star" />参加<a target="_blank" href="/uc/task" onclick="nslog(this.href, 449)">成长任务</a>，更快掌握百科编辑技巧，加速升级！</p>';var B=formatDetect_privcheck({title:"编辑提示",width:"402px",height:"220px",buttonbar:true,buttonAccept:true,buttonCancel:false,contentType:"HTMLUrl",locked:true})}else{Detect.doDetect()}}})})}baidu.more.ns("bk.view");bk.view.showEditLinks=function(){function A(F){var E=baidu.dom.getAttr(F,"data-edit-id");if(E){var D=E;var B=0;var C=0;E=E.split(":");if(E.length>1){D=E[0];B=E[1];C=E[2]}F.innerHTML=["<a href='#' class='nslog:1019' onclick='bk.view.editLemma(\"/edit/\",",D,",",B,",",C,");return false'>编辑本段</a>"].join("")}}baidu.each(baidu.q("editable-title"),A)};bk.view.showEditButton=function(){baidu.each(baidu.q("editable-lemma","content","span"),function(A){var B=baidu.dom.getAttr(A,"data-edit-id");if(B){baidu.on(A,"mouseover",function(){baidu.dom.addClass(this,"onhover")});baidu.on(A,"mouseout",function(){baidu.dom.removeClass(this,"onhover")});baidu.on(A,"click",function(){bk.view.editLemma("/edit/",B);nslog("edit",1020)})}})};bk.view.initDivideButton=function(){baidu.on("subSet","click",function(C){var B=baidu.dom.getAttr("subSet","data-edit-id");var A=baidu.dom.getAttr("subSet","href");bk.view.dividLemma(A,B,A.indexOf("polysemysetsub")!=-1?bk.view.setLemmaSub:false);baidu.event.preventDefault(C)})};bk.view.showSubLemmaEditLink=function(){baidu.each(baidu.q("b-ent-section-action-edit","content","a"),function(D){var C=baidu.dom.getAttr(D,"data-edit-id");if(C){var B=C.split(":")[0];var A=C.split(":")[1];baidu.on(D,"click",function(E){bk.view.editLemma("/edit/",B,A);nslog("edit",1020);baidu.event.stop(E)});D.innerHTML='<span class="med-slv-bdr"><em class="sprite"></em>编辑本义项</span>'}})};bk.view.showSetLemmaSubLink=function(){var A="hook-polysemy-set-sub";baidu.each(baidu.q(A,"content","a"),function(D){var C=baidu.dom.getAttr(D,"data-"+A);C=baidu.json.parse(C);if(C){var B=C.lemmaId;baidu.on(D,"click",function(E){userlogin.check(function(){bk.view.setLemmaSub(C)},false,"polysemysetsub");baidu.event.preventDefault(E)})}})};bk.view.showAddLemmaSubLink=function(){var A="hook-polysemy-add-sub";baidu.each(baidu.q(A,"content","a"),function(D){var C=baidu.dom.getAttr(D,"data-"+A);C=baidu.json.parse(C);if(C){var B=C.lemmaId;baidu.on(D,"click",function(F){Detect.url="/createpolysemyitem?lemmaid="+B;Detect.id=B;var E="polysemysetsub";userlogin.check(Detect.detecting,false,E);baidu.event.preventDefault(F)})}})};baidu.dom.ready(function(){if(baikeViewInfo.editable!="false"){bk.view.showEditLinks();bk.view.showEditButton();bk.view.showSubLemmaEditLink();bk.view.showAddLemmaSubLink();bk.view.showSetLemmaSubLink();bk.view.initDivideButton()}});bk.view.editRelated=function(){baidu.sio.callByBrowser("/js/Dialog/Dialog.js",function(){var A="/api/editcheck?lemmaId="+baikeViewInfo.id;baidu.ajax.get(A,function(D,C){if(C=="12"){Detect.content='<center><h2>对不起，您暂时没有权限编辑该词条。</h2></center><p>您好，该词条内容已较丰富，现仅对百科等级达到<b>四级</b>，且通过率达到<b>85%</b>的科友开放编辑。</p><p>当您通过努力达到以上要求，就可以参与编辑该词条了。</p><p>如果您认为该词条还需进一步完善，可以到<a href="http://tousu.baidu.com/baike/add" target="_blank">投诉中心</a>反馈。</p><p><img src="http://img.baidu.com/img/baike/usercenter/growuptask/star.gif" class="star" />参加<a target="_blank" href="/uc/task" onclick="nslog(this.href, 449)">成长任务</a>，更快掌握百科编辑技巧，加速升级！</p>';var B=formatDetect_privcheck({title:"编辑提示",width:"402px",height:"220px",buttonbar:true,buttonAccept:true,buttonCancel:false,contentType:"HTMLUrl",locked:true})}else{var E="/relatedEdit/?id="+baikeViewInfo.id+"&title="+G("titleVal").value;g_pop=new Popup({contentType:1,isReloadOnClose:false,width:536,height:550});g_pop.setContent("title","完善相关词条");g_pop.setContent("contentUrl",E);g_pop.build();g_pop.show()}})})};bk.view.setLemmaSub=function(){var A="/polysemysetsub/id="+Detect.id;g_pop=new Popup({contentType:1,isReloadOnClose:false,width:536,height:420});g_pop.setContent("title","义项设置");g_pop.setContent("contentUrl",A);g_pop.build();g_pop.show()};bk.view.editLemma=function(F,B,A,C){Detect.url=F+"id="+B+(A?"&subLemmaId="+A:"")+(C?"&dl="+C:"");if(location.href.indexOf("fr=")!=-1){var H=location.search.split("&");var D="";baidu.each(H,function(I,J){if(I.indexOf("fr=")!=-1){D=I}});Detect.url+="&"+D}Detect.id=B;Detect.subId=A;var E=(C?"part_edit":"edit");userlogin.check(Detect.detecting,false,E)};editLemmaPara=bk.view.editLemma;bk.view.dividLemma=function(B,A,C){Detect.url=B;Detect.id=A;userlogin.check(function(){baidu.sio.callByBrowser("/js/Dialog/Dialog.js",function(){Detect.doDetect(C)})},false,B)};baidu.more.ns("lemma");baidu.more.ns("bk.view");bk.view.vote=function(){var A="/view/getLemmaCountAsc/lemmaid="+baikeViewInfo.id+"&random="+Math.random();baidu.sio.callByBrowser(A)};function ascUpdateData(A){if(A.length==1){if(A[0]>=0){baidu.G("vote_num").innerHTML=A[0];baidu.G("vote_txt").innerHTML="您已评价，谢谢！"}else{if(A[0]==-1){baidu.G("vote_txt").innerHTML="您已评价，谢谢！"}}}}function gotoRef(D,A){if(!D){return false}var C=A?("_"+A):"";var F=D.innerHTML.replace(/\[/g,"").replace(/\]/g,"");var F=parseInt(F);if(F>=0){var B=baidu.G("refIndex_"+F+C);if(B&&B.parentNode){var E=baidu.dom.getPosition(B.parentNode).top-0;if(E>0){window.scrollTo(0,E)}}}}bk.view.showMoreRelated=function(){var B=baidu.G("word_more");var A=baidu.G("word_more_con");if(A.style.display=="none"){B.className="word_more2";A.style.display="";A.title="收起"}else{B.className="word_more1";A.style.display="none";A.title="展开"}};bk.view.coEditorInit=function(){var A=baidu.G("co-editors");if(!A){return }if(A.offsetHeight>25){baidu.show("more-coeditor");var B=A.getElementsByTagName("span");while(A.offsetHeight>25&&B.length>0){A.removeChild(B[B.length-1])}}};bk.view.relatedInit=function(){var A=baidu.G("word_more");if(!A){return false}var H=baidu.G("word_more_con").getElementsByTagName("a");var C=baidu.G("onelinespan");var B=baidu.G("onelinediv");var F=H.length;for(var D=0;D<F;D++){var E=H[D].cloneNode(true);C.appendChild(E);if(C.offsetWidth>(B.offsetWidth-60)){C.removeChild(E);A.style.visibility="visible";B.style.visibility="visible";baidu.on(A,"mouseover",function(){baidu.addClass(this.childNodes[0],"hover")});baidu.on(A,"mouseout",function(){baidu.removeClass(this.childNodes[0],"hover")});return }}B.style.visibility="visible"};bk.view.getDays=function(C){if(!C){return""}var A=C.match(/(\d{2,4})-(\d{1,2})-(\d{1,2})/);A[2]=parseInt(A[2],10)-1;var F=new Date(A[1],A[2],A[3]);var B=new Date();var D=new Date(B.getFullYear(),B.getMonth(),B.getDate()-1);var E=parseInt((F-D)/(1000*3600*24));switch(E){case 1:return"今天";case 0:return"昨天";case -1:return"2天前";case -2:return"3天前"}return C};function ctrlBKDynamic(){if(typeof bkDynamic!="undefined"){var A=bkDynamic[0];baidu.G("profileTitle").innerHTML=A;if(!!bkDynamic[1][0]){baidu.G("task").innerHTML="<dt><strong>"+bkDynamic[1][0]+'</strong>：<a href="'+bkDynamic[1][1][1]+'" target="_blank">'+bkDynamic[1][1][0]+'</a></dt> <dd><a href="'+bkDynamic[1][1][1]+'" target="_blank"><img src="'+bkDynamic[1][1][2]+'" width="160" height="81"></a></dd>';baidu.show("task")}if(!!bkDynamic[2][0]){baidu.G("notice").innerHTML="<dt><strong>"+bkDynamic[2][0]+"</strong>：</dt>"+bkDynamic[2][1];baidu.show("task")}baidu.show("bkDynamic");baidu.each(baidu.G("bkDynamic").getElementsByTagName("a"),function(C,B){baidu.on(C,"click",function(){nslog(this.href,235,{index:B})})})}}bk.view.getDynamicData=function(){baidu.sio.callByBrowser("/template/baikeDynamicData.js?random="+Math.random())};bk.view.reflow=function(){baidu.g("content").style.zoom=1.01;baidu.g("content").style.zoom=1};baidu.more.ns("lemma");baidu.more.ns("bk.view");baidu.more.ns("bk.view.sublemma");bk.view.sublemma.fx=null;bk.view.subLemmaTitleStatusChange=function(B,A){var C=baidu.dom.query("#content div.b-ent-section");if(C.length>0){baidu.each(C,function(I,E){if(A==E){return }if(baidu.dom.hasClass(I,"b-ent-section-expand")){if(E<A){var D=tool.dom.getTopPos(B);var H=D-baidu.page.getScrollTop()}baidu.dom.hide(baidu.dom.next(I));baidu.dom.removeClass(I,"b-ent-section-expand");if(E<A){var F=tool.dom.getTopPos(B);var J=F-H;if(document.documentElement.scrollTop){document.documentElement.scrollTop=J}else{if(document.body.scrollTop){document.body.scrollTop=J}}}setTimeout(function(){bk.event.fire("bk.event.SectionStatusChanged",{ele:I,index:E})},1)}else{}})}baidu.dom.toggle(baidu.dom.next(B));baidu.dom.toggleClass(B,"b-ent-section-expand");setTimeout(function(){bk.event.fire("bk.event.SectionStatusChanged",{ele:B,index:A})},1)};bk.view.showSubLemmaItem=function(A){var C=baidu.dom.query("div.b-ent-section");var C=baidu.dom.query("#content div.b-ent-section");if(C.length>0){baidu.each(C,function(E,D){if(D==A){return }if(baidu.dom.hasClass(E,"b-ent-section-expand")){baidu.dom.hide(baidu.dom.next(E));baidu.dom.removeClass(E,"b-ent-section-expand");setTimeout(function(){bk.event.fire("bk.event.SectionStatusChanged",{ele:E,index:D})},1)}else{}})}if(C[A]){var B=C[A];baidu.show(baidu.dom.next(B));baidu.addClass(B,"b-ent-section-expand");setTimeout(function(){bk.event.fire("bk.event.SectionStatusChanged",{ele:B,index:A})},1)}};bk.view.toggleSubLemmaItem=function(B){var A=baidu.dom.hasClass(baidu.g("b-ent-toc-trigger").parentNode.parentNode,"expand");bk.view.showorhideSubLemmaList(A);baidu.event.preventDefault(B)};bk.view.showorhideSubLemmaList=function(B){var E=baidu.g("b-ent-toc-trigger");var D=baidu.g("sublemma-options-list");if(bk.view.sublemma.fx){bk.view.sublemma.fx.stop()}if(B){var A=Math.ceil(D.getElementsByTagName("li").length/2)*26;var C=new FX(D,{height:{to:A}},0.3,"easeIn",function(){baidu.removeClass(E.parentNode.parentNode,"expand");E.parentNode.title="收起义项"});baidu.on(document,"click",bk.view.outclick)}else{var C=new FX(D,{height:{to:72}},0.3,"easeOut",function(){baidu.addClass(E.parentNode.parentNode,"expand");E.parentNode.title="更多义项"});try{baidu.un(document,"click",bk.view.outclick)}catch(F){}}bk.view.sublemma.fx=C;C.start()};bk.view.initSubLemmaList=function(){var E=baidu.dom.query("#content div.b-ent-section");function C(F){var K="hook-lemma-ext-module";var I="lemmaContent-";var H="data-src";var J=baidu.dom.query("#"+I+F+" ."+K);baidu.each(J,function(L,M){L.src=L.getAttribute(H);L=null})}if(E.length>0){var A={};function D(F){if(!A[F.index]&&baidu.dom.hasClass(F.ele,"b-ent-section-expand")){bk.view.catalog().start(F.index);C(F.index);bk.view.subLemmaImageInit(F);try{A[F.index]=true}catch(H){}}F=null}bk.event.on("bk.event.SectionStatusChanged",function(I){D(I);var H=baidu.g("sublemma-options-list").getElementsByTagName("li");if(H[I.index]){var F=baidu.dom.hasClass(I.ele,"b-ent-section-expand");baidu[F?"addClass":"removeClass"](H[I.index],"expand")}});baidu.each(E,function(H,F){if(baidu.dom.hasClass(H,"b-ent-section-expand")){C(F);A[F]=true}else{A[F]=false}baidu.on(H,"click",function(){bk.view.subLemmaTitleStatusChange(this,F)})});if(baidu.g("sublemma-options-list")){baidu.each(baidu.dom.query("#sublemma-options-list li>a"),function(H,F){baidu.on(H,"click",function(){bk.view.showSubLemmaItem(F)})});var B=baidu.g("b-ent-toc-trigger");if(B){baidu.on(B.parentNode,"click",bk.view.toggleSubLemmaItem);baidu.on(B.parentNode,"mouseover",function(){baidu.addClass(this,"toc-hover")});baidu.on(B.parentNode,"mouseout",function(){baidu.removeClass(this,"toc-hover")});baidu.on("sublemma-options-list","click",function(I){var F=baidu.event.get(I);var H=F.target;if(H.nodeType==1&&(H.tagName.toLowerCase()=="a"||H.tagName.toLowerCase()=="span")){return }else{nslog(location.href,515,{target:"list"});bk.view.showorhideSubLemmaList(1)}});bk.view.outclick=function(I){if(baidu.g("sidecatalog").style.display!="none"){return }var F=baidu.event.get(I);var H=F.target;if(!baidu.dom.contains(baidu.g("sublemma-options-list").parentNode,H)){bk.view.showorhideSubLemmaList(0)}F=H=null};baidu.on("sublemma-options-list","mouseover",function(F){baidu.addClass(baidu.g("b-ent-toc-trigger").parentNode,"toc-hover")});baidu.on("sublemma-options-list","mouseout",function(F){baidu.removeClass(baidu.g("b-ent-toc-trigger").parentNode,"toc-hover")})}}}else{C(0)}baidu.each(baidu.dom.query("#content .b-ent-section-action-toggle"),function(F){baidu.on(F,"mouseover",function(){baidu.addClass(this,"section-hover")});baidu.on(F,"mouseout",function(){baidu.removeClass(this,"section-hover")});baidu.on(F,"click",function(H){baidu.event.preventDefault(H)})})};bk.view.copylog=bk.view.copylog||function(){};bk.view.copylog.isDbClick=false;bk.view.copylog.sendSelectInfo=function(){var B=arguments[0];var A=arguments[1];if(((baidu.ie&&B==1&&!bk.view.copylog.isDbClick)||B==0&&!bk.view.copylog.isDbClick)||A){var C;if(window.getSelection){C=window.getSelection()}else{if(document.getSelection){C=document.getSelection()}else{if(document.selection){C=document.selection.createRange().text}}}}bk.view.copylog.isDbClick=false};baidu.dom.ready(function(){baidu.on("content","mouseup",function(B){var A=B.button;setTimeout(function(){bk.view.copylog.sendSelectInfo(A,false)},20)});baidu.on("content","copy",function(B){var A=B.button;setTimeout(function(){bk.view.copylog.sendSelectInfo(A,true)},20)});baidu.event.on("content","dblclick",function(A){bk.view.copylog.isDbClick=true})});baidu.dom.ready(function(){baidu.array.each(baidu.q("contri-expand","pro-contributors"),function(B){baidu.on(B,"click",function(C){baidu.event.stop(C);var D=baidu.dom.getText(B);if(D=="展开"){bk.view.showLemma(baidu.dom.getAttr(B,"userName"),B)}else{bk.view.hideLemma(baidu.dom.getAttr(B,"userName"),B)}})});var A=baidu.g("contri-more");if(A){baidu.on(A,"click",function(B){baidu.event.stop(B);bk.view.showMoreContri()})}});bk.view.showLemma=function(A,B){baidu.array.each(baidu.q(A,"pro-contributors"),function(D,C){if(C==0){var F='<img class="contri-hide" src="http://img.baidu.com/img/baike/contri_hide.gif" userName="{userName}" style="cursor:pointer;"/>'.replace("{userName}",A);baidu.dom.query("td span",baidu.g(D))[0].innerHTML=F;baidu.on(baidu.dom.query("td span img",baidu.g(D))[0],"click",function(){bk.view.hideLemma(A,B)})}else{}try{baidu.dom.show(D)}catch(E){}});B.innerHTML="收起";nslog(window.location.href,1029)};bk.view.hideLemma=function(A,B){baidu.array.each(baidu.q(A,"pro-contributors"),function(C){try{baidu.dom.hide(C)}catch(D){}});B.innerHTML="展开"};bk.view.showMoreContri=function(limitRow){var limit=limitRow||20;baidu.ajax.get("/api/lemmaGrow?lemmaId="+baikeViewInfo.id+"&limit=20&callback= ",function(req){if(baidu.g("tr-contri-more")){baidu.dom.remove("tr-contri-more")}var json=eval("("+req.responseText+")");var dom=[];dom.push(' <table width="235px;" border="0" cellspacing="0" cellpadding="0" class="topuser f12">');var lemmaData=json.lemmaGrow.data;var showGd=false;var showComplex=false;for(var index=0;index<lemmaData.length;index++){var showIcon=true;if(index>=limit){break}var lemma=lemmaData[index];var userName;if(((lemma.gd&&lemma.gd.length>0)||(lemma.hq&&lemma.hq.length>0))&&!showGd){dom.push("<tr><td colspan='4'><strong>突出贡献者：</strong><img align='absmiddle' src='http://img.baidu.com/img/baike/s/what.gif' title='贡献优质、高质量版本，被称为突出贡献者'/></td></tr>");showGd=true}else{if(!lemma.gd&&!lemma.hq&&lemma.complex.length>0&&!showComplex){dom.push("<tr><td colspan='4'><strong>辛勤贡献者：</strong><img align='absmiddle' src='http://img.baidu.com/img/baike/s/what.gif' title='贡献复杂版本，被称为辛勤贡献者'/></td></tr>");showComplex=true}}dom.push("<tr><td width='18px'>");if(lemma.user.odpFlag=="2"){var str='<a target="_blank" href="http://baike.baidu.com/cms/s/kdt/index.html"><img align="absmiddle" title="百科蝌蚪团" src="http://img.baidu.com/img/baike/userrole/odp'+lemma.user.odpLevel+'.png"></a>';dom.push(str)}dom.push("</td>");userName=lemma.user.userName;dom.push('<th width="100px;"><a class="usercard" username="{lemma.user.userName}" href="http://passport.baidu.com/?business&aid=7&default_tab=2&un='+lemma.user.userName+'#3" target="_blank" title="查看此用户资料">{lemma.user.userName}</a></th>'.replace(/{lemma.user.userName}/g,lemma.user.userName));dom.push('<td width="67px" align="right"><a href="http://www.baidu.com/search/baike_help.html#&#30334;&#31185;&#31215;&#20998;&#20307;&#31995;" target="_blank"><img style="width: 67px;" src="http://img.baidu.com/img/baike/blank.gif" class="usertitle level{level}" align="absmiddle"/></a></td>'.replace("{level}",lemma.user.level));dom.push('<td align="right"><a target="_blank" href="{lemma.verIcon.href}"><img align="absmiddle" title="{lemma.verIcon.name}" src="{lemma.verIcon.src}"/></a>'.replace("{lemma.verIcon.href}",lemma.verIcon.href).replace("{lemma.verIcon.name}",lemma.verIcon.name).replace("{lemma.verIcon.src}",lemma.verIcon.src));var len=parseInt(lemma.gd?lemma.gd.length:0)+parseInt(lemma.hq?lemma.hq.length:0)+parseInt(lemma.complex?lemma.complex.length:0);if(len>1){dom.push('&nbsp;<span userName="{lemma.userId}" class="contri-expand">展开</span></td></tr>'.replace("{lemma.userId}",lemma.userId))}else{dom.push('&nbsp;<a target="_blank" class="contri-a nslog:1040" href="/history/id={id}">版本</a></tr>'.replace("{id}",lemma.verIcon.id))}if(len>1&&lemma.gd&&parseInt(lemma.gd.length)>0){baidu.array.each(lemma.gd,function(gd,i){dom.push('<tr class="{userName} contri-more-tr" style="display: none">'.replace("{userName}",lemma.userId));dom.push('<td colspan="4">');dom.push('<a target="_blank" href="http://www.baidu.com/search/baike_help.html#&#39640;&#36136;&#37327;&#29256;&#26412;&#19982;&#20248;&#36136;&#29256;&#26412;&#35780;&#36873;&#35268;&#21017;&#65288;&#50;&#48;&#49;&#49;&#45;&#48;&#50;&#45;&#49;&#52;&#65289;"><img align="absmiddle" title="为词条改进贡献了优质版本的用户，被称为突出贡献者" src="http://img.baidu.com/img/baike/highQualAbs.gif"/></a>');dom.push('&nbsp;<a target="_blank" href="/history/id={id}" class="contri-a nslog:1040">版本</a>'.replace("{id}",gd[0]));if(i==0){showIcon=false;var domImg='<img align="absmiddle" class="contri-hide"  src="http://img.baidu.com/img/baike/contri_hide.gif" userName="{userName}" style="cursor:pointer;"/>'.replace("{userName}",userName);dom.push('<span class="contri-span">');dom.push(domImg);dom.push("</span></td></tr>")}else{dom.push('<span class="contri-span"></span></td></tr>')}})}if(len>1&&lemma.hq&&parseInt(lemma.hq.length)>0){baidu.array.each(lemma.hq,function(hq,i){dom.push('<tr class="{userName} contri-more-tr" style="display: none">'.replace("{userName}",lemma.userId));dom.push('<td colspan="4">');dom.push('<a target="_blank" href="http://www.baidu.com/search/baike_help.html#&#39640;&#36136;&#37327;&#29256;&#26412;&#19982;&#20248;&#36136;&#29256;&#26412;&#35780;&#36873;&#35268;&#21017;&#65288;&#50;&#48;&#49;&#49;&#45;&#48;&#50;&#45;&#49;&#52;&#65289;"><img align="absmiddle" title="为词条改进贡献了高质版本的用户，被称为突出贡献者" src="http://img.baidu.com/img/baike/highVersionAbs.gif"/></a>');dom.push('&nbsp;<a target="_blank" href="/history/id={id}" class="contri-a nslog:1040">版本</a>'.replace("{id}",hq[0]));if(showIcon&&i==0){var domImg='<img align="absmiddle" class="contri-hide"  src="http://img.baidu.com/img/baike/contri_hide.gif" userName="{userName}" style="cursor:pointer;"/>'.replace("{userName}",userName);dom.push('<span class="contri-span">');dom.push(domImg);dom.push("</span></td></tr>")}else{dom.push('<span class="contri-span"></span></td></tr>')}})}if(len>1&&lemma.complex&&parseInt(lemma.complex.length)>0){baidu.array.each(lemma.complex,function(complex,i){dom.push('<tr class="{userName} contri-more-tr" style="display: none">'.replace("{userName}",lemma.userId));dom.push('<td colspan="4">');dom.push('<a target="_blank" href="http://www.baidu.com/search/baike_help.html#&#22797;&#26434;&#32534;&#36753;"><img align="absmiddle" title="为词条改进贡献了复杂版本的用户，被称为辛勤贡献者" src="http://img.baidu.com/img/baike/complexVersionAbs.gif"/></a>');dom.push('&nbsp;<a target="_blank" href="/history/id={id}" class="contri-a nslog:1040">版本</a>'.replace("{id}",complex[0]));if(showIcon&&i==0){var domImg='<img align="absmiddle" class="contri-hide"  src="http://img.baidu.com/img/baike/contri_hide.gif" userName="{userName}" style="cursor:pointer;"/>'.replace("{userName}",userName);dom.push('<span class="contri-span">');dom.push(domImg);dom.push("</span></td></tr>")}else{dom.push('<span class="contri-span"></span></td></tr>')}})}}if(limit==20){dom.push('<tr id="tr-contri-less"><td align="center" colspan="4"><a id="contri-less" href="#" class="contri-a">收起</a></td></tr>')}else{dom.push('<tr id="tr-contri-more"><td align="center" colspan="4"><a id="contri-more" href="#" class="contri-a">查看更多贡献者</a></td></tr>')}dom.push("</table>");baidu.g("contri-div").innerHTML=dom.join("");if(baidu.g("contri-less")){baidu.on(baidu.g("contri-less"),"click",function(e){baidu.event.stop(e);bk.view.showMoreContri(5)})}if(baidu.g("contri-more")){baidu.on(baidu.g("contri-more"),"click",function(e){baidu.event.stop(e);bk.view.showMoreContri()})}baidu.array.each(baidu.q("contri-expand","pro-contributors"),function(ele){baidu.on(ele,"click",function(e){baidu.event.stop(e);var text=baidu.dom.getText(ele);if(text=="展开"){bk.view.showLemma(baidu.dom.getAttr(ele,"userName"),ele)}else{bk.view.hideLemma(baidu.dom.getAttr(ele,"userName"),ele)}})});baidu.array.each(baidu.q("usercard","pro-contributors"),function(ele){usercard.bindTrigger(ele)})});nslog(window.location.href,1041)};bk.view.eD=function(C,B,A){baidu.on(C,B,function(D){A(baidu.event.get(D).target);baidu.event.preventDefault(D)})};baidu.more.ns("bk.usercenter");bk.usercenter.progressbar=function(A){this.options=A||{}};baidu.extend(bk.usercenter.progressbar.prototype,{build:function(){baidu.g(this.options.selector).innerHTML=this.html()},init:function(A){if(A){this.options=baidu.extend(this.options||{},A)}this.build()},html:function(){var A=[];A.push('<div class="progress-bar">');A.push('<div class="process-inner fix"><span class="pl"></span>');var B=this.calculateProgress();if(B>0){A.push('<span class="pb" style="width:'+B+'px"></span>')}A.push('<span class="pr"></span></div>');A.push('<div class="process-text" style="'+(this.options.textStyle||"")+'">'+this.options.text+"</div>");A.push("</div>");return A.join("")},calculateProgress:function(){var A=this.options.maxWidth;var C=A/100;var B=(this.options.process||0)*100*C;B=(B>A?A:B);this.options.pixelProgress=B;return B}});bk.usercenter.commonTaskProgressbar=function(A){bk.usercenter.progressbar.call(this,A);baidu.extend(this.options,{txtStart:-16})};baidu.lang.inherits(bk.usercenter.commonTaskProgressbar,bk.usercenter.progressbar);baidu.extend(bk.usercenter.commonTaskProgressbar.prototype,{init:function(){bk.usercenter.progressbar.prototype.init.call(this);var B=this.options.pixelProgress+this.options.txtStart;var A=baidu.dom.q("process-text",this.options.selector,"div")[0];if(A){A.style.left=B+"px"}}});baidu.extend(bk.usercenter.progressbar,{init:function(A){var B=A.type.toLowerCase()||"simple";var D=bk.usercenter.progressbar.barConfigs[B];A.maxWidth=D.maxWidth;var C=new D.ctr(A);C.init()},barConfigs:{simple:{ctr:bk.usercenter.progressbar,maxWidth:120},common:{ctr:bk.usercenter.commonTaskProgressbar,maxWidth:140}}});var Fe=Fe||{version:"20080809",emptyFn:function(){}};if(Object.prototype.propertyIsEnumerable){Fe.propertyIsEnumerable=function(A,B){return Object.prototype.propertyIsEnumerable.call(A,B)}}else{Fe.propertyIsEnumerable=function(A,C){if(C in A){for(var B in A){if(B==C){return true}}}return false}}Fe.isArray=function(A){return(A&&typeof A.length=="number"&&typeof A.splice!="undefined"&&!Fe.propertyIsEnumerable(A,"length"))};Fe.isObject=function(A){return(A&&(typeof (A)=="object"||typeof (A)=="function"))||false};Fe.trim=function(A){return A.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+$)/g,"")};Fe.format=function(I,K){if(arguments.length>1){var E=Fe.format,H=/([.*+?^=!:${}()|[\]\/\\])/g,F=(E.left_delimiter||"{").replace(H,"\\$1"),A=(E.right_delimiter||"}").replace(H,"\\$1");var C=E._r1||(E._r1=new RegExp("#"+F+"([^"+F+A+"]+)"+A,"g")),B=E._r2||(E._r2=new RegExp("#"+F+"(\\d+)"+A,"g"));if(typeof (K)=="object"){return I.replace(C,function(L,N){var M=K[N];if(typeof M=="function"){M=M(N)}return typeof (M)=="undefined"?"":M})}else{if(typeof (K)!="undefined"){var J=Array.prototype.slice.call(arguments,1);var D=J.length;return I.replace(B,function(L,M){M=parseInt(M,10);return(M>=D)?L:J[M]})}}}return I};Fe.format.delimiter=function(C,A){var B=Fe.format;B.left_delimiter=C||"{";B.right_delimiter=A||C||"}";B._r1=B._r2=null};Fe.each=function(E,A){if(typeof A!="function"){return E}if(E){if(E.length===undefined){for(var B in E){A.call(E[B],E[B],B)}}else{for(var C=0,D=E.length;C<D;C++){A.call(E[C],E[C],C)}}}return E};Fe.extend=function(F,D){if(F&&D&&typeof (D)=="object"){for(var E in D){F[E]=D[E]}var C=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];for(var A=0,B;A<C.length;A++){B=C[A];if(Object.prototype.hasOwnProperty.call(D,B)){F[B]=D[B]}}}return F};Fe.Browser=(function(){var C=navigator.userAgent;var H=0,A=0,F=0,E=0;var D=0,I=0,B=0;if(typeof (window.opera)=="object"&&/Opera(\s|\/)(\d+(\.\d+)?)/.test(C)){A=parseFloat(RegExp.$2)}else{if(/MSIE (\d+(\.\d+)?)/.test(C)){H=parseFloat(RegExp.$1)}else{if(/Firefox(\s|\/)(\d+(\.\d+)?)/.test(C)){E=parseFloat(RegExp.$2)}else{if(navigator.vendor=="Netscape"&&/Netscape(\s|\/)(\d+(\.\d+)?)/.test(C)){B=parseFloat(RegExp.$2)}else{if(C.indexOf("Safari")>-1&&/Version\/(\d+(\.\d+)?)/.test(C)){F=parseFloat(RegExp.$1)}}}}}if(C.indexOf("Gecko")>-1&&C.indexOf("KHTML")==-1&&/rv\:(\d+(\.\d+)?)/.test(C)){I=parseFloat(RegExp.$1)}return{ie:H,firefox:E,gecko:I,netscape:B,opera:A,safari:F}})();window.FeBrowser=Fe.Browser;Fe.isGecko=(navigator.userAgent.indexOf("Gecko")>-1&&navigator.userAgent.indexOf("KHTML")==-1&&/rv\:(\d+(\.\d+)?)/.test(navigator.userAgent))?RegExp.$1:0;Fe.isStrict=(document.compatMode=="CSS1Compat");Fe.isIE=/MSIE (\d+(\.\d+)?)/.test(navigator.userAgent)?RegExp.$1:0;Fe.isFirefox=/Firefox(\s|\/)(\d+(\.\d+)?)/.test(navigator.userAgent)?RegExp.$2:0;Fe.isSafari=(navigator.userAgent.indexOf("Safari")>-1&&/Version\/(\d+(\.\d+)?)/.test(navigator.userAgent))?RegExp.$1:0;Fe.isWebkit=(navigator.userAgent.indexOf("KHTML")>-1&&/AppleWebKit\/([^\s]*)/.test(navigator.userAgent))?RegExp.$1:0;Fe.isOpera=(window.opera&&/Opera(\s|\/)(\d+(\.\d+)?)/.test(navigator.userAgent))?RegExp.$2:0;Fe.G=function(){for(var A=[],B=arguments.length-1;B>-1;B--){var C=arguments[B];A[B]=null;if(typeof C=="object"&&C&&C.dom){A[B]=C.dom}else{if((typeof C=="object"&&C&&C.tagName)||C==window||C==document){A[B]=C}else{if(typeof C=="string"&&(C=document.getElementById(C))){A[B]=C}}}}return A.length<2?A[0]:A};Fe.Q=function(E,D,B){if(typeof E!="string"||E.length<=0){return null}var J=[],B=(typeof B=="string"&&B.length>0)?B.toLowerCase():null,C=(Fe.G(D)||document);if(C.getElementsByClassName){Fe.each(C.getElementsByClassName(E),function(K){if(B!==null){if(K.tagName.toLowerCase()==B){J[J.length]=K}}else{J[J.length]=K}})}else{E=E.replace(/\-/g,"\\-");var A=new RegExp("(^|\\s{1,})"+Fe.trim(E)+"(\\s{1,}|$)"),H=(B===null)?(C.all?C.all:C.getElementsByTagName("*")):C.getElementsByTagName(B),F=H.length,I=F;while(F--){if(A.test(H[I-F-1].className)){J[J.length]=H[I-F-1]}}}return J};Fe.hide=function(){Fe.each(arguments,function(A){if(A=Fe.G(A)){A.style.display="none"}})};Fe.show=function(){Fe.each(arguments,function(A){if(A=Fe.G(A)){A.style.display=""}})};Fe.toggle=function(){Fe.each(arguments,function(A){if(A=Fe.G(A)){A.style.display=A.style.display=="none"?"":"none"}})};Fe.addClassName=function(C,D){if(!(C=Fe.G(C))){return }var A=C.className.split(" "),B=Fe.trim;if(!new RegExp("(^|\\s{1,})"+B(D)+"(\\s{1,}|$)").test(C.className)){C.className=B(A.concat(D).join(" "))}};Fe.ac=Fe.addClassName;Fe.removeClassName=function(B,C){if(!(B=Fe.G(B))){return }var A=Fe.trim,D=new RegExp("(^|\\s{1,})"+A(C)+"(\\s{1,}|$)","g");B.className=A(B.className.replace(D,"$2"))};Fe.rc=Fe.removeClassName;Fe.body=function(){var A=0,J=0,E=0,C=0,B=0,K=0;var F=window,D=document,I=D.documentElement;A=I.clientWidth||D.body.clientWidth;J=F.innerHeight||I.clientHeight||D.body.clientHeight;C=D.body.scrollTop||I.scrollTop;E=D.body.scrollLeft||I.scrollLeft;B=Math.max(D.body.scrollWidth,I.scrollWidth||0);K=Math.max(D.body.scrollHeight,I.scrollHeight||0,J);return{scrollTop:C,scrollLeft:E,documentWidth:B,documentHeight:K,viewWidth:A,viewHeight:J}};Fe.on=function(C,B,A){if(!(C=Fe.G(C))){return C}B=B.replace(/^on/,"").toLowerCase();if(C.attachEvent){C[B+A]=function(){A.call(C,window.event)};C.attachEvent("on"+B,C[B+A])}else{C.addEventListener(B,A,false)}return C};Fe.un=function(C,B,A){if(!(C=Fe.G(C))){return C}B=B.replace(/^on/,"").toLowerCase();if(C.attachEvent){C.detachEvent("on"+B,C[B+A]);C[B+A]=null}else{C.removeEventListener(B,A,false)}return C};Fe.css=function(C,H){if(!C||!H){return null}C=typeof C=="string"?document.getElementById(C):C;var B=!window.opera&&navigator.userAgent.indexOf("MSIE")!=-1;if(H=="float"){H=B?"styleFloat":"cssFloat"}H=H.replace(/(-[a-z])/gi,function(I,J){return J.charAt(1).toUpperCase()});if("opacity"==H&&B){var A=C.style.filter;return A&&A.indexOf("opacity=")>=0?(parseFloat(A.match(/opacity=([^)]*)/)[1])/100)+"":"1"}var F=null;if(F=C.style[H]){return F}if(C.currentStyle){return C.currentStyle[H]}else{var E=C.nodeType==9?C:C.ownerDocument||C.document;if(E.defaultView&&E.defaultView.getComputedStyle){var D=E.defaultView.getComputedStyle(C,"");if(D){return D[H]}}}return null};if(!window.console||!console.firebug){var names=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console=(typeof window.loadFirebugConsole=="function")?window.loadFirebugConsole():{};for(var i=0;i<names.length;++i){window.console[names[i]]=function(){}}}if(typeof (HTMLElement)!="undefined"&&!window.opera){HTMLElement.prototype.__defineGetter__("children",function(){for(var B=[],C=0,E,D=0,A=this.childNodes.length;D<A;D++){E=this.childNodes[D];if(E.nodeType==1){B[C++]=E;if(E.name){if(!B[E.name]){B[E.name]=[]}B[E.name][B[E.name].length]=E}if(E.id){B[E.id]=E}}}return B})}if(typeof (HTMLElement)!="undefined"&&!window.opera){HTMLElement.prototype.__defineGetter__("currentStyle",function(){return this.ownerDocument.defaultView.getComputedStyle(this,null)})}if(typeof (HTMLElement)!="undefined"&&!window.opera){HTMLElement.prototype.insertAdjacentHTML=function(A,B){var C=this.ownerDocument.createRange();C.setStartBefore(this);C=C.createContextualFragment(B);switch(A){case"beforeBegin":this.parentNode.insertBefore(C,this);break;case"afterBegin":this.insertBefore(C,this.firstChild);break;case"beforeEnd":this.appendChild(C);break;case"afterEnd":if(!this.nextSibling){this.parentNode.appendChild(C)}else{this.parentNode.insertBefore(C,this.nextSibling)}break}}}if(Fe.isFirefox&&window.Event){Event.prototype.__defineSetter__("returnValue",function(A){if(!A){this.preventDefault()}return A});Event.prototype.__defineSetter__("cancelBubble",function(A){if(A){this.stopPropagation()}return A});Event.prototype.__defineGetter__("srcElement",function(){var A=this.target;if(!A){return }while(A.nodeType!=1){A=A.parentNode;if(!A){break}}return A});Event.prototype.__defineGetter__("fromElement",function(){var A;if(this.type=="mouseover"){A=this.relatedTarget}else{if(this.type=="mouseout"){A=this.target}}if(!A){return }while(A.nodeType!=1){A=A.parentNode;if(!A){break}}return A});Event.prototype.__defineGetter__("toElement",function(){var A;if(this.type=="mouseout"){A=this.relatedTarget}else{if(this.type=="mouseover"){A=this.target}}if(!A){return }while(A.nodeType!=1){A=A.parentNode;if(!A){break}}return A});Event.prototype.__defineGetter__("offsetX",function(){return this.layerX});Event.prototype.__defineGetter__("offsetY",function(){return this.layerY})}if(window.Document){}if(window.Node){Node.prototype.replaceNode=function(A){this.parentNode.replaceChild(A,this)};Node.prototype.removeNode=function(B){if(B){return this.parentNode.removeChild(this)}else{var A=document.createRange();A.selectNodeContents(this);return this.parentNode.replaceChild(A.extractContents(),this)}};Node.prototype.swapNode=function(B){var C=this.nextSibling;var A=this.parentNode;node.parentNode.replaceChild(this,B);A.insertBefore(node,C)}}if(window.HTMLElement){HTMLElement.prototype.__defineGetter__("all",function(){var A=this.getElementsByTagName("*");var B=this;A.tags=function(C){return B.getElementsByTagName(C)};return A});HTMLElement.prototype.__defineGetter__("parentElement",function(){if(this.parentNode==this.ownerDocument){return null}return this.parentNode});HTMLElement.prototype.__defineGetter__("children",function(){var C=[],A=0,D;for(var B=0;B<this.childNodes.length;B++){D=this.childNodes[B];if(D.nodeType==1){C[A++]=D;if(D.name){if(!C[D.name]){C[D.name]=[]}C[D.name][C[D.name].length]=D}if(D.id){C[D.id]=D}}}return C});HTMLElement.prototype.__defineGetter__("currentStyle",function(){return this.ownerDocument.defaultView.getComputedStyle(this,null)});HTMLElement.prototype.__defineSetter__("outerHTML",function(B){var A=this.ownerDocument.createRange();A.setStartBefore(this);var C=A.createContextualFragment(B);this.parentNode.replaceChild(C,this);return B});HTMLElement.prototype.__defineGetter__("outerHTML",function(){var A;var B=this.attributes;var D="<"+this.tagName;for(var C=0;C<B.length;C++){A=B[C];if(A.specified){D+=" "+A.name+'="'+A.value+'"'}}if(!this.canHaveChildren){return D+">"}return D+">"+this.innerHTML+"</"+this.tagName+">"});HTMLElement.prototype.__defineGetter__("canHaveChildren",function(){switch(this.tagName.toLowerCase()){case"area":case"base":case"basefont":case"col":case"frame":case"hr":case"img":case"br":case"input":case"isindex":case"link":case"meta":case"param":return false}return true});HTMLElement.prototype.__defineSetter__("innerText",function(B){var A=document.createTextNode(B);this.innerHTML=A;return A});HTMLElement.prototype.__defineGetter__("innerText",function(){var A=this.ownerDocument.createRange();A.selectNodeContents(this);return A.toString()});HTMLElement.prototype.__defineSetter__("outerText",function(B){var A=document.createTextNode(B);this.outerHTML=A;return A});HTMLElement.prototype.__defineGetter__("outerText",function(){var A=this.ownerDocument.createRange();A.selectNodeContents(this);return A.toString()});HTMLElement.prototype.attachEvent=function(C,B){var A=C.replace(/on/,"");B._ieEmuEventHandler=function(D){window.event=D;return B()};this.addEventListener(A,B._ieEmuEventHandler,false)};HTMLElement.prototype.detachEvent=function(C,B){var A=C.replace(/on/,"");if(typeof (B._ieEmuEventHandler)=="function"){this.removeEventListener(A,B._ieEmuEventHandler,false)}else{this.removeEventListener(A,B,true)}};HTMLElement.prototype.contains=function(A){do{if(A==this){return true}}while(A=A.parentNode);return false};HTMLElement.prototype.insertAdjacentElement=function(A,B){switch(A){case"beforeBegin":this.parentNode.insertBefore(B,this);break;case"afterBegin":this.insertBefore(B,this.firstChild);break;case"beforeEnd":this.appendChild(B);break;case"afterEnd":if(this.nextSibling){this.parentNode.insertBefore(B,this.nextSibling)}else{this.parentNode.appendChild(B)}break}};HTMLElement.prototype.insertAdjacentHTML=function(B,D){var C=this.ownerDocument.createRange();C.setStartBefore(this);var A=C.createContextualFragment(D);this.insertAdjacentElement(B,A)};HTMLElement.prototype.insertAdjacentText=function(B,C){var A=document.createTextNode(C);this.insertAdjacentElement(B,A)};HTMLElement.prototype.attachEvent=function(C,B){var A=C.replace(/on/,"");B._ieEmuEventHandler=function(D){window.event=D;return B()};this.addEventListener(A,B._ieEmuEventHandler,false)};HTMLElement.prototype.detachEvent=function(C,B){var A=C.replace(/on/,"");if(typeof (B._ieEmuEventHandler)=="function"){this.removeEventListener(A,B._ieEmuEventHandler,false)}else{this.removeEventListener(A,B,true)}}}var Fe=Fe||{version:"20080809",emptyFn:function(){}};Fe.path="/js/Dialog/";Fe.inherit=function(I,D,B){var H=I.prototype;var F=function(){};F.prototype=D.prototype;var E=I.prototype=new F();if(typeof B=="string"){E._className=B}for(var A in H){E[A]=H[A]}I.prototype.constructor=H.constructor;H=null;return E};(function(){if(Fe.BaseClass){return false}Fe._name="%Fe%";window[Fe._name]={};window[Fe._name].counter=0;window[Fe._name].instances={};Fe.BaseClass=function(A){window[Fe._name].instances[(this.hashCode=(A||Fe.BaseClass.guid()))]=this};Fe.inherit(Fe.BaseClass,Object);Fe.BaseClass.guid=function(){return"MZ_"+(window[Fe._name].counter++).toString(36)};window.Instance=Fe.instance=Fe.I=function(A){return window[Fe._name].instances[A]};Fe.BaseClass.prototype.dispose=function(){if(this.hashCode){delete window[Fe._name].instances[this.hashCode]}for(var A in this){if(typeof this[A]!="function"){delete this[A]}}if(navigator.userAgent.indexOf("MSIE")>0&&!window.opera){setTimeout(function(){CollectGarbage()},1)}};Fe.BaseClass.prototype.getHashCode=function(){if(!this.hashCode){window[Fe._name].instances[(this.hashCode=Fe.BaseClass.guid())]=this}return this.hashCode};Fe.BaseClass.prototype.decontrol=function(){delete window[Fe._name].instances[this.hashCode]};Fe.BaseClass.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"}})();Fe.BaseEvent=function(A,B){this.type=A;this.target=B||null;this.srcElement=this.currentTarget=null;this.returnValue=true};Fe.inherit(Fe.BaseEvent,Object,"Fe.BaseEvent");Fe.BaseClass.prototype.addEventListener=function(D,C,B){if(typeof C!="function"){throw ("addEventListener:"+C+" is not a function")}if(!this.__listeners){this.__listeners={}}var A=this.__listeners,E;if(typeof B=="string"&&B){if(/[^\w\-]/.test(B)){throw ("nonstandard key:"+B)}else{C.hashCode=B;E=B}}if(D.indexOf("on")!=0){D="on"+D}if(typeof A[D]!="object"){A[D]={}}E=E||Fe.BaseClass.guid();C.hashCode=E;A[D][E]=C};Fe.BaseClass.prototype.removeEventListener=function(C,B){if(typeof B=="function"){B=B.hashCode}else{if(typeof B!="string"){return }}if(!this.__listeners){this.__listeners={}}if(C.indexOf("on")!=0){C="on"+C}var A=this.__listeners;if(!A[C]){return }if(A[C][B]){delete A[C][B]}};Fe.BaseClass.prototype.dispatchEvent=function(C){if(!this.__listeners){this.__listeners={}}var B,A=this.__listeners,D=C.type;C.target=C.srcElement=C.target||C.srcElement||this;C.currentTarget=this;if(typeof this[D]=="function"){this[D](C)}if(typeof A[D]=="object"){for(B in A[D]){if(typeof A[D][B]=="function"){A[D][B].call(this,C)}}}return C.returnValue};Fe.G=function(){for(var A=[],B=arguments.length-1;B>-1;B--){var C=arguments[B];A[B]=null;if(typeof C=="object"&&C&&C.dom){A[B]=C.dom}else{if((typeof C=="object"&&C&&C.tagName)||C==window||C==document){A[B]=C}else{if(typeof C=="string"&&(C=document.getElementById(C))){A[B]=C}}}}return A.length<2?A[0]:A};Fe.extend=function(F,D){if(F&&D&&typeof (D)=="object"){for(var E in D){F[E]=D[E]}var C=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];for(var A=0,B;A<C.length;A++){B=C[A];if(Object.prototype.hasOwnProperty.call(D,B)){F[B]=D[B]}}}return F};Fe.isIE=/MSIE (\d+(\.\d+)?)/.test(navigator.userAgent)?RegExp.$1:0;Fe.trim=function(A){return A.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+$)/g,"")};Fe.removeClassName=function(B,C){if(!(B=Fe.G(B))){return }var A=Fe.trim,D=new RegExp("(^|\\s{1,})"+A(C)+"(\\s{1,}|$)","g");B.className=A(B.className.replace(D,"$2"))};Fe.rc=Fe.removeClassName;Fe.addClassName=function(C,D){if(!(C=Fe.G(C))){return }var A=C.className.split(" "),B=Fe.trim;if(!new RegExp("(^|\\s{1,})"+B(D)+"(\\s{1,}|$)").test(C.className)){C.className=B(A.concat(D).join(" "))}};Fe.ac=Fe.addClassName;Fe.format=function(D,B){D=String(D);if(B){if("object"==typeof B){return D.replace(/#\{(.+?)\}/g,function(E,H){var F=B[H];if("function"==typeof F){F=F(H)}return("undefined"==typeof F?"":F)})}else{var C=Array.prototype.slice.call(arguments,1),A=C.length;return D.replace(/#\{(\d+)\}/g,function(F,E){E=parseInt(E,10);return(E>=A?F:C[E])})}}return D};Fe.body=function(){var A=0,J=0,E=0,C=0,B=0,K=0;var F=window,D=document,I=D.documentElement;A=I.clientWidth||D.body.clientWidth;J=F.innerHeight||I.clientHeight||D.body.clientHeight;C=D.body.scrollTop||I.scrollTop;E=D.body.scrollLeft||I.scrollLeft;B=Math.max(D.body.scrollWidth,I.scrollWidth||0);K=Math.max(D.body.scrollHeight,I.scrollHeight||0,J);return{scrollTop:C,scrollLeft:E,documentWidth:B,documentHeight:K,viewWidth:A,viewHeight:J}};Fe.each=function(E,A){if(typeof A!="function"){return E}if(E){if(E.length===undefined){for(var B in E){A.call(E[B],E[B],B)}}else{for(var C=0,D=E.length;C<D;C++){A.call(E[C],E[C],C)}}}return E};Fe.show=function(){Fe.each(arguments,function(A){if(A=Fe.G(A)){A.style.display=""}})};Fe.hide=function(){Fe.each(arguments,function(A){if(A=Fe.G(A)){A.style.display="none"}})};Fe.on=function(C,B,A){if(!(C=Fe.G(C))){return C}B=B.replace(/^on/,"").toLowerCase();if(C.attachEvent){C[B+A]=function(){A.call(C,window.event)};C.attachEvent("on"+B,C[B+A])}else{C.addEventListener(B,A,false)}return C};if(typeof (HTMLElement)!="undefined"&&!window.opera){HTMLElement.prototype.insertAdjacentHTML=function(A,B){var C=this.ownerDocument.createRange();C.setStartBefore(this);C=C.createContextualFragment(B);switch(A){case"beforeBegin":this.parentNode.insertBefore(C,this);break;case"afterBegin":this.insertBefore(C,this.firstChild);break;case"beforeEnd":this.appendChild(C);break;case"afterEnd":if(!this.nextSibling){this.parentNode.appendChild(C)}else{this.parentNode.insertBefore(C,this.nextSibling)}break}}}Fe.Dom={};Fe.Dom.loadCssFile=function(C,E){if(/\w+\.\w+(\?|$)/.test(C)){if(!(typeof (E)=="string"&&E!=="")){E="BdCss_"+C.replace(/\W/g,"")}var D=document.createElement("LINK");D.href=C;D.id=E;D.type="text/css";D.rel="Stylesheet";var B=document.getElementsByTagName("HEAD")[0];if(!B){var A=document.getElementsByTagName("body")[0];B=document.createElement("head");A.parentNode.insertBefore(B,A)}B.insertBefore(D,B.firstChild)}};Fe.Dialog=new Fe.BaseClass();Fe.Dialog.cssFilePath=Fe.path+"FeDialog.css";Fe.Dialog.defaultValue={active:false,resizable:false,help:false,font:"normal 12px sans-serif",title:"Fe.Dialog",width:"",height:"",autofit:false,content:"&nbsp;",overflow:"visible",position:"center",titlebar:true,scrolling:"auto",buttonbar:false,statusbar:false,resizable:false,controlbar:true,buttonClose:true,contentType:"HTMLString",buttonAccept:false,buttonCancel:false,buttonbarAlign:"right",buttonAcceptValue:"\u786e\u5b9a",buttonCancelValue:"\u53d6\u6d88",__listeners:null,onclose:null,onhelp:null,oncancel:null,onaccept:null,onopen:null};Fe.extend(Fe.Dialog,Fe.Dialog.defaultValue);Fe.Dialog.render=function(B,C){if("undefined"!=typeof (B)){this.content=B}if("object"==typeof (C)){Fe.extend(this,C)}if("number"==typeof (this.width)){this.width+="px"}if("number"==typeof (this.height)){this.height+="px"}var A=this;A.show(this);if(this.buttonbar&&this.buttonAccept){Fe.G("FeDialogButtonAccept_"+A.hashCode).focus()}if(this.locked){BdLockWindow.lock({opacity:0.3,backgroundColor:"#000",zIndex:(52000-10)});this.addEventListener("onclose",function(){BdLockWindow.unlock()})}setTimeout(function(){A.dispatchEvent(new Fe.BaseEvent("onopen"))},10)};Fe.Dialog.png=function(){return(Fe.isIE>=7||Fe.isIE<=0)};(function(){Fe.Dom.loadCssFile(Fe.Dialog.cssFilePath,"CSS_Fe.Dialog");var A=["<div ",'id="FeDialog_#{0}" ','class="FeDialog" ','style="position:absolute;z-index:52000;display:none" ',"onclick=\"Fe.I('#{0}').click(event)\">",'<div class="FeDialog_inner','">','<div id="FeDialogShadow_#{0}"></div>','<table class="FeDialog_wrapper" border="0" cellpadding="0" cellspacing="0">','<tr class="middle_">','<td class="center_ midland_">','<div class="FeDialog_container">','<div id="FeDialogCaption_#{0}" class="FeDialogCaption" onselectstart="return false">','<div id="FeDialogControlBar_#{0}" class="FeDialogControlBar">','<a id="FeDialogButtonClose_#{0}" class="close_" href="#" onfocus="this.blur();" onclick="Fe.I(\'#{0}\').close(); return false;">',"&nbsp;","</a>","</div>",'<div id="FeDialogCaptionText_#{0}" class="FeDialogCaptionText">FeDialog</div>',"</div>",'<div class="FeDialogContentTopMargin">&nbsp;</div>','<div id="FeDialogContent_#{0}" class="FeDialogContent">&nbsp;</div>','<div id="FeDialogButtonBar_#{0}" class="FeDialogButtonBar">','<span id="acceptBtnhead_#{0}" class="btnhead" onclick="Fe.I(\'#{0}\').accept();return false;">\u3000</span><a id="FeDialogButtonAccept_#{0}" onclick="Fe.I(\'#{0}\').accept();return false;" class="accept_" />\u786e\u5b9a</a><span id="FeDialogButtonMargin_#{0}">\u3000</span>','<span id="cancelBtnhead_#{0}" class="btnhead" onclick="Fe.I(\'#{0}\').cancel();return false;">\u3000</span><a id="FeDialogButtonCancel_#{0}" onclick="Fe.I(\'#{0}\').cancel();return false;" class="cancel_" />\u53d6\u6d88</a>',"</div>",'<div id="FeDialogStatusBar_#{0}" class="FeDialogStatusBar" style="display:none">&nbsp;</div>',"</div>","</td>",'<td class="rightShadow"><div></div></td>',"</tr>",'<tr class="bottom_">','<td class="bottomShadow"><div></div></td>','<td class="rightBottomShadow"></td>',"</tr>","</table>","</div>","</div>"];A=Fe.format(A.join(""),Fe.Dialog.hashCode);if(document.body){document.body.insertAdjacentHTML("afterBegin",A)}else{document.write(A)}})();Fe.Dialog.resize=function(C,A){var E=this;function B(F){return Fe.G(F+"_"+E.hashCode)}var D=C-parseInt(B("FeDialogContent").style.width);B("FeDialogContent").style.width=C+"px";B("FeDialogContent").style.height=A+"px";B("FeDialogIframe").style.width=C+"px";B("FeDialogIframe").style.height=A+"px"};Fe.Dialog.show=function(op){var me=this;function _(id){return Fe.G(id+"_"+me.hashCode)}if(op.icon){_("FeDialogCaption").style.background="url("+op.icon+") no-repeat left 3px";_("FeDialogCaptionText").style.paddingLeft="18px"}_("FeDialog").style.font=op.font;_("FeDialogCaptionText").innerHTML=op.title;_("FeDialogCaption").style.display=op.titlebar?"":"none";_("FeDialogStatusBar").style.display=op.statusbar?"":"none";_("FeDialogControlBar").style.display=op.controlbar?"":"none";_("FeDialogButtonBar").style.display=op.buttonbar?"":"none";_("FeDialogButtonClose").style.display=op.buttonClose?"":"none";_("FeDialogButtonAccept").style.display=op.buttonAccept?"":"none";_("acceptBtnhead").style.display=op.buttonAccept?"":"none";_("FeDialogButtonMargin").style.display=op.buttonCancel?"":"none";_("FeDialogButtonCancel").style.display=op.buttonCancel?"":"none";_("cancelBtnhead").style.display=op.buttonCancel?"":"none";_("FeDialogButtonAccept").innerHTML=op.buttonAcceptValue;_("FeDialogButtonCancel").innerHTML=op.buttonCancelValue;with(_("FeDialogContent").style){width=op.width;height=op.height;overflow=op.overflow}if(op.contentType.toLowerCase()=="htmlelement"&&!Fe.G(op.content)){op.contentType="HTMLString"}switch(op.contentType.toLowerCase()){case"htmlstring":_("FeDialogContent").innerHTML=op.content;break;case"htmlelement":var e=Fe.G(op.content);this.opContentDisplay=e.style.display;e.insertAdjacentHTML("beforeBegin","<input type='button' id='FeDialogFactoryInset_"+this.hashCode+"' style='width:"+e.offsetWidth+"px; height:"+e.offsetHeight+"px; padding:0; margin:0; border:none; visibility:hidden' />");_("FeDialogContent").innerHTML="";e.style.display="";_("FeDialogContent").appendChild(e);break;default:_("FeDialogContent").innerHTML="<iframe frameborder='0' allowTransparency='true' scrolling='"+op.scrolling+"' id='FeDialogIframe_"+this.hashCode+"' name='FeDialog_"+this.hashCode+"' style='width:"+(op.width||"100%")+"; height:"+(op.height||"100%")+"; overflow:hidden;' src='"+op.content+"'></iframe>";break}var a=Fe.trim(op.position).toLowerCase().split(/\s/);var body=Fe.body();Fe.show("FeDialog_"+this.hashCode);if(Fe.isIE&&_("FeDialogContent").offsetWidth<136){_("FeDialogContent").style.width="130px"}if(Fe.isIE&&_("FeDialogContent").offsetHeight<50){_("FeDialogContent").style.height="50px"}var top=(Math.max(parseInt((body.viewHeight-_("FeDialog").offsetHeight)/2),0)+body.scrollTop)+"px";var left=(Math.max(parseInt((body.viewWidth-_("FeDialog").offsetWidth)/2),0)+body.scrollLeft)+"px";if(a.length==1){if(a[0]==""||a[0]=="center"){}else{if(a[0]=="top"){top=body.scrollTop+"px"}else{if(a[0]=="bottom"){top=(body.scrollTop+body.viewHeight-_("FeDialog").offsetHeight)+"px"}else{if(a[0]=="left"){left=body.scrollLeft+"px"}else{if(a[0]=="right"){left=(body.scrollLeft+body.viewWidth-_("FeDialog").offsetWidth)+"px"}else{if(/\d+%/.test(a[0])){top=a[0]}else{if(/(\d+)(cm|mm|in|pt|pc|px|em|ex)?/.test(a[0])){top=parseInt(RegExp.$1)+RegExp.$2||"px"}}}}}}}}else{if(a.length>1){if(/\d+%/.test(a[0])){top=a[0]}else{if(/(\d+)(cm|mm|in|pt|pc|px|em|ex)?/.test(a[0])){top=parseInt(RegExp.$1)+RegExp.$2||"px"}}if(/\d+%/.test(a[1])){left=a[1]}else{if(/(\d+)(cm|mm|in|pt|pc|px|em|ex)?/.test(a[1])){left=parseInt(RegExp.$1)+RegExp.$2||"px"}}if(a[0]=="top"||a[1]=="top"){top=body.scrollTop+"px"}if(a[0]=="bottom"||a[1]=="bottom"){top=(body.scrollTop+body.viewHeight-_("FeDialog").offsetHeight)+"px"}if(a[0]=="left"||a[1]=="left"){left=body.scrollLeft+"px"}if(a[0]=="right"||a[1]=="right"){left=(body.scrollLeft+body.viewWidth-_("FeDialog").offsetWidth)+"px"}}}_("FeDialog").style.top=top;_("FeDialog").style.left=op.left?op.left:left;this.active=true};Fe.Dialog.hide=function(D){Fe.hide("FeDialog_"+this.hashCode);Fe.extend(Fe.Dialog,Fe.Dialog.defaultValue);var B=this;if(Fe.G("FeDialogFactoryInset_"+B.hashCode)){var C=Fe.G("FeDialogFactoryInset_"+B.hashCode);var A=Fe.G("FeDialogContent_"+B.hashCode).childNodes[0];C.parentNode.insertBefore(A,C);C.parentNode.removeChild(C);A.style.display=B.opContentDisplay}if("function"==typeof (D)){D(B)}setTimeout(function(){B.active=false;B.setContent("&nbsp;");var E=Fe.G("FeDialogContent_"+B.hashCode);if(E){E.style.width=E.style.height=E.style.overflow=""}},50);clearTimeout(this.timer)};Fe.Dialog.setContent=function(A){Fe.G("FeDialogContent_"+this.hashCode).innerHTML=A};Fe.Dialog.setCaption=function(A){Fe.G("FeDialogCaptionText_"+this.hashCode).value=A};Fe.Dialog.setWidth=function(A){Fe.G("FeDialogContent_"+this.hashCode).style.width=A};Fe.Dialog.setHeight=function(A){Fe.G("FeDialogContent_"+this.hashCode).style.height=A};Fe.Dialog.getIframe=function(){return Fe.G("FeDialogIframe_"+this.hashCode)};Fe.Dialog.accept=function(){var A=new Fe.BaseEvent("onaccept");this.dispatchEvent(A);if(!A.returnValue){return }this.close()};Fe.Dialog.cancel=function(){var A=new Fe.BaseEvent("oncancel");this.dispatchEvent(A);if(!A.returnValue){return }this.close()};Fe.Dialog.help=function(){this.dispatchEvent(new Fe.BaseEvent("onhelp"))};if(Fe.isIE&&Fe.isIE<7){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}Fe.Dialog.close=function(){var A=this,B=new Fe.BaseEvent("onclose");A.left="";A.dispatchEvent(B);if(!B.returnValue){return }this.hide()};Fe.Dialog.open=function(A,B){this.render(A,B);return this};Fe.Dialog.alert=function(A,B){A='<div class="alert-wrapper">'+A+"</div>";this.open(A,Fe.extend({buttonbar:true,buttonAccept:true},B||{}));baidu.setStyle("FeDialogContent_"+this.hashCode,"width",baidu.g("FeDialogContent_"+this.hashCode).offsetWidth+2+"px");return this};Fe.Dialog.confirm=function(A,B){A='<div class="confirm-wrapper">'+A+"</div>";this.open(A,Fe.extend({locked:true,buttonbar:true,buttonAccept:true,buttonCancel:true},B||{}));baidu.setStyle("FeDialogContent_"+this.hashCode,"width",baidu.g("FeDialogContent_"+this.hashCode).offsetWidth+2+"px");return this};Fe.Dialog.showModalDialog=function(A,B){return this.open(A,Fe.extend({locked:true,position:"center"},B||{}))};Fe.Dialog.submit=function(B,D){var A=this.open("about:blank",Fe.extend({contentType:"page"},D||{}));var C=B.target;B.target=A.getIframe().name;B.submit();B.target=C;return A};Fe.Dialog.setStatus=function(A){Fe.G("FeDialogStatusText_"+this.hashCode).innerHTML=A};Fe.Dialog.click=function(A){(window.event||A).cancelBubble=true};Fe.Dialog.resizeBy=function(){var E=this,C="FeDialogLayer_"+this.hashCode;Fe.G("FeDialogBgLayer_"+this.hashCode).style.width=Fe.G(C).offsetWidth+"px";Fe.G("FeDialogBgLayer_"+this.hashCode).style.height=Fe.G(C).offsetHeight+"px";if(Fe.isIE&&Fe.G("FeDialogBgLayer_"+this.hashCode)){if(Fe.isIE<5.5){Fe.G("FeDialogLayer_"+this.hashCode).style.width="130px";Fe.G("FeDialog_"+this.hashCode).style.width=Fe.G("FeDialogLayer_"+this.hashCode).offsetWidth+"px"}var D=Fe.G("FeDialogBgLayer_"+this.hashCode);if(D.rows[0].cells[0].currentStyle){var B=parseInt(D.rows[0].cells[0].currentStyle.height);var A=parseInt(D.rows[2].cells[0].currentStyle.height);if(!isNaN(B)&&!isNaN(A)){D.rows[1].cells[1].style.height=(Math.max(Fe.G(C).offsetHeight-B-A,12))+"px"}}}if(window.opera&&Fe.G("FeDialogLayerTable_"+this.hashCode).offsetWidth<130){Fe.G("FeDialogLayerTable_"+this.hashCode).style.width="130px"}this.timer=setTimeout(function(){E.resizeBy()},50)};Fe.on(document.body,"onkeydown",function(C){var B=C.target||C.srcElement;if(!B){return false}if(B.tagName.toLowerCase()=="textarea"){return false}var A=C.which||C.keyCode;if(Fe.Dialog.active){if(A==27){Fe.Dialog.cancel()}else{if(A==13){Fe.Dialog.accept();try{C.keyCode=0}catch(D){}C.returnValue=false}}}});Fe.un=function(C,B,A){if(!(C=Fe.G(C))){return C}B=B.replace(/^on/,"").toLowerCase();if(C.attachEvent){C.detachEvent("on"+B,C[B+A]);C[B+A]=null}else{C.removeEventListener(B,A,false)}return C};function BdLockWindow(){this.initialize()}BdLockWindow.prototype.initialize=function(){var B=BdLockWindow.element=document.createElement("DIV");B.id=BdLockWindow.id;var A=B.style;A.zIndex=1;A.top="0px";A.left="0px";A.width="100%";A.height="100%";A.border="none";A.display="none";A.margin=0;A.padding=0;A.position="absolute";A.backgroundColor="#666699";A.backgroundImage="url("+Fe.path+"blank.gif)";document.body.insertBefore(B,document.body.firstChild);BdLockWindow.onResize()};BdLockWindow.onResize=function(){BdLockWindow.element.style.width="100%";BdLockWindow.element.style.height="100%";setTimeout(function(){var B=Fe.body();var A=B.documentWidth;var C=B.documentHeight;BdLockWindow.element.style.width=A+"px";BdLockWindow.element.style.height=C+"px"},10)};BdLockWindow._restore=function(A){var C=document.getElementsByTagName(A);for(var B=C.length-1;B>-1;B--){C[B].style.visibility=C[B].getAttribute("att_BdLockWindow_v")||"";C[B].removeAttribute("att_BdLockWindow_v")}};BdLockWindow._safeguard=function(A){var C=document.getElementsByTagName(A);for(var B=C.length-1;B>-1;B--){C[B].setAttribute("att_BdLockWindow_v",C[B].style.visibility,0);C[B].style.visibility="hidden"}};BdLockWindow.id="BdLockWindow_"+new Date().getTime().toString(36);BdLockWindow.lock=function(C){var F=this;if(!F.instance){F.instance=new BdLockWindow()}Fe.show(F.id);Fe.on(window,"onresize",F.onResize);var E=F.element.style;F.onResize();var H=Fe.extend({zIndex:1,opacity:0.5},C||{});E.zIndex=H.zIndex;E.backgroundColor=H.backgroundColor||"#666699";if("opacity" in E){E.opacity=H.opacity}else{if("MozOpacity" in E){E.MozOpacity=H.opacity}else{if("filter" in E){E.filter=(E.filter||"").replace(/alpha\([^\)]*\)/gi,"")+(H.opacity==1?"":"alpha(opacity="+H.opacity*100+")");E.zoom=1}}}for(var B=["SELECT","OBJECT","EMBED"],D=0,A=B.length;D<A;D++){this._safeguard(B[D])}};BdLockWindow.unlock=function(){if(!this.instance){this.instance=new BdLockWindow();return }Fe.hide(this.id);Fe.un(window,"onresize",this.onResize);for(var B=["SELECT","OBJECT","EMBED"],C=0,A=B.length;C<A;C++){this._restore(B[C])}};baidu.more.ns("bk.floatBottle");(function(){bk.floatBottle.bottle=function(A){baidu.extend(this,A);this.refuse=null;this.replyList=[]};baidu.extend(bk.floatBottle,{BOTTLE_TYPE:{CARD:1,SUMMARY:2,BODY:3},ACT_STATUS:{NEW:1,BEFORE_EDIT:2,AFTER_EDIT:3,END:4},ACTION:{THROW:"throw",GAIN:"gain",RETHROW:"rethrow"},STATUS:{THROW:{UNSOLVED:1,UNCOMMENT:2,SOLVED:3},GAIN:{UNEDIT:4,EDITING:5,SUCCESS:6,FAIL:7}},REQ_URLS:{BOTTLE_CHECK_URL:"/user/ajax/bottle/throw?",BOTTLE_OPEN_URL:"/user/ajax/bottle/show?"},REPLACE:function(A,B){return A},GET_BOTTLE_STATUS:function(B,A){switch(A){case bk.floatBottle.ACTION.THROW:switch(B){case 1:case 2:case 3:return bk.floatBottle.STATUS.THROW.UNSOLVED;case 4:case 5:return bk.floatBottle.STATUS.THROW.UNCOMMENT;case 6:case 7:case 8:case 9:return bk.floatBottle.STATUS.THROW.SOLVED}break;case bk.floatBottle.ACTION.GAIN:switch(B){case 1:case 2:return bk.floatBottle.STATUS.GAIN.UNEDIT;case 3:case 4:case 5:return bk.floatBottle.STATUS.GAIN.EDITING;case 6:case 7:return bk.floatBottle.STATUS.GAIN.SUCCESS;case 8:case 9:return bk.floatBottle.STATUS.GAIN.FAIL}break}},GET_BOTTLE_CONT:function(B){var A=null;switch(parseInt(B,10)){case 1:return bk.floatBottle.cardBottle;default:return bk.floatBottle.bottle}}});baidu.lang.inherits(bk.floatBottle.bottle,baidu.lang.Class);baidu.extend(bk.floatBottle.bottle.prototype,{isEmpty:function(){return false},parseReply:function(A){return null},getReplyList:function(){},check:function(){},open:function(B){var A=this;bk.usercenter.ajax.post(bk.floatBottle.REQ_URLS.BOTTLE_OPEN_URL,baidu.url.jsonToQuery({bottleId:A.id}),function(H){if(H.responseText){var C=baidu.json.parse(H.responseText);var I=C.bottle;var E=bk.floatBottle.tools.parseRdBottle2My(I);A.replyList=[];baidu.each(C.reply,function(J){A.replyList.push(A.parseReply(J,E))});var D=new bk.floatBottle.reply({id:0,from:E.thrower,tag:I.content,bottle:E,isOpen:true,type:0,status:E.status});A.replyList.push(D);var F={bottle:E,reply:A.replyList};A.dispatchEvent("onOpen",F);B.dispatchEvent("onBottleOpen",F)}})},getThrowData:function(){return null},getRefuseData:function(){return null}})})();(function(){bk.floatBottle.cardBottle=function(A){bk.floatBottle.bottle.call(this,A);this.type=bk.floatBottle.BOTTLE_TYPE.CARD;this.lemma=this.lemmas?this.lemmas[0]:A.lemma};baidu.lang.inherits(bk.floatBottle.cardBottle,bk.floatBottle.bottle);baidu.extend(bk.floatBottle.cardBottle.prototype,{parseReply:function(A){return[]},check:function(){var B=this;var A={action:"throwCheck","bottleContent[type]":this.type,"bottleContent[lemmaId]":this.lemma.lemmaId};baidu.ajax.post(bk.floatBottle.REQ_URLS.BOTTLE_CHECK_URL+"r="+Math.random(),baidu.url.jsonToQuery(A,bk.floatBottle.REPLACE),function(D){var C=baidu.json.parse(D.responseText);if(C.success){B.dispatchEvent("onCheckSuccess")}else{B.dispatchEvent("onCheckFail",{code:C.flag,detail:C.detailFlag})}})},getThrowData:function(){return{"bottleContent[reason]":encodeURIComponent(this.tag.reason),"bottleContent[content]":encodeURIComponent(this.tag.content),"bottleContent[reference]":encodeURIComponent(this.tag.reference),"bottleContent[part]":encodeURIComponent(this.tag.part)}},getRefuseData:function(){if(!this.refuse){return{}}return{content:encodeURIComponent(this.refuse.reason),reference:encodeURIComponent(this.refuse.reference)}},parseReply:function(C,A){var B=new bk.floatBottle.reply({id:C.id,isOpen:(1==C.isOpen?true:false),from:new bk.usercenter.bottleUser(C.from),to:new bk.usercenter.bottleUser(C.to),bottle:A,type:parseInt(C.type),status:parseInt(C.status),tag:C.content});return B}})})();baidu.more.ns("bk.usercenter");(function(){bk.usercenter.user=function(B){baidu.extend(this,B)};baidu.lang.inherits(bk.usercenter.user,baidu.lang.Class);baidu.extend(bk.usercenter.user.prototype,{equalTo:function(B){return(B!=null&&B.id==this.id)},getUserIcon:function(){if(0==this.id){return"http://img.baidu.com/img/baike/logo-baike.gif"}if(0==this.avatar){return"http://img.baidu.com/img/baike/pictures/r0s1g"+this.level+".gif"}else{return A[this.avatar]}},toString:function(){return["id:",this.id,",name:",this.name,",level:",this.level]}});var A={1:"http://img.baidu.com/img/baike/encourage/user-priority-boy.gif",2:"http://img.baidu.com/img/baike/encourage/user-priority-girl.gif",3:"http://img.baidu.com/img/baike/encourage/5year-boy.png",4:"http://img.baidu.com/img/baike/encourage/5year-girl.png"}})();(function(){var C="/user/ajax/bottle/list?";var A="/user/ajax/bottle/salvage?";var E="/user/ajax/bottle/throw?";var B="/user/ajax/bottle/editInfo?";var D="/user/ajax/bottle/arbitration?";bk.usercenter.bottleUser=function(F){bk.usercenter.user.call(this,F);this.bottlesThrow=[];this.bottlesGain=[];this.maxThrowCount=F.throwCount||0;this.maxGainCount=F.gainCount||0;this.hasThrowCount=this.hasGainCount=0};baidu.lang.inherits(bk.usercenter.bottleUser,bk.usercenter.user);baidu.extend(bk.usercenter.bottleUser.prototype,{throwBottle:function(H){var F=this;if(H.id){F.reThrow(H);return }var J=H.lemmas[0]||H.lemma;var I={r:Math.random(),action:"throwBottle","bottleContent[lemmaId]":J.lemmaId,"bottleContent[lemmaTitle]":encodeURIComponent(J.lemmaTitle),"bottleContent[subLemmaId]":J.subLemmaId,"bottleContent[subLemmaTitle]":encodeURIComponent(J.subLemmaTitle),"bottleContent[type]":H.type};baidu.extend(I,H.getThrowData());baidu.ajax.post(E,baidu.url.jsonToQuery(I,bk.floatBottle.REPLACE),function(L){if(L.responseText){var K=baidu.json.parse(L.responseText);if(K.success){F.dispatchEvent("onThrowSuccess",{actionType:bk.floatBottle.ACTION.THROW})}else{F.dispatchEvent("onThrowFail",{actionType:bk.floatBottle.ACTION.THROW,code:K.flag,detail:K.detailFlag})}}})},reThrow:function(H){var F=this;var I=H.replyList[0];var J={r:Math.random(),action:"throwAgain",bottleId:H.id,replyId:I.id};baidu.ajax.post(B,baidu.url.jsonToQuery(J),function(L){if(L.responseText){var K=baidu.json.parse(L.responseText);if(K.success){F.dispatchEvent("onThrowSuccess",{actionType:bk.floatBottle.ACTION.RETHROW})}else{F.dispatchEvent("onThrowFail",{actionType:bk.floatBottle.ACTION.RETHROW,code:K.flag,detail:K.detailFlag})}}})},gain:function(){var F=this;bk.usercenter.ajax.post(A+"r="+Math.random(),baidu.url.jsonToQuery({type:bk.floatBottle.BOTTLE_TYPE.CARD}),function(I){if(I.responseText){var H=baidu.json.parse(I.responseText);if(H.error){F.dispatchEvent("onGainFail",{code:H.error,flag:H.flag})}else{F.dispatchEvent("onGainSuccess",{bottle:H})}}})},refuse:function(H){var F=this;var I={action:"addReply",bottleId:H.id,r:Math.random()};baidu.extend(I,H.getRefuseData());baidu.ajax.post(B,baidu.url.jsonToQuery(I,bk.floatBottle.REPLACE),function(K){if(K.responseText){var J=baidu.json.parse(K.responseText);if(J.success){F.dispatchEvent("onRefuseSuccess")}else{F.dispatchEvent("onRefuseFail",{code:J.flag,detail:J.detailFlag})}}})},ignore:function(H){var F=this;var I={r:Math.random(),action:"ignoreBottle",bottleId:H.id};baidu.ajax.post(B,baidu.url.jsonToQuery(I,bk.floatBottle.REPLACE),function(K){if(K.responseText){var J=baidu.json.parse(K.responseText);if(J.success){F.dispatchEvent("onIgnoreSuccess")}else{F.dispatchEvent("onIgnoreFail")}}})},getBottles:function(J,H,I,K){var F=this;bk.usercenter.ajax.post(C,baidu.url.jsonToQuery({page:J,action:I,recordPerPage:H,r:Math.random()},bk.floatBottle.REPLACE),function(N){if(N.responseText){var L=baidu.json.parse(N.responseText);var M={page:J,action:I,totalRecord:L.totalRecord,recordPerPage:H,bottles:[],recycle:L.recycle};baidu.each(L.bottles,function(O){M.bottles.push(bk.floatBottle.tools.parseRdBottle2My(O))});K&&K(M)}})},agree:function(H){var F=this;var I=H.replyList[0];var J={r:Math.random(),action:"addThanks",bottleId:H.id,replyId:I.id,content:I.tag.thanksVal};baidu.ajax.post(B,baidu.url.jsonToQuery(J,bk.floatBottle.REPLACE),function(L){if(L.responseText){var K=baidu.json.parse(L.responseText);if(K.success){F.dispatchEvent("onAgreeSuccess")}else{F.dispatchEvent("onAgreeFail")}}})},arbitration:function(H){var F=this;var I={r:Math.random(),bottleId:H.id};baidu.ajax.post(D,baidu.url.jsonToQuery(I),function(K){if(K.responseText){var J=baidu.json.parse(K.responseText);if(J.success){F.dispatchEvent("onArbitrationSuccess")}else{F.dispatchEvent("onArbitrationFail")}}})},open:function(F){F.open(this)}})})();baidu.more.ns("bk.usercenter");(function(){bk.usercenter.message=function(A){this._timer=null;this._curReq=null;this._running=false;this.runner=null;A=A||{};this.method=A.method||bk.usercenter.message.REQ_METHOD.GET;this.timeType=A.type||bk.usercenter.message.TIME_TYPE.INTERVAL;if(bk.usercenter.message.TIME_TYPE.INTERVAL==this.timeType){this.reqDuration=A.interval||bk.usercenter.message.DEFAULT_REQ_DURATION}this.url=A.url;this.urlParams=A.urlParams||{};this.data=A.data||{};baidu.lang.Class.call(this);return this};baidu.lang.inherits(bk.usercenter.message,baidu.lang.Class);baidu.extend(bk.usercenter.message.prototype,{start:function(){if(this._running){this.cancel()}this._reqStart();this.dispatchEvent("onReqStart");this._running=true;if(bk.usercenter.message.TIME_TYPE.INTERVAL==this.timeType){this._timer=setInterval(baidu.fn.bind(this._reqStart,this),this.reqDuration)}},cancel:function(){this._running=false;clearTimeout(this._timer);this._curReq!=null&&this._curReq.abort();this.dispatchEvent("onReqCancel")},_reqStart:function(){baidu.extend(this.urlParams,{r:Math.random()});if(!("entry" in this.urlParams)){this.urlParams.entry=2}var A=this.url+baidu.url.jsonToQuery(this.urlParams);this._curReq=baidu.ajax.request(A,bk.usercenter.message.GET_REQ_DATA(this.method,{onsuccess:baidu.fn.bind(this._onSuccess,this),data:this.data}))},_getTag:function(){return this.constructor},_onSuccess:function(B){var C=B.responseText;var A={message:C};if(""==C||"null"==C||/html/.test(C)){this.cancel();this.dispatchEvent("onSessionTimeout",A);if(this.runner){this.runner._processSessionTimeout()}}else{this.dispatchEvent("onDataGet",A);if(this.runner){A.tag=this._getTag();this.runner._processDataGet(A)}}}});baidu.extend(bk.usercenter.message,{TIME_TYPE:{SINGLE:1,INTERVAL:2},REQ_METHOD:{GET:"get",POST:"post"},DEFAULT_REQ_DURATION:300000,GET_REQ_DATA:function(C,B){var A={};A.onsuccess=B.onsuccess;if(C==bk.usercenter.message.REQ_METHOD.POST){A.method="post";A.data=B.data}return A}})})();(function(){bk.usercenter.messageRunner=function(){this.messageList=[];this._running=false;return this};baidu.lang.inherits(bk.usercenter.messageRunner,baidu.lang.Class);baidu.extend(bk.usercenter.messageRunner.prototype,{_processDataGet:function(A){this.dispatchEvent("onDataGet",A)},_processSessionTimeout:function(){this.release();this.dispatchEvent("onSessionTimeout")},_getMessage:function(A){return this.messageList[A]||null},_getValidMessage:function(A){return baidu.array.filter(A,function(B){if(B!=null){return true}})},_doAction:function(B,C){var A=this._getValidMessage(B);baidu.each(A,function(D){C.call(D)})},_getList:function(A){var B=[];if(A){B.push(this._getMessage(A))}else{B=this.messageList}return B},stop:function(A){var B=bk.usercenter.message.prototype.cancel;this._doAction(this._getList(A),B);this._running=false},start:function(A){var B=bk.usercenter.message.prototype.start;this._doAction(this._getList(A),B);this._running=true},addMessage:function(A){this.messageList.push(A);A.runner=this;if(this._running){A.start()}return this},removeMessage:function(E){var B=parseInt(E,10);var F=null;if(!isNaN(B)){F=this._getMessage(B)}else{F=E}if(F){F.cancel();for(var D=0,A=this.messageList.length;D<A;++D){var C=this.messageList[D];if(C==F){this.messageList.splice(D,1,null)}}}},release:function(){this.stop();baidu.each(this.messageList,function(A){if(A){A.cancel();A=null}})}})})();baidu.more.ns("bk.usercenter");(function(){bk.usercenter.messageBoard=function(D){this._wrap=baidu.g(D.wrap);this._contentWrap=baidu.g(D.contentWrap);this._messages=[];this._className=D.className||"message-board";this._contentWrap.className=this._className;this.maxShowcount=D.maxCount||baidu.usercenter.messageBoard.DEFAULT_COUNT;var A=D.sortFunc;var B=D.buildMsgFunc;var C=function(E,F){if(F){return E.sort(F)}return E};baidu.extend(this,{show:function(){baidu.dom.show(this._wrap)},hide:function(){baidu.dom.hide(this._wrap)},close:function(){this.clearMessages();this._wrap.parentNode.removeChild(this._wrap)},getWrapDomChindren:function(){return baidu.dom.query("."+this._className+" ul li")},clearMessages:function(){var E=this._messages;baidu.each(this.getWrapDomChindren(),function(I,F){var H=baidu.dom.getAttr(I,"click");if(H){baidu.un(I,"click",E[F].handler)}});this._contentWrap.innerHTML="";this._messages=[]},setMessages:function(K){this.clearMessages();if(baidu.lang.isArray(K)){this._messages=[].concat(K)}else{this._messages.push(K)}var J=C(this._messages,A);var E=Math.min(this.maxShowcount,J.length);var I=document.createElement("ul");for(var F=0;F<E;++F){if(B){var H=document.createElement("li");H.appendChild(B(this._messages[F]));I.appendChild(H)}}this._contentWrap.appendChild(I)}})};baidu.extend(bk.usercenter.messageBoard,{DEFAULT_COUNT:4})})();baidu.more.ns("bk.floatBottle");bk.floatBottle.tools=(function(){var J={1:["已发出","s5","send"],2:["待评价","s6","uncomment"],3:["已处理","s1","solve"],4:["待处理","s4","unedit"],5:["进行中","s3","going"],6:["已完成","s1","success"],7:["已关闭","s2","fail"]};function C(P,Q,S){P=baidu.g(P);var R=P.innerText||P.textContent;var O=new RegExp(Q);if(O.test(R)){R=R.replace(O,function(T){return'<span style="color:red" onclick="this.style.color=\'\'">'+T+"</span>"});P.innerHTML=R;S&&S(Q)}}function M(P,R,Q){if(P.setSelectionRange){P.setSelectionRange(R,Q)}else{if(P.createTextRange){var O=P.createTextRange();O.collapse(true);O.moveStart("character",R);O.moveEnd("character",Q-R);O.select()}}P.focus()}function I(Q,S,R,T){Q=baidu.g(Q);var P=S.indexOf(R);if(-1!=P){var O=P+R.length;M(Q,P,O);T&&T(R)}}function A(V,U){var S=/(\{\w+\})/g;var R=V.match(S);if(!R||0==(len=R.length)){return V}for(var Q=len;Q--;){var P=R[Q];var O=P.length-2;var T=P.substr(1,O);if(!U.hasOwnProperty(T)){U[T]=""}V=V.replace(new RegExp(P,"g"),U[T])}return V}function N(X,R,U){var S=X.thrower;var P=S.name;if(0==S.id){S.name="系统"}var O=S.getUserIcon();var Q=X.fromDate.split(" ")[0];var T=bk.floatBottle.GET_BOTTLE_STATUS(parseInt(X.status),R);var V=J[T];var Y=X.thrower;var Z=X.lemmas[0];var a=Y.equalTo(U)?"您发出求助瓶":"您收到"+Y.name+"的求助瓶";var W={name:P,src:O,id:X.id,date:Q,statusMsg:V[0],statusClass:V[1],openClass:(1==X.isOpen?"":"unopen"),contentStr:a,lemmaId:Z.lemmaId,lemmaTitle:Z.lemmaTitle+(Z.subLemmaTitle?"-"+Z.subLemmaTitle:"")};return W}function K(R){var Q=bk.floatBottle.GET_BOTTLE_CONT(R.type);var O={id:R.id,from:new bk.usercenter.user(R.from),fromDate:R.throwDate,isOpen:R.isOpen,type:R.type,status:R.status,thrower:new bk.usercenter.user(R.user),lemmas:[{lemmaId:R.lemmaId,lemmaTitle:R.lemmaTitle,subLemmaId:R.subLemmaId,subLemmaTitle:R.subLemmaTitle,versionId:R.versionId,subVersionId:R.subVersionId}]};if(R.content){baidu.extend(O,{tag:R.content})}var P=new Q(O);return P}function E(){if(location.hash.length>0){if(history.pushState){history.pushState("",document.title,location.pathname)}else{location.hash="_"}}}function H(P){var O=baidu.event.get(P);P.stopPropagation()}function B(P){var O=[];if(P.bottle){O.push({type:1,count:P.bottle.length})}if(P.reply){O.push({type:2,count:P.reply.length})}return O}function D(O){if(baidu.firefox){O.addEventListener("DOMMouseScroll",function(P){O.scrollTop+=P.detail>0?30:-30;P.preventDefault()},false)}else{O.onmousewheel=function(P){var P=P||window.event;O.scrollTop+=P.wheelDelta>0?-30:30;P.returnValue=false}}}function L(T,P){P=P||"#999";if(baidu.browser.ie<=8||parseFloat(baidu.browser.firefox)<4){var S=baidu.g(T);var Q=S.getAttribute("placeholder");var R=baidu.dom.getStyle(S,"color");function O(){var U=S.value;if(""==U||Q==U){S.value=Q;baidu.dom.setStyle(S,"color",P)}}baidu.on(S,"focus",function(){var U=S.value;if(""==U||U==Q){S.value="";baidu.dom.setStyle(S,"color",R)}});baidu.on(S,"blur",O);O()}}function F(P,O,Q){if(typeof P=="undefined"){return }bk.usercenter.ajax.get("/user/ajax/bottle/setting?receiveMsg="+P+"&r="+Math.random(),function(S){var R=baidu.json.parse(S.responseText);if(R.success&&O){O()}else{Q&&Q()}})}return{highlight:C,textSelect:I,substitude:A,removeHash:E,cancelEvent:H,placeholder:L,translateMessage:B,preventScroll:D,parseMyBottle2UI:N,parseRdBottle2My:K,saveSetting:F}})();baidu.more.ns("bk.lemma");bk.lemma.bottleMessage=(function(){var K={BOTTLE:1,REPLY:2,CLOSE:3,STOP:4};var I="/user/ajax/bottle/notice?";var P=3;var H=0;var N=null;var B=null;var F=false;var Q=bk.floatBottle.tools;var S,J;function C(){var U=B;if(6==baidu.ie){U.style.setExpression("zoom",'function(ele){ele.style.top = Math.max(baidu.page.getScrollTop(), 30) +"px";}(this)')}function T(){var W=30;var V=baidu.page.getScrollTop();if(V>30){W=0}if(6!=baidu.ie){U.style.top=W+"px"}}T();baidu.on(window,"resize",T);baidu.on(window,"scroll",T);baidu.on(window,"unload",function(){baidu.un(window,"resize",T);baidu.un(window,"scroll",T)})}function O(T){B=D();C();J=new bk.usercenter.messageBoard({wrap:B,contentWrap:"btl-indicator-content",maxCount:P,buildMsgFunc:E});S=new bk.usercenter.message({url:I,urlParams:{type:1},type:bk.usercenter.message.TIME_TYPE.INTERVAL,interval:600000});S.addEventListener("onDataGet",L);S.start()}function D(){var T=document.createElement("div");T.id="btl-msg-indicator";T.className="float-board";T.style.display="none";T.innerHTML='<div class="btl-indicator"><div id="btl-indicator-content"></div><a class="close" onclick="bk.lemma.bottleMessage.close()" href="javascript:;">×</a></div>';document.body.appendChild(T);return T}function L(U){var T=Q.translateMessage(baidu.json.parse(U.message));if(0==T.length&&0==H){N=new bk.ui.enctip();N.init();F=true}if(T.length>0){if(F){N&&N.close();F=false}J.show();T.push({type:K.CLOSE});J.setMessages(T)}H++}function E(V){var T=document.createElement("div");var U="";switch(V.type){case K.BOTTLE:U='<span class="dot"></span><span class="msg-content">有<span style="color:red">1</span>个求助瓶漂来了，<a href="/uc/bottle#1" target="_blank" onclick="bk.lemma.bottleMessage.close()">去捞瓶子帮忙</a></span>';break;case K.REPLY:U='<span class="dot"></span><span class="msg-content"><strong><span class="red">'+V.count+'</span></strong>个求助瓶有新动态，<a href="/uc/bottle#2" target="_blank" onclick="bk.lemma.bottleMessage.close()">查看我的瓶子</a></span>';break;case K.CLOSE:T.style.cssText="text-align:right;padding:.5em .5em 0 0;";U='<a href="javascript:;" onclick="bk.lemma.bottleMessage.stop();">不再提示</a>';break;case K.STOP:U='设置成功！<span style="color:#999">可在“个人中心-我的求助瓶-设置”中重新开启。</span>';break}T.innerHTML=U;return T}function A(){S.cancel();J.close()}function M(){J.setMessages([{type:K.STOP}]);if("undefined"!=typeof easy.fx){var T=new easy.fx({selector:B,duration:210,animate:true,from:[["opacity",1,0]],to:[["opacity",0,0]],onStart:function(){S.cancel();return true},onStop:function(){J.close()}});setTimeout(function(){T.start()},2000)}else{A()}}function R(){baidu.ajax.get("/user/ajax/bottle/setting?receiveMsg=0&r="+Math.random(),function(U){var T=baidu.json.parse(U.responseText);if(T.success){M()}})}return{run:O,stop:R,close:A}})();function getUserInfoAsc(){var A="/api/personalmesg?date="+new Date().getTime();baidu.ajax.get(A,function(B){showUserInfo(B);window.setTimeout(bk.ui.enctip.build_userinfo_tip,300)})}function showUserInfo(xhr){var json=eval("("+xhr.responseText+")");bk.lemma.bottleMessage.run(json.base);baidu.g("userPic").src=json.base.avatar;var unLen=30;var throwBtlLinks=baidu.dom.query("a.throwbtl-link-view");if(json.base.uid&&throwBtlLinks.length>0){var lemmaId=baikeViewInfo.id;var lemmaTitle=baikeViewInfo.title;baidu.array.each(throwBtlLinks,function(throwBtlLink){var subLemmaId=baidu.dom.getAttr(throwBtlLink,"subLemmaId")||"";var subLemmaTitle=baidu.dom.getAttr(throwBtlLink,"subLemmaTitle")||"";throwBtlLink.onclick=function(){var isViewCard=baidu.dom.getAttr(this,"isViewCard")||"";nslog(location.href,isViewCard?3001:3002);baidu.bottle.throwBottle(lemmaId,lemmaTitle,json.base.uid,1,subLemmaId,subLemmaTitle);return false}})}if(json.base.odp==2){unLen-=4;baidu.G("iconOdp").src="http://img.baidu.com/img/baike/userrole/odp"+json.base.odpLevel+".png";baidu.G("kedoutuanPic").style.display="inline-block"}if(json.base.admin>=2){unLen-=4;baidu.G("iconAdmin").src="http://img.baidu.com/img/baike/userrole/channeladmin"+json.base.adminLevel+".png";baidu.G("masterPic").style.display="inline-block"}if(json.base.vip){unLen-=4;baidu.G("iconVip").src="http://img.baidu.com/img/baike/userrole/core"+json.base.vipLevel+".png";baidu.G("corePic").style.display="inline-block"}var highVersionLink=baidu.G("highVersionLink");baidu.G("highVersionNum").innerHTML=json.base.hqVerNum;var goodVersionLink=baidu.G("goodVersionLink");baidu.G("goodVersionNum").innerHTML=json.base.goodVerNum;if(json.base.hqVerNum>0){highVersionLink.href="/uc/effort/#8"}if(json.base.goodVerNum>0){goodVersionLink.href="/uc/effort/#7"}var userTitleLink=baidu.G("userTitleLink");userTitleLink.innerHTML=json.base.username.subByte(unLen);baidu.G("userTitlePic").className="usertitle level"+json.base.level;baidu.G("userProcess").style.width=json.base.scorept+"%";if(json.hotword&&json.hotword.suc){words=json.hotword.data.words;showHotwords();setTimeout(function(){var hotwordDiv=baidu.G("hotWord");baidu.removeClass(hotwordDiv,"dnone");baidu.removeClass(hotwordDiv.parentNode,"dnone")},0);var hotHelpE=baidu.G("hotHelp");var hotHelpTip=baidu.G("hotHelpTip");baidu.on(hotHelpE,"mouseover",showTip(hotHelpTip));baidu.on(hotHelpE,"mouseout",hideTip(hotHelpTip))}var effortObj={notpassed:["未通过版本","/uc/effort/#3"],HQVersion:["高质量版本","/uc/effort/#8"],goodVersion:["优质版本","/uc/effort/#7"],passVersion:["已通过版本","/uc/effort"]};if(json.effort&&json.effort.suc){var data=json.effort.data;for(var i in data){var flag=true;break}if(flag){var effArr=[];for(var i in data){var len=32-effortObj[i][0].byteLength();effArr.push("<li>");effArr.push('<a class="blink" href="');effArr.push(effortObj[i][1]);effArr.push('" target="_blank" onclick="nslog(this.href,242);">');effArr.push(effortObj[i][0]);effArr.push("</a><span>：</span>");effArr.push('<a href="http://baike.baidu.com/history/id=');effArr.push(data[i].versionid);effArr.push('" target="_blank">');effArr.push(data[i].title.subByte(len));effArr.push("</a>");effArr.push("</li>")}baidu.G("efforts").innerHTML=effArr.join("");var effortDiv=baidu.G("effort");baidu.removeClass(effortDiv,"dnone");baidu.removeClass(effortDiv.parentNode,"dnone");nslog(location.href,244);baidu.each(baidu.G("effort").getElementsByTagName("a"),function(ele){baidu.on(ele,"mousedown",function(){nslog(this.href,243)})})}}baidu.G("userInfoDiv").style.display="block";var userTip=baidu.G("userTip");var startPos=58;var endPos=215;baidu.G("userTipArrow").style.left=Math.round(startPos+(endPos-startPos)*json.base.scorept/100)-4+"px";var userProcessBack=baidu.G("userProcessBack");baidu.on(userProcessBack,"mouseover",showTip(userTip));baidu.on(userProcessBack,"mouseout",hideTip(userTip));baidu.G("userLevel").innerHTML=json.base.level;baidu.G("totalscore").innerHTML=json.base.totalscore;baidu.G("scorediff").innerHTML=json.base.scorediff;baidu.G("nextlevel").innerHTML=json.base.nextlevel;showGrowupTask(json.levelTaskInfo);json.routineTasks&&showDailyTask(json.routineTasks)}function showHotwords(){var C=words.length||0;var M=4;var F=[];while(F.length!=4){var D=Math.round(Math.random()*(C-1));var L=false;for(var A=0;A<F.length;A++){if(F[A]==D){L=true;break}}if(L){continue}F.push(D);if(F.length==words.length){break}}var E="";var K=[];for(var A=0;A<4&&A<F.length;A++){var J=baidu.string.decodeHTML(words[F[A]].title);var I=baidu.string.decodeHTML(words[F[A]].perfectpoints);var B=baidu.string.decodeHTML(words[F[A]].reason);var H=J.subByte(10);K.push("<li>");K.push('<a onclick="nslog(this.href,226);"  target="_blank" href="');K.push(words[F[A]].link+'"');K.push(' onmouseout="hideCompleteTip();"');K.push(' onmouseover="showCompleteTip('+A+", '"+baidu.string.encodeHTML(J).replace(/'/g,"&acute;")+"', '"+baidu.string.encodeHTML(I).replace(/'/g,"&acute;")+"');\">");K.push(baidu.string.encodeHTML(H));K.push("</a>");K.push("<span");K.push(' onmouseout="hideHotReasonTip();"');K.push(' onmouseover="showHotReasonTip('+A+",'"+baidu.string.encodeHTML(B).replace(/'/g,"&acute;")+"');\"");K.push(">：");K.push(baidu.string.encodeHTML(B.subByte(32-H.byteLength())));K.push("</span>");K.push("</li>")}baidu.G("hotWords").innerHTML=K.join("")}function showTip(A){return function(){if(timeout){clearTimeout(timeout);baidu.G("completeTip").style.display="none"}A.style.display="block"}}function hideTip(A){return function(){A.style.display="none"}}function hideHotReasonTip(){baidu.G("hotReasonTip").style.display="none"}var timeout;function hideCompleteTip(){timeout=setTimeout(function(){baidu.G("completeTip").style.display="none"},1000)}function showHotReasonTip(B,C){C=baidu.string.encodeHTML(C);if(timeout){clearTimeout(timeout);baidu.G("completeTip").style.display="none"}var A=baidu.G("hotReasonTip");baidu.G("hotReasonTipMain").innerHTML="<p>"+C+"</p>";A.style.top=50+B*20+"px";A.style.display="block"}function showCompleteTip(D,E,B){E=baidu.string.encodeHTML(E);B=baidu.string.encodeHTML(B);if(timeout){clearTimeout(timeout)}var C=baidu.G("completeTip");baidu.G("completeTipMain").innerHTML="<p>"+E+"</p><p><span>完善点：</span>"+B+"</p>";C.style.display="block";var A=C.scrollHeight;C.style.top=54+D*20-A-21+"px"}function showGrowupTask(C){if(C==0){C={};C.taskStat=0}else{if(C==9){return }}var I=function(J){var K="";switch(parseInt(J)){case 1:K="现在去完成";break;case 2:K="现在去领奖";break;default:K="我要去参加";break}return K};var E=C.taskStat!=0;var H=baidu.q("icon-growup-task","growupTask")[0];var F=[];var A=baidu.g("growupTask");if(!E){F.push('<li class="fix" style="margin-top:4px;"><span class="fl">加速升级，快速成长。</span><a href="/uc/task#1" target="_blank" class="act mr8">'+I(C.taskStat)+"&gt;&gt;</a></li>");baidu.g("growupTasks").innerHTML=F.join("");baidu.removeClass(A,"dnone");baidu.removeClass(A.parentNode,"dnone");H.title="成长任务";baidu.each(baidu.dom.query("#growupTask h3 a"),function(J){J.href+="#1"});return }else{H.title=C.taskName;var B=-49;H.style.backgroundPosition=(B-(C.groupID-1)*16)+"px -122px";var D="/uc/userleveltask?groupID="+C.groupID+"&taskID="+C.taskID+"&action=getGroupTask&r="+Math.random();baidu.ajax.get(D,function(K){if(K.responseText){var J=baidu.json.parse(K.responseText);J.taskProcess=(J.taskStat==2?1:J.taskProcess);F.push("<li>");F.push('<a class="mr4" target="_blank" href="/uc/task#2" onclick="nslog(this.href, 448)">');F.push(J.taskName);F.push("</a>");F.push('<span class="mr4">'+J.taskTaget+"</span>");F.push('<span class="mr4"><span class="icon-wealth mr4"></span>&nbsp;<span class="impt-word">+'+J.taskGold+"</span></span>");F.push("</li>");F.push('<li class="fix">');F.push('<a class="act mr8" href="/uc/task#2" target="_blank" onclick="nslog(this.href, 448)">'+I(J.taskStat)+"&gt;&gt;</a>");F.push('<div id="taskProgress" class="progressbar"></div>');F.push("</li>");baidu.g("growupTasks").innerHTML=F.join("");baidu.each(baidu.dom.query("#growupTask h3 a"),function(L){L.href+="#2"});baidu.removeClass(A,"dnone");baidu.removeClass(A.parentNode,"dnone");bk.usercenter.progressbar.init({text:"完成"+parseInt(J.taskProcess*100)+"%",selector:"taskProgress",process:J.taskProcess,textStyle:"color:#"+(J.taskStat==1?"e4ff00":"fff"),maxWidth:120,type:"simple"})}})}}function showDailyTask(B){var H=B.faces.length;var D=[];function I(){var L=false;var M=(new Date()).getDate();if(H>0){for(var N=0,K=B.faces.length;N<K;++N){if(B.faces[N]==M){L=true;break}}}return L}function C(R){var Q=[];for(var P=0,K=R.length;P<K;++P){var L=R[P];var N=L.taskType;var O=L.taskStatus==1?"继续参加":"参加任务";var M=L.awardTxt?'，拿<span class="mlr4 impt-word">'+L.awardTxt+"</span>徽章。":"";Q.push('<li><a target="_blank" href="'+L.entry+'">'+(L.shortTitle||L.name)+"</a>："+O+(L.awardTxt?"":"。")+M+'<a href="'+L.entry+'" target="_blank" class="goto"></a></li>')}return Q.join("")}if(B.ongoingjoined.length==0&&B.recommend.length==0){return }D.push('<li>本月积累笑脸<span class="impt-word mlr4">'+H+"</span>个。");if(!I()){D.push("今日笑脸还没点亮哦。")}D.push("</li>");var A=[];if(B.ongoingjoined&&B.ongoingjoined.length>0){var J=B.ongoingjoined[0];J.taskStatus=1;if(J.badgesToGain.length>0){J.awardTxt=J.badgesToGain[0].name}A.push(J)}if(B.recommend&&B.recommend.length>0){var E=B.recommend[0];E.taskStatus=2;E.awardTxt=E.award[0];A.push(E)}D.push(C(A));var F=baidu.g("dailyTasks");F.innerHTML=D.join("");baidu.removeClass(F,"dnone");baidu.removeClass(F.parentNode,"dnone")}function getUserRightAsc(){var A="/api/polycheck?lemmaId="+baikeViewInfo.id+"?date="+new Date().getTime();baidu.ajax.get(A,function(C,B){if(B=="0"){baidu.show("subSet");if(baidu.g("link-divider")){baidu.show("link-divider")}}})}bk.event.on("bk.event.user.login",function(){getUserInfoAsc()});bk.event.on("bk.event.user.login",getUserRightAsc);bk.event.on("bk.event.user.login",function(){if(baidu.g("usertaskstatus")){userTaskInfo()}});baidu.more.ns("bk.view");bk.view.adjustImage=function(B,C,A){if(B.width==0){return }tools.image.sizelimit(B,C,A);var D=baidu.dom.next(B.parentNode);setTimeout(function(){if(D){var E=B.width;D.style.width=(E-20)+"px";D.parentNode.style.width=(E+6)+"px";relatEle=baidu.dom.next(B.parentNode.parentNode);if(relatEle){relatEle.style.width=(659-E)+"px"}D=relatEle=null;D=relatEle=null}},40)};bk.view.imageTitleInit=function(F){var E=F.getElementsByTagName("span")[0];var C=F.getElementsByTagName("img")[0];if(!!E){var D=E.innerHTML;var A=D.indexOf("<sup>");var B=A>0?D.substr(0,A):D;if(/^\s*$/.test(D)){E.innerHTML="&nbsp;&nbsp;"}else{E.innerHTML=baidu.string.wbr(B)+(A>0?D.substr(A):"")}}bk.view.picAct(F);F.style.width=C.offsetWidth+"px";F.style.visibility="visible"};bk.view.imageInit=function(D){var C=D.getElementsByTagName("span")[0];var A=D.getElementsByTagName("img")[0];if(!!C){var B=C.innerHTML;if(/^\s*$/.test(B)){C.innerHTML="&nbsp;&nbsp;"}else{C.innerHTML=baidu.string.wbr(B)}}D.style.width=A.offsetWidth+"px"};bk.view.subLemmaImageInit=function(A){baidu.each(baidu.Q("text_pic",baidu.G("lemmaContent-"+A.index)),function(B){bk.view.imageTitleInit(B)});baidu.each(baidu.dom.query(".card-summary .editorImg",baidu.dom.next(A.ele)),function(B){bk.view.adjustImage(B,200,200);bk.view.picAct(B.parentNode.parentNode)});A=null};bk.view.lemmapic=function(){var A=baidu.q("text_pic","content","div");baidu.each(A,function(B){bk.view.imageTitleInit(B)});baidu.each(baidu.dom.query(".card-summary .editorImg",baidu.G("content")),function(B){bk.view.adjustImage(B,200,200);bk.view.picAct(B.parentNode.parentNode)})};bk.view.picAct=function(B){B.style.position="relative";var A=B.getElementsByTagName("a")[0];if(A&&A.href.match(/\/image\//)){var C=document.createElement("a");baidu.dom.addClass(C,"pic-handle");C.title="查看图片";C.href=A.href;C.innerHTML="&nbsp;&nbsp;";C.target="_blank";baidu.dom.insertBefore(C,A);baidu.on(B,"mouseover",function(){baidu.dom.addClass(B,"pic-hover")});baidu.on(B,"mouseout",function(){baidu.dom.removeClass(B,"pic-hover")});baidu.on(C,"mouseover",function(){baidu.dom.addClass(B,"pic-hover")})}A=null;C=null};baidu.on(window,"load",function(){var A=(typeof (baikeViewInfo)!="undefined"&&baikeViewInfo.expIndex)||0;if(baidu.G("lemmaContent-"+A)){baidu.each(baidu.Q("text_pic",baidu.G("lemmaContent-"+A)),function(B){bk.view.imageTitleInit(B)})}baidu.each(baidu.dom.query(".card-summary .editorImg",baidu.G("content")),function(B){bk.view.adjustImage(B,200,200);bk.view.picAct(B.parentNode.parentNode)})});var G=baidu.G;if(typeof baidu.ns=="undefined"||typeof baidu.ns.more=="undefined"){baidu.more=baidu.more||{};baidu.more.ns=function(E){var F=E.split(".");var B=window;for(var D=0,A=F.length;D<A;D++){var C=F[D];if(C==""){continue}B[C]=(B[C]||{});B=B[C]}}}if(typeof nslog=="undefined"){function nslog_inner(B,D,A){var C=(new Date()).getTime();var E=["http://nsclick.baidu.com/v.gif?pid="+nslog.pid,"url="+encodeURIComponent(B),"type="+D,"t="+C];for(k in A){E.push(k+"="+A[k])}for(k in nslog.log_params){E.push(k+"="+nslog.log_params[k])}nslog.req(E.join("&"))}nslog=function(B,C,A){if(nslog.ie6){nslog.waitinglist.push([B,C,A]);if(!nslog.sending4ie6){nslog.sending4ie6=true;nslog.send4ie6()}}else{nslog_inner(B,C,A)}};nslog.ie6=false;nslog.waitinglist=[];nslog.sending4ie6=false;nslog.send4ie6=function(){if(nslog.waitinglist.length==0){nslog.sending4ie6=false}else{var A=nslog.waitinglist.shift();nslog_inner(A[0],A[1],A[2]);setTimeout(function(){nslog.send4ie6()},100)}};if(/msie (\d+\.\d)/i.test(navigator.userAgent)){var ie=document.documentMode||+RegExp["\x241"];nslog.ie6=ie==6}nslog.pid=103;nslog.log_params={};nslog.set=function(A,B){nslog.log_params[A]=B};nslog.sid=((new Date()).getTime()+"_"+Math.round(Math.random()*2147483637));nslog.stat=function(A){nslog.req("/js/blank.js?func="+A+"&sid="+nslog.sid+"&t="+(new Date()).getTime())};nslog.req=function(A){var C="iknowlog_"+(new Date()).getTime();var B=window[C]=new Image();B.onload=B.onerror=function(){window[C]=null};B.src=A;B=null};baidu.dom.ready(function(){baidu.on(document,"mousedown",function(I){var M=baidu.event.get(I);var P=M.target;var N=3;var C=false;var H="";var L=true;var O=/nslog:(\d+)/;var A=/nslog-area/;var B=window.location.href;while(P){if(P.nodeType==1){var K=P.className.match(O);if(N>0){B=P.href?P.href:window.location.href;if(L&&K){var F={x:M.pageX,y:M.pageY};var E=P.getAttribute("log-data-detail");var D=P.getAttribute("log-once-flag");if(E){F["log-data-detail"]=E}if(!D||!P.logFlag){nslog(B,K[1],F);L=false;if(D){P.logFlag=true}}}if(!C&&P.href){C=true;H=B}}if(C&&A.test(P.className)){var J=P.getAttribute("data-nslog-type");var F={x:M.pageX,y:M.pageY};var E=P.getAttribute("log-data-detail");if(E){F["log-data-detail"]=E}if(J){nslog(H,J,F)}}}N--;P=P.parentNode}P=null;O=null;A=null})})}if(typeof userlogin=="undefined"||typeof userlogin.check=="undefined"){var g_pop=g_pop||function(){};if(!Array.prototype.push){Array.prototype.push=function(){var B=this.length;for(var A=0;A<arguments.length;A++){this[B+A]=arguments[A]}return this.length}}function G(){var C=new Array();for(var B=0;B<arguments.length;B++){var A=arguments[B];if(typeof A=="string"){A=document.getElementById(A)}if(arguments.length==1){return A}C.push(A)}return C}Function.prototype.bind=function(B){var A=this;return function(){A.apply(B,arguments)}};Function.prototype.bindAsEventListener=function(B){var A=this;return function(C){A.call(B,C||window.event)}};Object.extend=function(A,B){for(property in B){A[property]=B[property]}return A};if(!window.Event){var Event=new Object()}Object.extend(Event,{observers:false,element:function(A){return A.target||A.srcElement},isLeftClick:function(A){return(((A.which)&&(A.which==1))||((A.button)&&(A.button==1)))},pointerX:function(A){return A.pageX||(A.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft))},pointerY:function(A){return A.pageY||(A.clientY+(document.documentElement.scrollTop||document.body.scrollTop))},stop:function(A){if(A.preventDefault){A.preventDefault();A.stopPropagation()}else{A.returnValue=false;A.cancelBubble=true}},findElement:function(C,B){var A=Event.element(C);while(A.parentNode&&(!A.tagName||(A.tagName.toUpperCase()!=B.toUpperCase()))){A=A.parentNode}return A},_observeAndCache:function(D,C,B,A){if(!this.observers){this.observers=[]}if(D.addEventListener){this.observers.push([D,C,B,A]);D.addEventListener(C,B,A)}else{if(D.attachEvent){this.observers.push([D,C,B,A]);D.attachEvent("on"+C,B)}}},unloadCache:function(){if(!Event.observers){return }for(var A=0;A<Event.observers.length;A++){Event.stopObserving.apply(this,Event.observers[A]);Event.observers[A][0]=null}Event.observers=false},observe:function(D,C,B,A){if("string"==typeof D){D=G(D)}A=A||false;if(C=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||D.attachEvent)){C="keydown"}this._observeAndCache(D,C,B,A)},stopObserving:function(D,C,B,A){if("string"==typeof D){D=G(D)}A=A||false;if(C=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||D.detachEvent)){C="keydown"}if(D.removeEventListener){D.removeEventListener(C,B,A)}else{if(D.detachEvent){D.detachEvent("on"+C,B)}}}});Event.observe(window,"unload",Event.unloadCache,false);var Class=function(){var A=function(){this.initialize.apply(this,arguments)};for(i=0;i<arguments.length;i++){superClass=arguments[i];for(member in superClass.prototype){A.prototype[member]=superClass.prototype[member]}}A.child=function(){return new Class(this)};A.extend=function(B){for(property in B){A.prototype[property]=B[property]}};return A};var Popup=new Class();Popup.prototype={iframeIdName:"ifr_popup",initialize:function(A){this.config=Object.extend({contentType:1,isHaveTitle:true,scrollType:"no",isBackgroundCanClick:false,isSupportDraging:true,isShowShadow:true,isReloadOnClose:true,width:400,isPop:false,height:300},A||{});this.info={shadowWidth:3,title:"",contentUrl:"",contentHtml:"",callBack:null,parameter:null,confirmCon:"",alertCon:"",someHiddenTag:"select,object,embed",someDisabledBtn:"",someHiddenEle:"",overlay:0,coverOpacity:30};this.color={cColor:"#000",bColor:"#FFFFFF",tColor:"#709CD2",wColor:"#FFFFFF"};this.dropClass=null;this.someToHidden=[];this.someToDisabled=[];if(!this.config.isHaveTitle){this.config.isSupportDraging=false}this.iniBuild()},setContent:function(A,B){if(B!=""){switch(A){case"width":this.config.width=B;break;case"height":this.config.height=B;break;case"title":this.info.title=B;break;case"contentUrl":this.info.contentUrl=B;break;case"contentHtml":this.info.contentHtml=B;break;case"callBack":this.info.callBack=B;break;case"parameter":this.info.parameter=B;break;case"confirmCon":this.info.confirmCon=B;break;case"alertCon":this.info.alertCon=B;break;case"someHiddenTag":this.info.someHiddenTag=B;break;case"someHiddenEle":this.info.someHiddenEle=B;break;case"someDisabledBtn":this.info.someDisabledBtn=B;break;case"overlay":this.info.overlay=B}}},iniBuild:function(){var A=G("dialogCase");if(A){document.body.removeChild(A)}A=document.createElement("DIV");A.id="dialogCase";A.style.zIndex=65535;A.style.top=0;A.style.left=0;A.style.position="absolute";A.style.width="100%";document.body.appendChild(A)},build:function(){var B=10001+this.info.overlay*10;var I=B+2;this.iframeIdName="ifr_popup"+this.info.overlay;var K="http://img.baidu.com/hi/img/";var J='<div id="dialogBoxClose" style="width:18px;height:18px;cursor:pointer;margin-bottom:2px;"><div>';var F="filter: alpha(opacity="+this.info.coverOpacity+");opacity:"+this.info.coverOpacity/100+";";var L='<div id="dialogBoxBG" style="position:absolute;top:0px;left:0px;z-index:'+B+";"+F+"background-color:"+this.color.cColor+';display:none;"></div>';var E='<div id="dialogBox" style="border:1px solid #104987;display:none;z-index:'+I+";position:relative;width:"+this.config.width+'px;background:url(\'http://img.baidu.com/img/baike/editor/bgs.gif\') repeat-x scroll 0 -68px #1169B1;padding:1px;"><table width="100%" border="0" cellpadding="0" cellspacing="0" style="background:url(\'http://img.baidu.com/img/baike/editor/bgs.gif\') repeat-x 0 -144px">';if(this.config.isHaveTitle){E+='<tr height="29"><td style="background:url(\'http://img.baidu.com/img/baike/editor/edithelper.gif\') no-repeat right -68px transparent;"><table style="-moz-user-select:none;height:24px;" width="100%" border="0" cellpadding="0" cellspacing="0" ><tr><td width="6" height="24"></td><td id="dialogBoxTitle" style="color:'+this.color.wColor+';font-size:14px;font-weight:bold;">'+this.info.title+'&nbsp;</td><td id="dialogClose" width="18" align="right" valign="middle">'+J+'</td><td width="9"></td></tr></table></td></tr>'}else{E+='<tr height="10"><td align="right">'+J+"</td></tr>"}E+='<tr id="container-tr" style="height:'+(this.config.height-36)+'px" valign="top"><td style="position:relative;padding:1px;"><div style="border:1px solid #FFF;"><div style="background:url(\'http://img.baidu.com/img/baike/editor/bgs.gif\') repeat-x #FFF;height:13px;line-height:13px;font-size:1px;">&nbsp;</div><div id="dialogBody" style="background-color:#FFF;height:'+(this.config.height-46)+"px;width:"+(this.config.width-4)+'px"></div></div></td></tr></table></div><div id="dialogBoxShadow" style="display:none;z-index:'+B+';"></div>';if(!this.config.isBackgroundCanClick){G("dialogCase").innerHTML=L+E;var H=document,D=H.body,C=H.documentElement,A=H.compatMode=="BackCompat"?D:H.documentElement;G("dialogBoxBG").style.height=Math.max(C.scrollHeight,D.scrollHeight,A.clientHeight)+"px";G("dialogBoxBG").style.width=window.screen.width+"px"}else{G("dialogCase").innerHTML=E}Event.observe(G("dialogBoxClose"),"click",this.reset.bindAsEventListener(this),false);if(this.config.isSupportDraging){dropClass=new Dragdrop(this.config.width,this.config.height,this.info.shadowWidth,this.config.isSupportDraging,this.config.contentType);G("dialogBoxTitle").style.cursor="move"}this.lastBuild()},lastBuild:function(){var B='<div style="width:100%;height:100%;text-align:center;"><div style="margin:0 20px 0 20px;padding-top:20px;font-size:14px;line-height:16px;color:#000000;">'+this.info.confirmCon+'</div><div style="margin:20px;"><input id="dialogOk" type="button" value="  确定  "/>&nbsp;<input id="dialogCancel" type="button" value="  取消  "/></div></div>';var E='<div style="width:100%;height:100%;text-align:center;background-color:#fff"><div style="margin:0 20px;font-size:14px;line-height:16px;color:#000000;">'+this.info.alertCon+'</div><div style="margin:20px;"><input id="dialogYES" type="button" value="  确定  "/></div></div>';var A=10001+this.info.overlay*10;var D=A+4;if(this.config.contentType==1){var C="<iframe style='height:"+(this.config.height-46)+"px;width:"+(this.config.width-4)+"px;' name='"+this.iframeIdName+"' id='"+this.iframeIdName+"' src='"+this.info.contentUrl+"' frameborder='0' scrolling='"+this.config.scrollType+"'></iframe>";var F="<div id='iframeBG' style='position:absolute;top:0px;left:0px;width:1px;height:1px;z-index:"+D+";filter: alpha(opacity=00);opacity:0.00;background-color:#ffffff;'><div>";G("dialogBody").innerHTML=C+F}else{if(this.config.contentType==2){G("dialogBody").innerHTML=this.info.contentHtml}else{if(this.config.contentType==3){G("dialogBody").innerHTML=B;Event.observe(G("dialogOk"),"click",this.forCallback.bindAsEventListener(this),false);Event.observe(G("dialogCancel"),"click",this.close.bindAsEventListener(this),false)}else{if(this.config.contentType==4){G("dialogBody").innerHTML=E;Event.observe(G("dialogYES"),"click",this.close.bindAsEventListener(this),false)}}}}},reBuild:function(){G("dialogBody").height=G("dialogBody").clientHeight;this.lastBuild()},show:function(){this.hiddenSome();this.middle();if(this.config.isShowShadow){this.shadow()}},resize:function(C,F,I){this.setContent("width",C);this.setContent("height",F);var H=G("dialogBox");var E=G("dialogBody");H.style["width"]=C+"px";H.style["height"]=F+"px";var D=G(this.iframeIdName);D.style["height"]=F-46+"px";D.style["width"]=C-4+"px";E.style["height"]=F-46+"px";E.style["width"]=C-4+"px";if(I){this.setContent("title",I);var B=G("dialogBoxTitle");B.innerHTML=I+"&nbsp;"}var A=G("container-tr");A.style["height"]=F-36+"px";this.show()},forCallback:function(){return this.info.callBack(this.info.parameter)},shadow:function(){var A=G("dialogBoxShadow");var B=G("dialogBox");A.style["top"]=B.offsetTop+this.info.shadowWidth+10+"px";A.style["left"]=B.offsetLeft+this.info.shadowWidth+6+"px";A.style["width"]=B.offsetWidth-6+"px";A.style["height"]=B.offsetHeight-10+"px";A.style["position"]="absolute";A.style["background"]="#000";A.style["display"]="";A.style["opacity"]="0.1";A.style["filter"]="alpha(opacity=20)"},middle:function(){if(!this.config.isBackgroundCanClick){G("dialogBoxBG").style.display=""}var F=G("dialogBox");F.style["position"]="absolute";F.style["display"]="";var C=(document.documentElement.clientWidth||document.body.clientWidth);var E=(document.documentElement.clientHeight||document.body.clientHeight);var B=(document.documentElement.scrollTop||document.body.scrollTop);var D=(C/2)-(F.offsetWidth/2);var A=(E/2+B)-(F.offsetHeight/2);if(A<B){A=20+B}if(D<1){D=20}F.style["left"]=D+"px";F.style["top"]=A+"px"},reset:function(A){this.close();if(typeof A!=="boolean"){A=false}if(this.config.isReloadOnClose||A){top.location.href=top.location.href.replace(/#.*$/g,"")}},close:function(){G("dialogBox").style.display="none";if(!this.config.isBackgroundCanClick){G("dialogBoxBG").style.display="none"}if(this.config.isShowShadow){G("dialogBoxShadow").style.display="none"}G("dialogBody").innerHTML="";this.showSome()},hiddenSome:function(){var A=this.info.someHiddenTag.split(",");if(A.length==1&&A[0]==""){A.length=0}for(var B=0;B<A.length;B++){this.hiddenTag(A[B])}var C=this.info.someHiddenEle.split(",");if(C.length==1&&C[0]==""){C.length=0}for(var B=0;B<C.length;B++){this.hiddenEle(C[B])}var C=this.info.someDisabledBtn.split(",");if(C.length==1&&C[0]==""){C.length=0}for(var B=0;B<C.length;B++){this.disabledBtn(C[B])}},disabledBtn:function(B){var A=document.getElementById(B);if(typeof (A)!="undefined"&&A!=null&&A.disabled==false){A.disabled=true;this.someToDisabled.push(A)}},hiddenTag:function(B){var C=document.getElementsByTagName(B);if(C!=null){for(var A=0;A<C.length;A++){if(C[A].style.display!="none"&&C[A].style.visibility!="hidden"){C[A].style.visibility="hidden";this.someToHidden.push(C[A])}}}},hiddenEle:function(B){var A=document.getElementById(B);if(typeof (A)!="undefined"&&A!=null){A.style.visibility="hidden";this.someToHidden.push(A)}},showSome:function(){for(var A=0;A<this.someToHidden.length;A++){this.someToHidden[A].style.visibility="visible"}for(var A=0;A<this.someToDisabled.length;A++){this.someToDisabled[A].disabled=false}},replaceIframe:function(A){this.setContent("contentUrl",A);G(this.iframeIdName).src=A}};var Dragdrop=new Class();Dragdrop.prototype={initialize:function(C,B,A,D,E){this.dragData=null;this.dragDataIn=null;this.backData=null;this.width=C;this.height=B;this.shadowWidth=A;this.showShadow=D;this.contentType=E;this.IsDraging=false;this.oObj=G("dialogBox");Event.observe(G("dialogBoxTitle"),"mousedown",this.moveStart.bindAsEventListener(this),false)},moveStart:function(A){this.IsDraging=true;if(this.contentType==1){G("iframeBG").style.display="";G("iframeBG").style.width=this.width+"px";G("iframeBG").style.height=this.height+"px"}Event.observe(document,"mousemove",this.mousemove.bindAsEventListener(this),false);Event.observe(document,"mouseup",this.mouseup.bindAsEventListener(this),false);Event.observe(document,"selectstart",this.returnFalse,false);this.dragData={x:Event.pointerX(A),y:Event.pointerY(A)};this.backData={x:parseInt(this.oObj.style.left),y:parseInt(this.oObj.style.top)};if(document.body.setCapture){document.body.setCapture()}},mousemove:function(A){if(!this.IsDraging){return }var C=Event.pointerX(A)-this.dragData.x+parseInt(this.oObj.style.left);var B=Event.pointerY(A)-this.dragData.y+parseInt(this.oObj.style.top);if(this.dragData.y<parseInt(this.oObj.style.top)){B=B-12}else{if(this.dragData.y>parseInt(this.oObj.style.top)+25){B=B+12}}this.oObj.style.left=C+"px";this.oObj.style.top=B+"px";if(this.showShadow){G("dialogBoxShadow").style.left=C+this.shadowWidth+6+"px";G("dialogBoxShadow").style.top=B+this.shadowWidth+10+"px"}this.dragData={x:Event.pointerX(A),y:Event.pointerY(A)};document.body.style.cursor="move"},mouseup:function(C){if(!this.IsDraging){return }if(this.contentType==1){G("iframeBG").style.display="none"}document.onmousemove=null;document.onmouseup=null;var B=Event.pointerX(C)-(document.documentElement.scrollLeft||document.body.scrollLeft);var A=Event.pointerY(C)-(document.documentElement.scrollTop||document.body.scrollTop);if(B<1||A<1||B>document.body.clientWidth||A>document.body.clientHeight){this.oObj.style.left=this.backData.x+"px";this.oObj.style.top=this.backData.y+"px";if(this.showShadow){G("dialogBoxShadow").style.left=this.backData.x+this.shadowWidth+6+"px";G("dialogBoxShadow").style.top=this.backData.y+this.shadowWidth+10+"px"}}this.IsDraging=false;document.body.style.cursor="";Event.stopObserving(window,"selectstart",this.returnFalse,false);if(document.body.releaseCapture){document.body.releaseCapture()}},returnFalse:function(){return false}};var baikeLoginArgs=[];function userLogin(){switch(arguments.length){case 0:relogin();break;case 1:baikeLoginArgs=[arguments[0]];loginflag.setLoginArr("loginSt",0);loginflag.setLoginArr("loginUrl",arguments[0]);checkIfLogin();break;default:baikeLoginArgs=[arguments[0],arguments[1]];loginflag.setLoginArr("loginSt",1);loginflag.setLoginArr("isDetect",arguments[0]);loginflag.setLoginArr("loginTip",arguments[1]);checkIfLogin();break}nslog(location.href,88,{name:"login"})}function checkReloginResult(){afterLogin()}function afterLogin(){switch(baikeLoginArgs.length){case 0:try{bk.editor.unloadConfirm.clear()}catch(A){}window.location=location.href.replace(/#.*/,"");g_pop.close();break;case 1:window.location=baikeLoginArgs[0];g_pop.close();break;default:g_pop.close();if(loginflag.getLoginArr("isDetect")==3){Detect.detecting()}else{try{cnEdit()}catch(A){if(bk.editor){bk.editor.submiter.submitform()}else{submitform()}}}break}}function relogin(A){g_pop=new Popup({contentType:1,isReloadOnClose:false,width:408,height:345});g_pop.setContent("title","登录到百度百科");g_pop.setContent("contentUrl","/page/userlogin.html"+(A?("?fr="+A):""));g_pop.build();g_pop.show()}var userlogin=userlogin||function(){};userlogin.reg=function(A){var B="/page/userlogin.html?userreg"+(A?("&fr="+A):"");g_pop=new Popup({contentType:1,isReloadOnClose:false,width:408,height:345});g_pop.setContent("title","登录到百度百科");g_pop.setContent("contentUrl",B);g_pop.build();g_pop.show()};var regOkHandler=function(A){g_pop.replaceIframe("/page/regok.html?un="+encodeURIComponent(A));g_pop.resize(538,395)};var offlineTimer;function checkIfLogin(){var B="http://baike.baidu.com/login?s="+Math.random();var A=document.createElement("script");A.setAttribute("type","text/javascript");A.setAttribute("src",B);document.getElementsByTagName("head")[0].appendChild(A);offlineTimer=setTimeout(loginWarn,15000)}function wiki_relogin(){clearTimeout(offlineTimer);if(arguments[0]==1){if(loginflag.getLoginArr("loginSt")==0){loginflag.setLoginArr("loginTip",0);var C=loginflag.getLoginArr("loginUrl");var E=setParamURL(C);if(document.images){var B=new Image();var D=addURLParam("/js/blank.js","id",E);B.src=addURLParam(D,"logTp",0)}relogin(C)}else{relogin(loginflag.getLoginArr("isDetect"),loginflag.getLoginArr("loginTip"))}}else{if(loginflag.getLoginArr("loginSt")==0){window.location=loginflag.getLoginArr("loginUrl")}else{if(loginflag.getLoginArr("isDetect")==3){Detect.detecting()}else{try{cnEdit()}catch(A){if(bk.editor){bk.editor.submiter.submitform()}else{submitform()}}}}}}function loginWarn(){var A='			<br>			<div style="font-size:14px;font-weight:bold;text-align:center;padding:10px 10px">请检查您的网络链接，重新进行提交</div>	';g_pop=new Popup({contentType:2,isReloadOnClose:false,width:350,height:120});g_pop.setContent("title","提示");g_pop.setContent("contentHtml",A);g_pop.build();g_pop.show()}function addURLParam(C,B,A){C+=(C.indexOf("?")==-1?"?":"&");C+=B+"="+A;return C}function setParamURL(B){if(B.indexOf("id=")!=-1){var A=(B.match(/id=\d+/).toString().substr(3));return A}}var loginFlag=function(){};(function loginStatus(){var A=new Array();A.loginTip=0;loginFlag.prototype.setLoginArr=function(B,C){A[B]=C};loginFlag.prototype.getLoginArr=function(B){return A[B]}})();var loginflag=new loginFlag();function getCookie(C){var B="(?:; )?"+C+"=([^;]*);?";var A=new RegExp(B);if(A.test(document.cookie)){return decodeURIComponent(RegExp["$1"])}else{return null}}function setCookie(F,H,B,C,A,E){var D=F+"="+encodeURIComponent(H);if(B){D+="; expires="+B.toGMTString()}if(C){D+="; path="+C}if(A){D+="; domain="+A}if(E){D+="; secure"}document.cookie=D}function setSug(){g_pop=new Popup({contentType:1,isReloadOnClose:false,width:300,height:180});g_pop.setContent("title","设置");g_pop.setContent("contentUrl","/page/suggestion.html");g_pop.build();g_pop.show()}function userlogin(B,A){userlogin.onLoginSuccess=B||userlogin.defalutLoginSuccess;userLogin()}userlogin.defalutLoginSuccess=userlogin.onLoginSuccess=function(){window.location.href=window.location.href.replace(/#.*$/g,"")};userlogin.onLoginFailed=function(){window.location="http://passport.baidu.com/?login&tpl=wk&u="+escape("http://baike.baidu.com/")};userlogin.check=function(D,A,C){function B(F,H,E){if(baidu.trim(F.responseText)=="0"){if(E){E()}else{userlogin(H,C)}return false}if(H){H()}return true}baidu.ajax.get("/api/login/?t="+(new Date()).getTime()+(C?("&fr="+C):""),function(E){B(E,D,A)})};userlogin.api=(function(){var loginConfig={immediate:true,jumpUrl:"http://baike.baidu.com/page/logincallback.html?fr=loginapi",labelName:{password:"密\u3000码："},onSuccess:function(){window.location=location.href.replace(/#.*/,"")},onSystemError:function(){window.location=["http://passport.baidu.com/?login","tpl=wk",("u="+escape("http://baike.baidu.com/"))].join("&")},container_id:"user-login-container"};var loginParams={};function getPassportConfig(){var loginUrl=["http://passport.baidu.com/api/?login","tpl=wk","callback=userlogin.api.init",("time="+new Date().getTime())].join("&");baidu.sio.callByServer(loginUrl)}function setConfig(conf){baidu.object.extend(loginConfig,conf)}function configInit(conf){loginParams=eval(conf);if(loginParams.error_no==1){}else{baidu.sio.callByBrowser(loginParams.jslink,buildLoginPage)}}function buildLoginPage(){bdPass.LoginTemplate.render(loginParams,loginConfig.container_id,loginConfig)}return{get:getPassportConfig,set:setConfig,init:configInit,render:buildLoginPage}})();userlogin.userbarinit=function(){var A=baidu.G("logout");if(A&&(A.className!="goto-index")){A.href="https://passport.baidu.com/?logout&u="+escape(location.href)}};baidu.dom.ready(userlogin.userbarinit);baidu.more.ns("bk.userbar");bk.userbar.check=function(){baidu.ajax.get("/api/login/?t="+(new Date()).getTime(),function(A){bk.userbar.build(A)})};bk.userbar.build=function(req){var user=eval("("+req.responseText+")");var userbarHtml=[];if(user){userbarHtml.push('<strong><a href="http://passport.baidu.com/center" target="_blank" id="login-user-name" class="nslog:80">'+user.name+"</a></strong> "+user.title);if(user.forbid){userbarHtml.push('<span class="red">禁止发表词条</span>')}userbarHtml.push('<span id="mnum" class="nslog-area" data-nslog-type="85"></span><span class="usrbar-split">|</span><span id="my_home_container"><a id="my_home" target="_blank" class="nslog:81" href="http://baike.baidu.com/uc/home">我的百科</a></span><span class="usrbar-split">|</span><a target="_blank" href="http://zhidao.baidu.com/q?ct=24&amp;cm=16&amp;tn=ucframework&amp;fr=wk" class="nslog:84">我的知道</a>');if(user.hasspace=="true"){userbarHtml.push('<span class="usrbar-split">|</span><a target="_blank" href="http://hi.baidu.com/sys/checkuser/'+user.name+'/3" class="nslog:86">我的空间</a>')}userbarHtml.push('<span class="usrbar-split">|</span><a href="http://www.baidu.com" class="nslog:87">百度首页</a> <span class="usrbar-split">|</span> ');userbarHtml.push('<a id="logout" target="_self" href="https://passport.baidu.com/?logout&amp;u=http://baike.baidu.com" nslog:89">退出</a>')}else{userbarHtml.push('<a href="http://www.baidu.com" class="nslog:87">百度首页</a><span class="usrbar-split">|</span><a href="https://passport.baidu.com/?login&amp;tpl=wk" class="nslog:88" onclick="userlogin();return false">登录</a>')}if(user){userbarHtml.push('<div id="nav_extra" style="display:none"><div class="top"><a href="/uc/home" class="nslog:81" target="_blank">我的百科</a></div><div class="body">');if(user.channeladmin){userbarHtml.push('<div><a target="_blank" href="http://baike.baidu.com/channel-admin/" class="nslog:1002">分类管理员</a></div>')}userbarHtml.push('<div><a target="_blank" class="nslog:82" href="http://baike.baidu.com/uc/effort">我的贡献</a></div><div><a target="_blank" class="nslog:83" href="http://baike.baidu.com/uc/draft">草稿箱</a></div><div><a target="_blank" class="nslog:1003" href="http://baike.baidu.com/uc/task">我的任务</a></div><div><a target="_blank" class="nslog:1004" href="http://baike.baidu.com/uc/recommend">为我推荐</a></div></div></div>')}baidu.g("usrbar").innerHTML=userbarHtml.join("");bk.userbar.init();baidumessage();userlogin.userbarinit();if(user){bk.event.fire("bk.event.user.login")}}}(function(){baidu.more.ns("bk.activity");bk.activity.Egg=function(A){this.egg=null;this.typeId=A};baidu.lang.inherits(bk.activity.Egg,baidu.lang.Class);baidu.extend(bk.activity.Egg.prototype,{show:function(){this.egg.style.display="block"},hide:function(){this.egg.style.display="none"},close:function(A){if(this.egg){this.egg.parentNode.removeChild(this.egg)}this.dispatchEvent("onClose",{flag:A})},setPosition:function(A){},build:function(){},click:function(){this.dispatchEvent("onClick")}});bk.activity.fiveYearEgg=baidu.lang.createClass(function(A){bk.activity.Egg.call(this,A)},{superClass:bk.activity.Egg}).extend({build:function(){if(!this.egg){var B=document.createElement("div");B.id="fiveYearAnniversaryEgg";B.style.position="absolute";B.style.left="-1000px";B.style.top="-1000px";document.body.appendChild(B);var A=baidu.swf.createHTML({url:"http://img.baidu.com/img/baike/usercenter/task/5yearegg"+this.typeId+".swf",width:250,height:200,wmode:"transparent",allowscriptaccess:"always"});B.innerHTML=A;this.egg=B}},setPosition:function(A){this.egg.style.left=A.l+"px";this.egg.style.top=A.t+"px"}})})();(function(){bk.activity.rule=function(){this.nextRule=null;this.validateResult=false};baidu.extend(bk.activity.rule.prototype,{validate:function(){},dispatch:function(){if(this.validateResult){this.dispatchEvent("onValidateOK");if(this.nextRule){this.nextRule.validate()}else{this.m.dispatchEvent("onValidateOver")}}else{this.dispatchEvent("onValidateError")}}});baidu.lang.inherits(bk.activity.rule,baidu.lang.Class);bk.activity.ratioRule=baidu.lang.createClass(function(A){this.p=A||0.3},{superClass:bk.activity.rule}).extend({validate:function(){this.validateResult=(this.p>=Math.random());this.dispatch()}});bk.activity.fiveYearLemmaRule=baidu.lang.createClass(function(B,A){this.lemmaTitle=B;this.lemmaRules=A},{superClass:bk.activity.rule}).extend({validate:function(){for(var D=0,B=this.lemmaRules.length;D<B;++D){var F=this.lemmaRules[D];if(Object.prototype.toString.apply(F)=="[object Array]"){var C=new Date;var E=C.getMonth()+1;var A=C.getDate();if(F[0]==this.lemmaTitle&&E+"."+A==F[1]){this.validateResult=true;break}}else{if(F==this.lemmaTitle){this.validateResult=true;break}}}this.dispatch()}});bk.activity.getRewardRule=baidu.lang.createClass(function(A){this.checkEggUrl="/fiveyear/coloregg/?"+baidu.url.jsonToQuery({action:"checkEgg",eggType:A.typeId,r:Math.random()})},{superClass:bk.activity.rule}).extend({validate:function(){var A=this;baidu.ajax.get(this.checkEggUrl,function(C){var B=baidu.json.parse(C.responseText);A.validateResult=B.success;A.dispatch()})}});bk.activity.dateRangeRule=baidu.lang.createClass(function(A,B){this.beginDate=A;this.endDate=B},{superClass:bk.activity.rule}).extend({validate:function(){var A=new Date();this.validateResult=(this.beginDate<=A&&this.endDate>=A);this.dispatch()}});bk.activity.fiveYearManager=function(F){var C=[];var D=this;function B(K){var I=C.length;if(I>0){var J=C[I-1];J.nextRule=K}K.m=D;C.push(K)}function H(){if(C.length>0){C[0].validate()}}baidu.extend(D,{add:B,run:H});var E=0,A=F.length;while(E<A){B(F[E++])}};baidu.lang.inherits(bk.activity.fiveYearManager,baidu.lang.Class)})();(function(){var B=[];var I=false;var E=false;var C=null;var D="bk.activity.5year.egg";var A="bk.activity.5year.bless";var F=1800000;if(baidu.browser.ie==6){try{document.execCommand("BackgroundImageCache",false,true)}catch(H){}}baidu.more.ns("bk.activity.fiveYearAct");bk.activity.fiveYearAct.init=function(N){N=parseInt(N,10);E=baidu.cookie.get(D);var M=null;var P=new bk.activity.dateRangeRule(Date.parse("4/11/2011"),Date.parse("6/11/2011"));switch(N){case 1:B.push(new bk.activity.ratioRule());break;case 2:case 3:B.push(new bk.activity.ratioRule(1));break;case 4:var Q=document.title.split("_");if(Q[0]=="百度百科"){N=4}if(Q[0]=="4月20日"){N=5}M=new bk.activity.fiveYearLemmaRule(Q[0],["百度百科",["4月20日","4.20"]]);B.push(M);B.push(new bk.activity.ratioRule(1));break}var L="/fiveyear/coloregg/?"+baidu.url.jsonToQuery({action:"getEgg",eggType:N,r:Math.random()});fiveYearEgg=new bk.activity.fiveYearEgg(N);fiveYearEgg.addEventListener("onClick",function(){if(I){fiveYearEgg.close();O()}else{fiveYearEgg.close();userlogin(function(){baidu.cookie.set(D,true);location.href=location.href.replace(/#.*$/g,"")})}});fiveYearEgg.addEventListener("onClose",function(R){if(R&&R.flag){nslog(location.href,457,{eggType:N})}});userlogin.check(function(){I=true;var R=new bk.activity.getRewardRule(fiveYearEgg);R.addEventListener("onValidateError",function(){if(E!=null){baidu.cookie.remove(D);eggPop=new Popup({width:400,height:150,contentType:2,isReloadOnClose:false});eggPop.setContent("title","百科五周年");eggPop.setContent("contentHtml",'<div><h3 style="margin:0 30px;font-size:14px;line-height:24px;">对不起！你已经领取过该彩蛋了。到<a href="/cms/s/5years/surprise.html" target="_blank" style="margin:0 2px;color:#004080;text-decoration:none;">嘉年华活动页</a>去看看你收集的彩蛋吧。</h3><div style="text-align:center;margin-top:20px;"><input id="blessBtn" type="button" style="width:68px;height:25px;background:url(http://img.baidu.com/img/baike/usercenter/usercard/usercard-setting.png) no-repeat -37px 0;font-size:14px;font-weight:bold;color:#0163AF;border:0;cursor:pointer;letter-spacing:2px;" value="确定" onclick="eggPop.close.call(eggPop);"/></div></div>');eggPop.build();eggPop.show()}});var S=[P];if(N==4||N==5){S.push(M)}S.push(R);J(S)},function(){B.unshift(P);J(B)});baidu.extend(bk.activity.fiveYearEgg,{getEgg:function(){fiveYearEgg.click()},close:function(){fiveYearEgg.close(true)}});function J(R){actManager=new bk.activity.fiveYearManager(R);actManager.addEventListener("onValidateOver",function(){if(E!=null){O()}else{fiveYearEgg.build();var S=baidu.page.getViewWidth();var V=baidu.page.getViewHeight();var U=(S-200)*0.5;var T=(V-150)*0.5;fiveYearEgg.setPosition({l:U,t:T});nslog(location.href,455,{eggType:N})}});actManager.run()}function O(){baidu.cookie.remove(D);baidu.ajax.get(L,function(S){var R=baidu.json.parse(S.responseText);if(R.success){nslog(location.href,456,{eggType:N});K()}else{alert(R.message)}})}function K(){if(!C){C=new Popup({width:465,height:295,contentType:2,isReloadOnClose:false});C.setContent("title","百科五周年");C.setContent("contentHtml",'<div style="width:460px;height:250px;background:url(http://img.baidu.com/img/baike/usercenter/task/5year-congra.png) no-repeat 0 0;"><div><a class="eggClose" title="查看彩蛋" target="_blank" href="/cms/s/5years/surprise.html" style="display:block;width:156px;height:40px;line-height:40px;position:relative;top:158px;margin-left:76px;text-indent:3000px;overflow:hidden;">查看彩蛋</a></div>');C.build();C.show();baidu.q("eggClose")[0].onclick=function(){C.close()}}}};bk.activity.fiveYearAct.view=function(){var N="/fiveyear/bless/?";var M="/fiveyear/bless/?r="+Math.random();var J="bk.activity.5year.view";var Q=baidu.cookie.get(J);function L(){var T=baidu.cookie.get("USERID");var S=A+T;if(baidu.cookie.get(S)){P();return }baidu.cookie.remove(J);baidu.ajax.get(N+baidu.url.jsonToQuery({r:Math.random(),action:"addBless"}),function(W){var V=W.responseText;if(V){var U=baidu.json.parse(W.responseText);if(U.success){R(U);baidu.cookie.set(S,Math.random().toString().slice(2),{expires:F})}else{P()}}else{alert("祝福失败")}})}function K(){baidu.ajax.get(M,function(T){var S=baidu.json.parse(T.responseText);R(S)})}function P(){location.hash="#nav";pop=new Popup({width:400,height:140,contentType:2,isReloadOnClose:false});pop.setContent("title","百科五周年");pop.setContent("contentHtml",'<div><h3 style="text-align:left;font-size:14px;text-indent:28px;line-height:24px;">亲爱的科友，今天您已经祝福过了，明天再来吧。</h3><div style="text-align:center;margin-top:20px;"><input id="blessBtn" type="button" style="width:68px;height:25px;background:url(http://img.baidu.com/img/baike/usercenter/usercard/usercard-setting.png) no-repeat -37px 0;font-size:14px;font-weight:bold;color:#0163AF;border:0;cursor:pointer;letter-spacing:2px;" value="确定" onclick="pop.close.call(pop);"/></div></div>');pop.build();pop.show()}function R(S){baidu.q("num")[0].innerHTML=S.totalBless;baidu.q("my-bless")[0].innerHTML=S.score}function O(){nslog(location.href,459);userlogin.check(L,function(){userlogin(function(){baidu.cookie.set(J,true);location.href=location.href.replace(/#.*$/g,"")})})}if(Q){L()}return{bless:O,getBlessInfo:K}};bk.activity.fiveYearAct.egg=function(){var J="/fiveyear/coloregg/?r="+Math.random();var L={1:"bai",2:"ke",3:"zhou",4:"nian",5:"wu"};function K(){baidu.ajax.get(J,function(Q){var O=baidu.json.parse(Q.responseText);if(O.colorEgg){var N=O.colorEgg.length;for(var P=0;P<N;++P){var M=O.colorEgg[P];baidu.g("fiveEgg"+M).src="img/egg_"+L[M]+".jpg"}}})}return{getEggInfo:function(){userlogin.check(K,function(){})}}}})();baidu=baidu||{};baidu.bottle=(function(){var A;return{closeDialog:function(){A.close()},throwBottle:function(F,I,E,J,B,C){C=C||"";if(!C&&G("polysemy-sub-lemma-desc-temp")&&"undefined"!=typeof (EditHelpConf)&&EditHelpConf.isPolysemy){C=G("polysemy-sub-lemma-desc-temp").value}if(!B&&G("polysemy-sub-lemma-id")&&"undefined"!=typeof (EditHelpConf)&&EditHelpConf.isPolysemy){B=G("polysemy-sub-lemma-id").value}var D=new bk.floatBottle.cardBottle({lemmas:[{lemmaId:F,lemmaTitle:I}]});var H=this;D.addEventListener("onCheckSuccess",function(K){H._doThrwoBottle(F,I,E,J,B,C)});D.addEventListener("onCheckFail",function(K){var L=["","正常","来源词或者锁定词","瓶子扔过了","次数超过","包含敏感词","提交验证失败","扔瓶子失败","扔成功","本期求助瓶仅开放名片求助。您已经有名片权限，快去发挥特权，捞瓶子帮助别人吧！"];if(K.code==2){H.showDialog("lockedlemma")}else{if(K.code==3){H.showDialog("versionconflict")}else{if(K.code==4){H.showDialog("nobottle",{nums:K.detail})}else{if(K.code==9){H.showDialog("cahedit")}else{alert(L[K.code])}}}}});D.check()},_doThrwoBottle:function(E,F,D,H,B,C){H=H||1;A=Fe.Dialog.open("/page/throwbtl.html?lemmaId="+E+"&lemmaTitle="+encodeURIComponent(F)+"&userId="+D+"&type="+H+"&polysemy="+encodeURIComponent(C)+"&polysemyId="+(B),{title:"发送求助瓶",width:"483px",height:"490px",buttonAcceptValue:"扔出去",buttonCancelValue:"不扔了",buttonbar:true,buttonAccept:true,buttonCancel:true,contentType:"HTMLUrl",locked:true,onaccept:function(){if(A.getIframe()){A.getIframe().contentWindow.throwBottle()}}});A.addEventListener("onaccept",function(I){I.returnValue=false})},showDialog:function(C,B){var D="";switch(C){case"lockedlemma":Detect.content="<p>来源词或锁定词不能进行求助。</p>";D="不能求助";break;case"versionconflict":Detect.content="<p>已有科友对该词条的名片发起了求助，求助正在进行中。休息一下，一会儿再来看看吧。</p>";D="发送求助瓶";break;case"nobottle":Detect.content="每人每天只有"+B.nums+'个瓶子，今天的瓶子用完啦！你也可以参加<a href="/uc/task#1" target="_blank">成长任务</a>，加速升级，自己获得权限来编辑！';D="瓶子不够啦";break;case"cahedit":Detect.content="本期求助瓶仅开放名片求助。您已经有名片权限，快去发挥特权，捞瓶子帮助别人吧！<br/>有求助需编辑时，会有小气泡提示您，也可以随时去“个人中心-我的求助瓶”捞取。";D="您已有名片权限";break;default:Detect.content="出错了！";D="出错了！";break}Fe.Dialog.open("/page/privcheck.html",{title:D,width:"402px",height:"180px",buttonbar:true,buttonAccept:true,buttonCancel:false,contentType:"HTMLUrl",locked:true})}}})();baidu.dom.ready(function(){var C=baidu.g("lemmaid");if(!C){return }C=C.value;if(!C){return }var B="/user/ajax/bottle/getinfo";var D="lemmaId="+C;var A=function(H,F){if(""==F||"null"==F||"[]"==F||/html/.test(F)){return }var E=baidu.json.parse(F);baidu.g("tip-btl-content-mod").innerHTML=E.content.content;baidu.g("tip-btl-content-reason").innerHTML=E.content.reason;baidu.g("tip-btl-content-ref").innerHTML=E.content.reference;baidu.g("tip-btl-link").href=baidu.g("tip-btl-link").href+E.id;baidu.g("tip-btl").style.display="block"};baidu.ajax.post(B,D,A)});baidu.more.ns("bk.ui");if(typeof bk=="undefined"){bk={}}if(typeof bk.ui=="undefined"){bk.ui={}}bk.ui.enctip=function(){this.type=1;this.msg_url="/user/ajax/checknotice?entry="+this.type+"&r="+Math.random();this.has_login=true;this.id="encourage_tip_wrapper";this.cookie_name="bk_encourage_tip2";this.cookie_interval=1800000};bk.ui.enctip.prototype={render:function(D){var A=document.createDocumentFragment();var C=document.createElement("div");C.id=this.id;C.className="enc-tip";C.innerHTML='<div class="ctr"><div class="tri out"></div><div class="tri in"></div></div><div class="enc-wrap"><div class="enc-content fix clearfix"><div class="fl"><a href="'+D.href+'" target="_blank" onclick="nslog(\''+window.location.href+'\', 434)"><img id="encTipIcon" src="" /></a></div><div class="fr"><h3><a href="'+D.href+'" target="_blank" onclick="nslog(\''+window.location.href+"', 434)\">"+D.title+'</a></h3><div class="enc-txt" id="encourage_body">'+D.text+'</div></div></div></div><a href="javascript:void(0)" class="close" title="关闭" onclick="var tipWrapper = baidu.g(\'encourage_tip_wrapper\');tipWrapper.parentNode.removeChild(tipWrapper);nslog(\''+window.location.href+"',442);\">关闭</a>";A.appendChild(C);document.body.appendChild(A);var B=baidu.g("encTipIcon");B.onload=function(){var F=baidu.browser.ie?262:264;var H=baidu.dom.query(".enc-content .fl")[0].offsetWidth;baidu.dom.setStyle(baidu.dom.query(".enc-content .fr")[0],"width",(F-H));baidu.q("enc-content")[0].style.zoom="1";baidu.q("enc-tip")[0].style.visibility="visible";B.onload=null;var J=baidu.dom.getPosition("my_home_container").left;var E=baidu.dom.getPosition(C.id).left;var I=J-E+20;baidu.q("ctr")[0].style.left=I+"px"};B.src=D.url;bk.ui.enctip.set_nslog_area_type("encourage_body",435)},close:function(){var A=baidu.g("encourage_tip_wrapper");if(A){A.parentNode.removeChild(A)}},init:function(){var A=false;if(this.has_login){var B=baidu.cookie.get(this.cookie_name);if(!B){A=true;baidu.cookie.set(this.cookie_name,baidu.url.jsonToQuery({show:A}),{expires:this.cookie_interval})}}if(A){this.get_content()}},get_content:function(){var A=this;baidu.ajax.get(this.msg_url,function(E){var C=bk.ui.enctip.format_result(baidu.json.parse(E.responseText),A.type);var B=false;for(var D in C){B=true;break}if(B){A.render(C)}})}};bk.ui.enctip.format_result=function(E,C){var D={};var A=E.length;if(A==0){return D}switch(C){case 0:case 1:D.href=E[0].iconHref;D.url=E[0].iconUrl;D.title=E[0].title;D.text=E[0].text;return D;break;case 2:D.href=E[0].iconHref;D.url=E[0].iconUrl;D.banner_href=E[0].bannerHref;D.banner_url=E[0].bannerBigUrl;D.title=E[0].title;D.text=[];break;case 3:D.href=E[0].iconHref;D.title=E[0].title;D.text=[];break;case 4:D.banner_href=E[0].bannerHref;D.banner_url=E[0].bannerUrl;D.text=E[0].text;return D;break}if(A>0){for(var B=0;B<A;++B){D.text.push(E[B].text)}}return D};bk.ui.enctip.build_tip_generic=function(B,E){var D=function(F){return E.call(null,F)};var C=B;var A="/user/ajax/checknotice?entry="+C+"&r="+Math.random();baidu.ajax.get(A,function(I){var F=baidu.json.parse(I.responseText);if(F.length>0){var H=bk.ui.enctip.format_result(F,C);D(H)}})};bk.ui.enctip.set_nslog_area_type=function(C,A){var B=(typeof C==="string")?baidu.g(C):C;baidu.each(B.getElementsByTagName("a"),function(D){D.target="_blank";D.className="nslog:"+A})};bk.ui.enctip.build_edit_tip=function(){var A=function(C){var B='<div id="encourage_tipbar"><div class="push-close-btn" alt="关闭" title="关闭"  onclick="nslog(\''+window.location.href+'\', 443);var msg_pb = document.getElementById(\'encourage_tipbar\');msg_pb.parentNode.removeChild(msg_pb);msg_pb=null"></div><div><a class="icon-address" id="encourage_icon_href" href="'+C.href+'" target="_blank"><img id="encourage_icon_url" src="'+C.url+'" alt="打开链接" title="打开链接"  /></a><span id="encourage_text">'+C.text+"</span></div></div>";if(baidu.g("inputShowMainInfoBoxDiv")){baidu.dom.insertHTML("inputShowMainInfoBoxDiv","afterEnd",B);bk.ui.enctip.set_nslog_area_type("encourage_text",436)}};bk.ui.enctip.build_tip_generic(0,A)};bk.ui.enctip.build_usercenter_tip=function(){var A=function(H){var C=H.text.length;var B=[];for(var F=0;F<C;++F){B.push("<li><span>");B.push(H.text[F]);B.push("</span></li>")}var D=window.location.href;var E='<div class="push-ads" id="push_ads"><a id="banner_href" href="'+H.banner_href+'" class="icon-address" target="_blank" onclick="nslog(\''+H.banner_href+'\',437)"><img id="banner_url" src="'+H.banner_url+'" alt="打开链接" title="打开链接" width="778px" height="100px"/></a><a class="del" onclick="nslog(\''+D+'\', 444);var del = document.getElementById(\'push_ads\');del.parentNode.removeChild(del);del=null"><img src="http://img.baidu.com/img/baike/encourage/push-del.gif" alt="关闭" title="关闭" /></a></div><dl class="mod-push" id="enc_push_bar"><dt><p><a id="encourage_icon_href" href="'+H.href+'" class="icon-address" target="_blank"><img id="encourage_icon_url" src="'+H.url+'" alt="打开链接" title="打开链接" /></a><span id="encourage_title">'+H.title+'</span></p><div class="del" onclick="nslog(\''+D+'\', 445);var del = document.getElementById(\'enc_push_bar\');del.parentNode.removeChild(del);del=null" title="关闭"></div></dt><dd><ul id="encouragements">'+B.join("")+"</ul></dd></dl>";baidu.dom.insertHTML("col_main","afterBegin",E);bk.ui.enctip.set_nslog_area_type("encouragements",438)};bk.ui.enctip.build_tip_generic(2,A)};bk.ui.enctip.build_userinfo_tip=function(){var A=baidu.g("encourage");if(!A){return }var B=function(F){baidu.g("encourage_icon_href").href=F.href;var H=baidu.g("encourage_title");H.href=F.href;H.innerHTML=F.title;var C=F.text.length;var E=[];for(var D=0;D<C;++D){E.push("<li><span>");E.push(F.text[D]);E.push("</span></li>")}var I=baidu.g("encouragements");I.innerHTML=E.join("");baidu.removeClass(A,"dnone");baidu.removeClass(A.parentNode,"dnone");bk.ui.enctip.set_nslog_area_type(I,439)};bk.ui.enctip.build_tip_generic(3,B)};bk.ui.enctip.build_edit_success_tip=function(B){var A=function(F){var E='<a href="'+F.banner_href+'" onclick="nslog(\''+F.banner_href+'\',440)" target="_blank"><img width="450px" height="60px" src="'+F.banner_url+'" /></a>';var D=baidu.g("encourage_tip");D.innerHTML=E;D.style.display="block";var C=baidu.g("encourage_text");C.innerHTML=F.text;C.style.display="block"};bk.ui.enctip.build_tip_generic(4,A)};baidu.dom.ready(function(){baidu.dom.ready(bk.userbar.check);baidu.ajax.get("/api/lemmacnt/"+baikeViewInfo.id,function(xhr){var result=eval("("+xhr.responseText+")");if(result){baidu.G("viewPV").innerHTML=result.pv;baidu.G("vote_num").innerHTML=result.rec;if(result.dynamic){bk.view.getDynamicData()}}});(function(){var vote_btn=baidu.G("vote_btn");baidu.on(vote_btn,"mouseover",function(){this.className="text_vote2"});baidu.on(vote_btn,"mouseout",function(){this.className="text_vote1";baidu.G("vote_txt").innerHTML="本词条对我有帮助"});baidu.on(vote_btn,"click",function(){baidu.sio.callByBrowser("/view/recommendLemma/lemmaid="+baikeViewInfo.id+"&random="+Math.random())});vote_btn=null})();baidu.each(document.getElementsByTagName("img"),function(img,index){if(img.className=="editorImg"){baidu.on(img,"mousedown",function(){nslog(this.src,8)})}});bk.view.relatedInit();bk.view.coEditorInit();(function(){var _hash=location.hash;if(_hash){setTimeout(function(){window.location.hash=_hash.slice(1)},1000)}var modifytime=baidu.G("lastModifyTime");modifytime.innerHTML=bk.view.getDays(baidu.trim(modifytime.innerHTML))})();baidu.on(baidu.g("gotop"),"click",function(e){baidu.event.preventDefault(e);nslog(location.href,1028);window.scrollTo(0,0)});bk.view.initSubLemmaList();baidu.each(baidu.dom.query("#content .lemma-main-content"),function(item,index){baidu.on(item,"click",function(e){var evt=baidu.event.get(e);var ele=evt.target;if(ele.nodeName.toUpperCase()=="SUP"){gotoRef(ele,index)}})});baidu.sio.callByBrowser("http://baike.bdimg.com/js/bk.usercard.js?r="+Math.random());bk.activity.fiveYearAct.init(4)});var bk=bk||function(){};bk.editor=bk.editor||function(){};bk.editor.ani=function(C,B,A){if(C){this.time=C}if(B){this.transform=B}if(A){this.interval=A}};bk.editor.ani.prototype={interval:40,transform:function(A){return 1-Math.pow(1-A,3)},time:2000,task:null,finishFunc:null,start:function(H,F){var B=this.interval;var D=this.time;var C=this.transform;var E=C(1);var J=0;var I=this;this.finishFunc=F;function A(){J+=B;var K=J/D;if(K>=1){H(1);F&&F();clearInterval(I.task)}else{H(C(K)/E)}}this.task=setInterval(A,B)},stop:function(){if(this.task){clearInterval(this.task)}if(this.finishFunc){this.finishFunc()}}};